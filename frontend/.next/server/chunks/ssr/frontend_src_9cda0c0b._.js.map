{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/frontend/src/hooks/use-role.ts"],"sourcesContent":["\n\"use client\"\nimport { useState, useEffect, useCallback } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useToast } from './use-toast';\n\nimport { Role, availableRoles } from '@common/types/role';\n\nconst ROLE_STORAGE_KEY = 'accountability-os-role';\nconst ACTIVE_SURVEY_KEY = 'active_survey_exists';\n\nexport const useRole = () => {\n    const [role, setRole] = useState<Role | null>(null);\n    const [isLoading, setIsLoading] = useState(true);\n    const [activeSurveyExists, setActiveSurveyExists] = useState(true); // Always show the survey option\n    const router = useRouter();\n    const { toast } = useToast();\n\n    useEffect(() => {\n        const initializeRole = async () => {\n            try {\n                const storedRole = localStorage.getItem(ROLE_STORAGE_KEY) as Role;\n                if (storedRole && [...availableRoles].includes(storedRole)) {\n                    setRole(storedRole);\n                }\n                // The survey button is now always active, so we don't need to check session storage for its visibility.\n            } catch (error) {\n                console.error(\"Could not read from storage\", error);\n            } finally {\n                setIsLoading(false);\n            }\n        };\n        initializeRole();\n    }, []);\n\n    const setCurrentRole = useCallback(async (newRole: Role | null) => {\n        setRole(newRole);\n        \n        try {\n            if (newRole) {\n                localStorage.setItem(ROLE_STORAGE_KEY, newRole);\n            } else {\n                localStorage.removeItem(ROLE_STORAGE_KEY);\n            }\n        } catch (error) {\n            console.error(\"Could not write role to localStorage\", error);\n        }\n    }, []);\n\n    return { role, setRole: setCurrentRole, isLoading, availableRoles, activeSurveyExists, toast };\n};\n"],"names":[],"mappings":";;;AAEA;AACA;AACA;AAEA;AALA;;;;;AAOA,MAAM,mBAAmB;AACzB,MAAM,oBAAoB;AAEnB,MAAM,UAAU;IACnB,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAe;IAC9C,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE,OAAO,gCAAgC;IACpG,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,wIAAA,CAAA,WAAQ,AAAD;IAEzB,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACN,MAAM,iBAAiB;YACnB,IAAI;gBACA,MAAM,aAAa,aAAa,OAAO,CAAC;gBACxC,IAAI,cAAc;uBAAI,uHAAA,CAAA,iBAAc;iBAAC,CAAC,QAAQ,CAAC,aAAa;oBACxD,QAAQ;gBACZ;YACA,wGAAwG;YAC5G,EAAE,OAAO,OAAO;gBACZ,QAAQ,KAAK,CAAC,+BAA+B;YACjD,SAAU;gBACN,aAAa;YACjB;QACJ;QACA;IACJ,GAAG,EAAE;IAEL,MAAM,iBAAiB,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE,OAAO;QACtC,QAAQ;QAER,IAAI;YACA,IAAI,SAAS;gBACT,aAAa,OAAO,CAAC,kBAAkB;YAC3C,OAAO;gBACH,aAAa,UAAU,CAAC;YAC5B;QACJ,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,wCAAwC;QAC1D;IACJ,GAAG,EAAE;IAEL,OAAO;QAAE;QAAM,SAAS;QAAgB;QAAW,gBAAA,uHAAA,CAAA,iBAAc;QAAE;QAAoB;IAAM;AACjG","debugId":null}},
    {"offset": {"line": 72, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/frontend/src/hooks/use-mobile.tsx"],"sourcesContent":["import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n"],"names":[],"mappings":";;;AAAA;;AAEA,MAAM,oBAAoB;AAEnB,SAAS;IACd,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAc,AAAD,EAAuB;IAEpE,CAAA,GAAA,qMAAA,CAAA,YAAe,AAAD,EAAE;QACd,MAAM,MAAM,OAAO,UAAU,CAAC,CAAC,YAAY,EAAE,oBAAoB,EAAE,GAAG,CAAC;QACvE,MAAM,WAAW;YACf,YAAY,OAAO,UAAU,GAAG;QAClC;QACA,IAAI,gBAAgB,CAAC,UAAU;QAC/B,YAAY,OAAO,UAAU,GAAG;QAChC,OAAO,IAAM,IAAI,mBAAmB,CAAC,UAAU;IACjD,GAAG,EAAE;IAEL,OAAO,CAAC,CAAC;AACX","debugId":null}},
    {"offset": {"line": 97, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/frontend/src/lib/role-mapping.ts"],"sourcesContent":["\n\nimport type { Role } from '@/hooks/use-role';\n\nexport const roleUserMapping: Record<Role, { name: string; fallback: string; imageHint: string, role: Role }> = {\n  'Manager': { name: 'Alex Smith', fallback: 'AS', imageHint: 'manager', role: 'Manager' },\n  'Team Lead': { name: 'Ben Carter', fallback: 'BC', imageHint: 'leader', role: 'Team Lead' },\n  'AM': { name: 'Ashley Miles', fallback: 'AM', imageHint: 'assistant manager', role: 'AM' },\n  'Employee': { name: 'Casey Day', fallback: 'CD', imageHint: 'employee', role: 'Employee' },\n  'HR Head': { name: 'Dana Evans', fallback: 'DE', imageHint: 'hr head', role: 'HR Head' },\n  'Anonymous': { name: 'Anonymous', fallback: '??', imageHint: 'anonymous person', role: 'Anonymous' }\n};\n\nexport const getRoleByName = (name: string): Role | undefined => {\n    for (const key in roleUserMapping) {\n        if (roleUserMapping[key as Role].name === name) {\n            return key as Role;\n        }\n    }\n    return undefined;\n}\n\nexport const formatActorName = (actor: Role | 'System' | string | undefined): string => {\n    if (!actor) return 'System';\n    if (actor === 'System') return 'System';\n    if (actor === 'Anonymous') return 'Anonymous';\n    \n    // Check if actor is a valid role first\n    if (Object.keys(roleUserMapping).includes(actor as string)) {\n        const user = roleUserMapping[actor as Role];\n        if (user.role === 'Anonymous') return 'Anonymous';\n        return `${user.name} - ${user.role}`;\n    }\n\n    // Check if actor is a name\n    const role = getRoleByName(actor as string);\n    if (role) {\n        return `${actor} - ${role}`;\n    }\n\n    // Fallback for simple strings\n    return actor as string;\n};\n"],"names":[],"mappings":";;;;;AAIO,MAAM,kBAAmG;IAC9G,WAAW;QAAE,MAAM;QAAc,UAAU;QAAM,WAAW;QAAW,MAAM;IAAU;IACvF,aAAa;QAAE,MAAM;QAAc,UAAU;QAAM,WAAW;QAAU,MAAM;IAAY;IAC1F,MAAM;QAAE,MAAM;QAAgB,UAAU;QAAM,WAAW;QAAqB,MAAM;IAAK;IACzF,YAAY;QAAE,MAAM;QAAa,UAAU;QAAM,WAAW;QAAY,MAAM;IAAW;IACzF,WAAW;QAAE,MAAM;QAAc,UAAU;QAAM,WAAW;QAAW,MAAM;IAAU;IACvF,aAAa;QAAE,MAAM;QAAa,UAAU;QAAM,WAAW;QAAoB,MAAM;IAAY;AACrG;AAEO,MAAM,gBAAgB,CAAC;IAC1B,IAAK,MAAM,OAAO,gBAAiB;QAC/B,IAAI,eAAe,CAAC,IAAY,CAAC,IAAI,KAAK,MAAM;YAC5C,OAAO;QACX;IACJ;IACA,OAAO;AACX;AAEO,MAAM,kBAAkB,CAAC;IAC5B,IAAI,CAAC,OAAO,OAAO;IACnB,IAAI,UAAU,UAAU,OAAO;IAC/B,IAAI,UAAU,aAAa,OAAO;IAElC,uCAAuC;IACvC,IAAI,OAAO,IAAI,CAAC,iBAAiB,QAAQ,CAAC,QAAkB;QACxD,MAAM,OAAO,eAAe,CAAC,MAAc;QAC3C,IAAI,KAAK,IAAI,KAAK,aAAa,OAAO;QACtC,OAAO,GAAG,KAAK,IAAI,CAAC,GAAG,EAAE,KAAK,IAAI,EAAE;IACxC;IAEA,2BAA2B;IAC3B,MAAM,OAAO,cAAc;IAC3B,IAAI,MAAM;QACN,OAAO,GAAG,MAAM,GAAG,EAAE,MAAM;IAC/B;IAEA,8BAA8B;IAC9B,OAAO;AACX","debugId":null}},
    {"offset": {"line": 172, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/frontend/src/app/messages/page.tsx"],"sourcesContent":["\n\"use client\";\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { useRole, Role } from '@/hooks/use-role';\nimport DashboardLayout from '@/components/dashboard-layout';\nimport { Skeleton } from '@/components/ui/skeleton';\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription, CardFooter } from '@/components/ui/card';\nimport { MessageSquare, MessageCircleQuestion, AlertTriangle, CheckCircle, Loader2, ChevronsRight, User, Users, Briefcase, ShieldCheck, UserX, UserPlus, FileText, Zap, BookOpen, Podcast, Newspaper, GraduationCap, Lightbulb, MessageSquareQuote, CheckSquare as CheckSquareIcon, Info, Archive } from 'lucide-react';\nimport { getOneOnOneHistory, OneOnOneHistoryItem, submitEmployeeAcknowledgement, getAllFeedback, Feedback, resolveFeedback, submitEmployeeFeedbackAcknowledgement } from '@/services/feedback-service';\nimport { roleUserMapping, formatActorName } from '@/lib/role-mapping';\nimport { format } from 'date-fns';\nimport { Label } from '@/components/ui/label';\nimport { Button } from '@/components/ui/button';\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group';\nimport { useToast } from '@/hooks/use-toast';\nimport { CriticalCoachingInsight, CoachingRecommendation, SurveyQuestion } from '../types/ai';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Accordion, AccordionContent, AccordionItem, AccordionTrigger } from '@/components/ui/accordion';\nimport { cn } from '@/lib/utils';\n\nfunction LeadershipPulseWidget({ item, onUpdate }: { item: Feedback, onUpdate: () => void }) {\n    // @ts-ignore\n    const questions: SurveyQuestion[] = item.surveyQuestions || [];\n    const [responses, setResponses] = useState<Record<string, string>>({});\n    const [isSubmitting, setIsSubmitting] = useState(false);\n    const { toast } = useToast();\n    const { role } = useRole();\n\n    const allQuestionsAnswered = questions.every(q => responses[q.id!] && responses[q.id!].trim() !== '');\n\n    const handleSubmit = async () => {\n        setIsSubmitting(true);\n        try {\n            const resolutionMessage = `Leadership Pulse submitted with ${Object.keys(responses).length} responses.`;\n            await resolveFeedback(item.trackingId, role!, resolutionMessage);\n            toast({ title: \"Pulse Submitted\", description: \"Thank you for your valuable input.\" });\n            onUpdate();\n        } catch (error) {\n            console.error(\"Failed to submit pulse survey:\", error);\n            toast({ variant: 'destructive', title: \"Submission Failed\" });\n        } finally {\n            setIsSubmitting(false);\n        }\n    };\n    \n    return (\n        <Card className=\"border-purple-500/50\">\n            <CardHeader className=\"bg-purple-500/10\">\n                <CardTitle className=\"flex items-center gap-2 text-purple-700 dark:text-purple-400\">\n                    <MessageCircleQuestion className=\"h-6 w-6\" />\n                    Leadership Pulse Survey\n                </CardTitle>\n                <CardDescription>\n                    {item.message}\n                </CardDescription>\n            </CardHeader>\n            <CardContent className=\"pt-6 space-y-6\">\n                {questions.map((q, index) => (\n                    <div key={q.id} className=\"space-y-2\">\n                        <Label htmlFor={`lp-q-${q.id}`} className=\"font-semibold\">Question {index + 1}</Label>\n                        <p className=\"text-sm\">{q.questionText}</p>\n                        <Textarea\n                            id={`lp-q-${q.id}`}\n                            placeholder=\"Your thoughtful response...\"\n                            value={responses[q.id!] || ''}\n                            onChange={(e) => setResponses(prev => ({...prev, [q.id!]: e.target.value}))}\n                            rows={3}\n                        />\n                    </div>\n                ))}\n            </CardContent>\n            <CardFooter>\n                 <Button onClick={handleSubmit} disabled={isSubmitting || !allQuestionsAnswered}>\n                    {isSubmitting && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\n                    Submit Pulse\n                </Button>\n            </CardFooter>\n        </Card>\n    );\n}\n\nfunction GeneralNotificationWidget({ item, onUpdate }: { item: Feedback, onUpdate: () => void }) {\n    const { toast } = useToast();\n    const { role } = useRole();\n    const [isSubmitting, setIsSubmitting] = useState(false);\n\n    const handleAcknowledge = async () => {\n        setIsSubmitting(true);\n        try {\n            // Resolve the feedback item, which serves as acknowledging it\n            await resolveFeedback(item.trackingId, role!, \"Notification acknowledged.\");\n            toast({ title: \"Notification Acknowledged\" });\n            onUpdate();\n        } catch (error) {\n            console.error(\"Failed to acknowledge notification\", error);\n            toast({ variant: 'destructive', title: \"Acknowledgement Failed\" });\n        } finally {\n            setIsSubmitting(false);\n        }\n    }\n\n    return (\n        <Card className=\"border-green-500/50\">\n            <CardHeader className=\"bg-green-500/10\">\n                <CardTitle className=\"flex items-center gap-2 text-green-700 dark:text-green-400\">\n                    <Info className=\"h-6 w-6\" />\n                    For Your Information\n                </CardTitle>\n                <CardDescription>\n                   {item.subject}\n                </CardDescription>\n            </CardHeader>\n            <CardContent className=\"pt-6 space-y-4\">\n                 <p className=\"text-sm text-muted-foreground whitespace-pre-wrap\">{item.message}</p>\n            </CardContent>\n             <CardFooter>\n                <Button variant=\"success\" onClick={handleAcknowledge} disabled={isSubmitting}>\n                    {isSubmitting && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\n                    Acknowledge\n                </Button>\n            </CardFooter>\n        </Card>\n    )\n}\n\nfunction ConcernAcknowledgementWidget({ item, onUpdate }: { item: Feedback, onUpdate: () => void }) {\n    const { toast } = useToast();\n    const [comments, setComments] = useState('');\n    const [isSubmitting, setIsSubmitting] = useState(false);\n    \n    const lastResponderEvent = item.auditTrail?.slice().reverse().find(e => ['Supervisor Responded', 'HR Resolution Submitted'].includes(e.event));\n\n    const handleAcknowledge = async (accepted: boolean) => {\n        setIsSubmitting(true);\n        try {\n            await submitEmployeeFeedbackAcknowledgement(item.trackingId, accepted, comments);\n            if (accepted) {\n                toast({ title: \"Resolution Accepted\", description: \"The case has been closed.\" });\n            } else {\n                toast({ title: \"Concern Escalated\", description: \"Your feedback has been escalated to the next level.\" });\n            }\n            onUpdate();\n        } catch (error) {\n            console.error(\"Failed to submit acknowledgement\", error);\n            toast({ variant: 'destructive', title: \"Acknowledgement Failed\" });\n        } finally {\n            setIsSubmitting(false);\n        }\n    };\n\n    return (\n        <Card className=\"border-blue-500/50\">\n            <CardHeader className=\"bg-blue-500/10\">\n                <CardTitle className=\"flex items-center gap-2 text-blue-700 dark:text-blue-400\">\n                    <MessageCircleQuestion className=\"h-6 w-6\" />\n                    Response to Your Concern\n                </CardTitle>\n                <CardDescription>\n                    Regarding: {item.subject}\n                </CardDescription>\n            </CardHeader>\n            <CardContent className=\"pt-6 space-y-4\">\n                <div className=\"p-3 bg-muted/80 rounded-md border\">\n                    <p className=\"font-semibold text-foreground\">{formatActorName(lastResponderEvent?.actor)}'s Response:</p>\n                    <p className=\"text-sm text-muted-foreground mt-1 whitespace-pre-wrap\">{item.supervisorUpdate}</p>\n                </div>\n                <div className=\"space-y-3\">\n                    <Label className=\"font-semibold\">Your Acknowledgement</Label>\n                    <p className=\"text-sm text-muted-foreground\">\n                        Please review the response and provide your feedback on the resolution.\n                    </p>\n                    <div className=\"space-y-2 pt-2\">\n                        <Label htmlFor={`ack-comments-${item.trackingId}`}>Additional Comments (Optional)</Label>\n                        <Textarea\n                            id={`ack-comments-${item.trackingId}`}\n                            value={comments}\n                            onChange={(e) => setComments(e.target.value)}\n                            placeholder=\"Provide more detail about your selection...\"\n                            rows={3}\n                            className=\"bg-background\"\n                        />\n                    </div>\n                    <div className=\"flex flex-wrap gap-2 pt-2\">\n                        <Button onClick={() => handleAcknowledge(true)} variant=\"success\" disabled={isSubmitting}>\n                            {isSubmitting && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\n                            Accept Resolution\n                        </Button>\n                        <Button onClick={() => handleAcknowledge(false)} variant=\"destructive\" disabled={isSubmitting}>\n                            {isSubmitting && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\n                            I'm Not Satisfied, Escalate\n                        </Button>\n                    </div>\n                </div>\n            </CardContent>\n        </Card>\n    );\n}\n\nfunction MessagesContent({ role }: { role: Role }) {\n  const [activeMessages, setActiveMessages] = useState<Feedback[]>([]);\n  const [acknowledgedHistory, setAcknowledgedHistory] = useState<Feedback[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  const fetchMessages = useCallback(async () => {\n    setIsLoading(true);\n    const feedback = await getAllFeedback();\n    \n    const userActiveMessages: Feedback[] = [];\n    const userAcknowledgedHistory: Feedback[] = [];\n\n    feedback.forEach(item => {\n        const isAssignedToMe = item.assignedTo?.includes(role);\n        \n        // Active \"For Your Info\" notifications\n        if (item.status === 'Pending Acknowledgement' && isAssignedToMe) {\n            userActiveMessages.push(item);\n        }\n        \n        // Active \"Acknowledge Concern\" messages\n        if (item.status === 'Pending Employee Acknowledgment' && item.submittedBy === role) {\n            userActiveMessages.push(item);\n        }\n        \n        // Active \"Leadership Pulse\" surveys\n        // @ts-ignore\n        if (item.status === 'Pending Manager Action' && isAssignedToMe && item.surveyQuestions) {\n            userActiveMessages.push(item);\n        }\n\n        // Acknowledged History items\n        if (item.status === 'Closed' && item.assignedTo?.includes(role)) {\n            userAcknowledgedHistory.push(item);\n        }\n    });\n\n    userActiveMessages.sort((a, b) => new Date(b.submittedAt).getTime() - new Date(a.submittedAt).getTime());\n    userAcknowledgedHistory.sort((a, b) => new Date(b.submittedAt).getTime() - new Date(a.submittedAt).getTime());\n\n    setActiveMessages(userActiveMessages);\n    setAcknowledgedHistory(userAcknowledgedHistory);\n    setIsLoading(false);\n  }, [role]);\n\n  useEffect(() => {\n    fetchMessages();\n    \n    const handleDataUpdate = () => {\n        fetchMessages();\n    }\n    window.addEventListener('storage', handleDataUpdate);\n    window.addEventListener('feedbackUpdated', handleDataUpdate);\n    return () => {\n        window.removeEventListener('storage', handleDataUpdate);\n        window.removeEventListener('feedbackUpdated', handleDataUpdate);\n    };\n  }, [fetchMessages]);\n\n  const hasActiveMessages = activeMessages.length > 0;\n\n  const renderWidgets = (item: Feedback) => {\n    // @ts-ignore\n    if (item.surveyQuestions) {\n      return <LeadershipPulseWidget key={`${item.trackingId}-pulse`} item={item} onUpdate={fetchMessages} />;\n    }\n    if (item.status === 'Pending Acknowledgement') {\n        return <GeneralNotificationWidget key={`${item.trackingId}-info`} item={item} onUpdate={fetchMessages} />;\n    }\n    if (item.status === 'Pending Employee Acknowledgment') {\n        return <ConcernAcknowledgementWidget key={`${item.trackingId}-concern`} item={item} onUpdate={fetchMessages} />;\n    }\n    return null;\n  };\n\n  return (\n    <div className=\"p-4 md:p-8\">\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"text-3xl font-bold font-headline mb-2 text-foreground flex items-center gap-3\">\n            <MessageSquare className=\"h-8 w-8 text-primary\" />\n            Messages\n          </CardTitle>\n          <CardDescription className=\"text-lg text-muted-foreground\">\n            A central place for critical notifications and actions.\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-6\">\n            {isLoading ? (\n                 <Skeleton className=\"h-48 w-full\" />\n            ) : hasActiveMessages ? (\n                <>\n                    {activeMessages.map(item => renderWidgets(item))}\n                </>\n            ) : (\n                <div className=\"text-center py-12 border-2 border-dashed rounded-lg\">\n                    <CheckCircle className=\"mx-auto h-12 w-12 text-green-500\" />\n                    <h3 className=\"mt-4 text-lg font-semibold text-foreground\">All Caught Up</h3>\n                    <p className=\"mt-2 text-sm text-muted-foreground\">\n                        Important updates and required actions will appear here.\n                    </p>\n                </div>\n            )}\n\n            {acknowledgedHistory.length > 0 && (\n                <Accordion type=\"single\" collapsible className=\"w-full pt-6\">\n                    <AccordionItem value=\"history\" className=\"border-t\">\n                        <AccordionTrigger className=\"text-lg font-semibold text-muted-foreground hover:no-underline\">\n                            <div className=\"flex items-center gap-2\">\n                                <Archive className=\"h-5 w-5\" />\n                                Acknowledged History\n                            </div>\n                        </AccordionTrigger>\n                        <AccordionContent className=\"pt-2 space-y-4\">\n                            {acknowledgedHistory.map(item => (\n                                <Card key={item.trackingId} className=\"bg-muted/50\">\n                                    <CardHeader className=\"pb-3\">\n                                        <CardTitle className=\"text-base\">{item.subject}</CardTitle>\n                                        <CardDescription className=\"text-xs\">\n                                            Acknowledged on: {item.auditTrail?.find(e => e.event === 'Acknowledged')?.timestamp ? format(new Date(item.auditTrail.find(e => e.event === 'Acknowledged')!.timestamp), 'PPP p') : 'N/A'}\n                                        </CardDescription>\n                                    </CardHeader>\n                                    <CardContent>\n                                        <p className=\"text-sm text-muted-foreground whitespace-pre-wrap\">{item.message}</p>\n                                    </CardContent>\n                                </Card>\n                            ))}\n                        </AccordionContent>\n                    </AccordionItem>\n                </Accordion>\n            )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n\n\nexport default function MessagesPage() {\n  const { role, setRole, isLoading } = useRole();\n\n  if (isLoading) {\n    return (\n      <div className=\"flex h-screen w-screen items-center justify-center bg-background\">\n        <div className=\"w-full max-w-sm flex flex-col items-center gap-4\">\n          <Skeleton className=\"h-12 w-48\" />\n          <Skeleton className=\"h-8 w-full\" />\n          <Skeleton className=\"h-32 w-full mt-8\" />\n        </div>\n      </div>\n    );\n  }\n  \n  if (!role) {\n    // This shouldn't happen if navigation is correct, but as a fallback\n    return null;\n  }\n\n  return (\n    <DashboardLayout role={role} onSwitchRole={setRole}>\n        <MessagesContent role={role} />\n    </DashboardLayout>\n  );\n}\n"],"names":[],"mappings":";;;;AAGA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAjBA;;;;;;;;;;;;;;;;AAoBA,SAAS,sBAAsB,EAAE,IAAI,EAAE,QAAQ,EAA4C;IACvF,aAAa;IACb,MAAM,YAA8B,KAAK,eAAe,IAAI,EAAE;IAC9D,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAA0B,CAAC;IACpE,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACjD,MAAM,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,wIAAA,CAAA,WAAQ,AAAD;IACzB,MAAM,EAAE,IAAI,EAAE,GAAG,CAAA,GAAA,uIAAA,CAAA,UAAO,AAAD;IAEvB,MAAM,uBAAuB,UAAU,KAAK,CAAC,CAAA,IAAK,SAAS,CAAC,EAAE,EAAE,CAAE,IAAI,SAAS,CAAC,EAAE,EAAE,CAAE,CAAC,IAAI,OAAO;IAElG,MAAM,eAAe;QACjB,gBAAgB;QAChB,IAAI;YACA,MAAM,oBAAoB,CAAC,gCAAgC,EAAE,OAAO,IAAI,CAAC,WAAW,MAAM,CAAC,WAAW,CAAC;YACvG,MAAM,CAAA,GAAA,kJAAA,CAAA,kBAAe,AAAD,EAAE,KAAK,UAAU,EAAE,MAAO;YAC9C,MAAM;gBAAE,OAAO;gBAAmB,aAAa;YAAqC;YACpF;QACJ,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,kCAAkC;YAChD,MAAM;gBAAE,SAAS;gBAAe,OAAO;YAAoB;QAC/D,SAAU;YACN,gBAAgB;QACpB;IACJ;IAEA,qBACI,8OAAC,4IAAA,CAAA,OAAI;QAAC,WAAU;;0BACZ,8OAAC,4IAAA,CAAA,aAAU;gBAAC,WAAU;;kCAClB,8OAAC,4IAAA,CAAA,YAAS;wBAAC,WAAU;;0CACjB,8OAAC,4OAAA,CAAA,wBAAqB;gCAAC,WAAU;;;;;;4BAAY;;;;;;;kCAGjD,8OAAC,4IAAA,CAAA,kBAAe;kCACX,KAAK,OAAO;;;;;;;;;;;;0BAGrB,8OAAC,4IAAA,CAAA,cAAW;gBAAC,WAAU;0BAClB,UAAU,GAAG,CAAC,CAAC,GAAG,sBACf,8OAAC;wBAAe,WAAU;;0CACtB,8OAAC,6IAAA,CAAA,QAAK;gCAAC,SAAS,CAAC,KAAK,EAAE,EAAE,EAAE,EAAE;gCAAE,WAAU;;oCAAgB;oCAAU,QAAQ;;;;;;;0CAC5E,8OAAC;gCAAE,WAAU;0CAAW,EAAE,YAAY;;;;;;0CACtC,8OAAC,gJAAA,CAAA,WAAQ;gCACL,IAAI,CAAC,KAAK,EAAE,EAAE,EAAE,EAAE;gCAClB,aAAY;gCACZ,OAAO,SAAS,CAAC,EAAE,EAAE,CAAE,IAAI;gCAC3B,UAAU,CAAC,IAAM,aAAa,CAAA,OAAQ,CAAC;4CAAC,GAAG,IAAI;4CAAE,CAAC,EAAE,EAAE,CAAE,EAAE,EAAE,MAAM,CAAC,KAAK;wCAAA,CAAC;gCACzE,MAAM;;;;;;;uBARJ,EAAE,EAAE;;;;;;;;;;0BAatB,8OAAC,4IAAA,CAAA,aAAU;0BACN,cAAA,8OAAC,8IAAA,CAAA,SAAM;oBAAC,SAAS;oBAAc,UAAU,gBAAgB,CAAC;;wBACtD,8BAAgB,8OAAC,iNAAA,CAAA,UAAO;4BAAC,WAAU;;;;;;wBAA+B;;;;;;;;;;;;;;;;;;AAMvF;AAEA,SAAS,0BAA0B,EAAE,IAAI,EAAE,QAAQ,EAA4C;IAC3F,MAAM,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,wIAAA,CAAA,WAAQ,AAAD;IACzB,MAAM,EAAE,IAAI,EAAE,GAAG,CAAA,GAAA,uIAAA,CAAA,UAAO,AAAD;IACvB,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEjD,MAAM,oBAAoB;QACtB,gBAAgB;QAChB,IAAI;YACA,8DAA8D;YAC9D,MAAM,CAAA,GAAA,kJAAA,CAAA,kBAAe,AAAD,EAAE,KAAK,UAAU,EAAE,MAAO;YAC9C,MAAM;gBAAE,OAAO;YAA4B;YAC3C;QACJ,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,sCAAsC;YACpD,MAAM;gBAAE,SAAS;gBAAe,OAAO;YAAyB;QACpE,SAAU;YACN,gBAAgB;QACpB;IACJ;IAEA,qBACI,8OAAC,4IAAA,CAAA,OAAI;QAAC,WAAU;;0BACZ,8OAAC,4IAAA,CAAA,aAAU;gBAAC,WAAU;;kCAClB,8OAAC,4IAAA,CAAA,YAAS;wBAAC,WAAU;;0CACjB,8OAAC,kMAAA,CAAA,OAAI;gCAAC,WAAU;;;;;;4BAAY;;;;;;;kCAGhC,8OAAC,4IAAA,CAAA,kBAAe;kCACZ,KAAK,OAAO;;;;;;;;;;;;0BAGpB,8OAAC,4IAAA,CAAA,cAAW;gBAAC,WAAU;0BAClB,cAAA,8OAAC;oBAAE,WAAU;8BAAqD,KAAK,OAAO;;;;;;;;;;;0BAElF,8OAAC,4IAAA,CAAA,aAAU;0BACR,cAAA,8OAAC,8IAAA,CAAA,SAAM;oBAAC,SAAQ;oBAAU,SAAS;oBAAmB,UAAU;;wBAC3D,8BAAgB,8OAAC,iNAAA,CAAA,UAAO;4BAAC,WAAU;;;;;;wBAA+B;;;;;;;;;;;;;;;;;;AAMvF;AAEA,SAAS,6BAA6B,EAAE,IAAI,EAAE,QAAQ,EAA4C;IAC9F,MAAM,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,wIAAA,CAAA,WAAQ,AAAD;IACzB,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEjD,MAAM,qBAAqB,KAAK,UAAU,EAAE,QAAQ,UAAU,KAAK,CAAA,IAAK;YAAC;YAAwB;SAA0B,CAAC,QAAQ,CAAC,EAAE,KAAK;IAE5I,MAAM,oBAAoB,OAAO;QAC7B,gBAAgB;QAChB,IAAI;YACA,MAAM,CAAA,GAAA,kJAAA,CAAA,wCAAqC,AAAD,EAAE,KAAK,UAAU,EAAE,UAAU;YACvE,IAAI,UAAU;gBACV,MAAM;oBAAE,OAAO;oBAAuB,aAAa;gBAA4B;YACnF,OAAO;gBACH,MAAM;oBAAE,OAAO;oBAAqB,aAAa;gBAAsD;YAC3G;YACA;QACJ,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,oCAAoC;YAClD,MAAM;gBAAE,SAAS;gBAAe,OAAO;YAAyB;QACpE,SAAU;YACN,gBAAgB;QACpB;IACJ;IAEA,qBACI,8OAAC,4IAAA,CAAA,OAAI;QAAC,WAAU;;0BACZ,8OAAC,4IAAA,CAAA,aAAU;gBAAC,WAAU;;kCAClB,8OAAC,4IAAA,CAAA,YAAS;wBAAC,WAAU;;0CACjB,8OAAC,4OAAA,CAAA,wBAAqB;gCAAC,WAAU;;;;;;4BAAY;;;;;;;kCAGjD,8OAAC,4IAAA,CAAA,kBAAe;;4BAAC;4BACD,KAAK,OAAO;;;;;;;;;;;;;0BAGhC,8OAAC,4IAAA,CAAA,cAAW;gBAAC,WAAU;;kCACnB,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAE,WAAU;;oCAAiC,CAAA,GAAA,yIAAA,CAAA,kBAAe,AAAD,EAAE,oBAAoB;oCAAO;;;;;;;0CACzF,8OAAC;gCAAE,WAAU;0CAA0D,KAAK,gBAAgB;;;;;;;;;;;;kCAEhG,8OAAC;wBAAI,WAAU;;0CACX,8OAAC,6IAAA,CAAA,QAAK;gCAAC,WAAU;0CAAgB;;;;;;0CACjC,8OAAC;gCAAE,WAAU;0CAAgC;;;;;;0CAG7C,8OAAC;gCAAI,WAAU;;kDACX,8OAAC,6IAAA,CAAA,QAAK;wCAAC,SAAS,CAAC,aAAa,EAAE,KAAK,UAAU,EAAE;kDAAE;;;;;;kDACnD,8OAAC,gJAAA,CAAA,WAAQ;wCACL,IAAI,CAAC,aAAa,EAAE,KAAK,UAAU,EAAE;wCACrC,OAAO;wCACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;wCAC3C,aAAY;wCACZ,MAAM;wCACN,WAAU;;;;;;;;;;;;0CAGlB,8OAAC;gCAAI,WAAU;;kDACX,8OAAC,8IAAA,CAAA,SAAM;wCAAC,SAAS,IAAM,kBAAkB;wCAAO,SAAQ;wCAAU,UAAU;;4CACvE,8BAAgB,8OAAC,iNAAA,CAAA,UAAO;gDAAC,WAAU;;;;;;4CAA+B;;;;;;;kDAGvE,8OAAC,8IAAA,CAAA,SAAM;wCAAC,SAAS,IAAM,kBAAkB;wCAAQ,SAAQ;wCAAc,UAAU;;4CAC5E,8BAAgB,8OAAC,iNAAA,CAAA,UAAO;gDAAC,WAAU;;;;;;4CAA+B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQ/F;AAEA,SAAS,gBAAgB,EAAE,IAAI,EAAkB;IAC/C,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAc,EAAE;IACnE,MAAM,CAAC,qBAAqB,uBAAuB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAc,EAAE;IAC7E,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAE3C,MAAM,gBAAgB,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE;QAChC,aAAa;QACb,MAAM,WAAW,MAAM,CAAA,GAAA,kJAAA,CAAA,iBAAc,AAAD;QAEpC,MAAM,qBAAiC,EAAE;QACzC,MAAM,0BAAsC,EAAE;QAE9C,SAAS,OAAO,CAAC,CAAA;YACb,MAAM,iBAAiB,KAAK,UAAU,EAAE,SAAS;YAEjD,uCAAuC;YACvC,IAAI,KAAK,MAAM,KAAK,6BAA6B,gBAAgB;gBAC7D,mBAAmB,IAAI,CAAC;YAC5B;YAEA,wCAAwC;YACxC,IAAI,KAAK,MAAM,KAAK,qCAAqC,KAAK,WAAW,KAAK,MAAM;gBAChF,mBAAmB,IAAI,CAAC;YAC5B;YAEA,oCAAoC;YACpC,aAAa;YACb,IAAI,KAAK,MAAM,KAAK,4BAA4B,kBAAkB,KAAK,eAAe,EAAE;gBACpF,mBAAmB,IAAI,CAAC;YAC5B;YAEA,6BAA6B;YAC7B,IAAI,KAAK,MAAM,KAAK,YAAY,KAAK,UAAU,EAAE,SAAS,OAAO;gBAC7D,wBAAwB,IAAI,CAAC;YACjC;QACJ;QAEA,mBAAmB,IAAI,CAAC,CAAC,GAAG,IAAM,IAAI,KAAK,EAAE,WAAW,EAAE,OAAO,KAAK,IAAI,KAAK,EAAE,WAAW,EAAE,OAAO;QACrG,wBAAwB,IAAI,CAAC,CAAC,GAAG,IAAM,IAAI,KAAK,EAAE,WAAW,EAAE,OAAO,KAAK,IAAI,KAAK,EAAE,WAAW,EAAE,OAAO;QAE1G,kBAAkB;QAClB,uBAAuB;QACvB,aAAa;IACf,GAAG;QAAC;KAAK;IAET,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR;QAEA,MAAM,mBAAmB;YACrB;QACJ;QACA,OAAO,gBAAgB,CAAC,WAAW;QACnC,OAAO,gBAAgB,CAAC,mBAAmB;QAC3C,OAAO;YACH,OAAO,mBAAmB,CAAC,WAAW;YACtC,OAAO,mBAAmB,CAAC,mBAAmB;QAClD;IACF,GAAG;QAAC;KAAc;IAElB,MAAM,oBAAoB,eAAe,MAAM,GAAG;IAElD,MAAM,gBAAgB,CAAC;QACrB,aAAa;QACb,IAAI,KAAK,eAAe,EAAE;YACxB,qBAAO,8OAAC;gBAAuD,MAAM;gBAAM,UAAU;eAAlD,GAAG,KAAK,UAAU,CAAC,MAAM,CAAC;;;;;QAC/D;QACA,IAAI,KAAK,MAAM,KAAK,2BAA2B;YAC3C,qBAAO,8OAAC;gBAA0D,MAAM;gBAAM,UAAU;eAAjD,GAAG,KAAK,UAAU,CAAC,KAAK,CAAC;;;;;QACpE;QACA,IAAI,KAAK,MAAM,KAAK,mCAAmC;YACnD,qBAAO,8OAAC;gBAAgE,MAAM;gBAAM,UAAU;eAApD,GAAG,KAAK,UAAU,CAAC,QAAQ,CAAC;;;;;QAC1E;QACA,OAAO;IACT;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC,4IAAA,CAAA,OAAI;;8BACH,8OAAC,4IAAA,CAAA,aAAU;;sCACT,8OAAC,4IAAA,CAAA,YAAS;4BAAC,WAAU;;8CACnB,8OAAC,wNAAA,CAAA,gBAAa;oCAAC,WAAU;;;;;;gCAAyB;;;;;;;sCAGpD,8OAAC,4IAAA,CAAA,kBAAe;4BAAC,WAAU;sCAAgC;;;;;;;;;;;;8BAI7D,8OAAC,4IAAA,CAAA,cAAW;oBAAC,WAAU;;wBAClB,0BACI,8OAAC,gJAAA,CAAA,WAAQ;4BAAC,WAAU;;;;;mCACrB,kCACA;sCACK,eAAe,GAAG,CAAC,CAAA,OAAQ,cAAc;0DAG9C,8OAAC;4BAAI,WAAU;;8CACX,8OAAC,2NAAA,CAAA,cAAW;oCAAC,WAAU;;;;;;8CACvB,8OAAC;oCAAG,WAAU;8CAA6C;;;;;;8CAC3D,8OAAC;oCAAE,WAAU;8CAAqC;;;;;;;;;;;;wBAMzD,oBAAoB,MAAM,GAAG,mBAC1B,8OAAC,iJAAA,CAAA,YAAS;4BAAC,MAAK;4BAAS,WAAW;4BAAC,WAAU;sCAC3C,cAAA,8OAAC,iJAAA,CAAA,gBAAa;gCAAC,OAAM;gCAAU,WAAU;;kDACrC,8OAAC,iJAAA,CAAA,mBAAgB;wCAAC,WAAU;kDACxB,cAAA,8OAAC;4CAAI,WAAU;;8DACX,8OAAC,wMAAA,CAAA,UAAO;oDAAC,WAAU;;;;;;gDAAY;;;;;;;;;;;;kDAIvC,8OAAC,iJAAA,CAAA,mBAAgB;wCAAC,WAAU;kDACvB,oBAAoB,GAAG,CAAC,CAAA,qBACrB,8OAAC,4IAAA,CAAA,OAAI;gDAAuB,WAAU;;kEAClC,8OAAC,4IAAA,CAAA,aAAU;wDAAC,WAAU;;0EAClB,8OAAC,4IAAA,CAAA,YAAS;gEAAC,WAAU;0EAAa,KAAK,OAAO;;;;;;0EAC9C,8OAAC,4IAAA,CAAA,kBAAe;gEAAC,WAAU;;oEAAU;oEACf,KAAK,UAAU,EAAE,KAAK,CAAA,IAAK,EAAE,KAAK,KAAK,iBAAiB,YAAY,CAAA,GAAA,sJAAA,CAAA,SAAM,AAAD,EAAE,IAAI,KAAK,KAAK,UAAU,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,KAAK,KAAK,gBAAiB,SAAS,GAAG,WAAW;;;;;;;;;;;;;kEAG5L,8OAAC,4IAAA,CAAA,cAAW;kEACR,cAAA,8OAAC;4DAAE,WAAU;sEAAqD,KAAK,OAAO;;;;;;;;;;;;+CAR3E,KAAK,UAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoB1D;AAGe,SAAS;IACtB,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,SAAS,EAAE,GAAG,CAAA,GAAA,uIAAA,CAAA,UAAO,AAAD;IAE3C,IAAI,WAAW;QACb,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,gJAAA,CAAA,WAAQ;wBAAC,WAAU;;;;;;kCACpB,8OAAC,gJAAA,CAAA,WAAQ;wBAAC,WAAU;;;;;;kCACpB,8OAAC,gJAAA,CAAA,WAAQ;wBAAC,WAAU;;;;;;;;;;;;;;;;;IAI5B;IAEA,IAAI,CAAC,MAAM;QACT,oEAAoE;QACpE,OAAO;IACT;IAEA,qBACE,8OAAC,qJAAA,CAAA,UAAe;QAAC,MAAM;QAAM,cAAc;kBACvC,cAAA,8OAAC;YAAgB,MAAM;;;;;;;;;;;AAG/B","debugId":null}}]
}