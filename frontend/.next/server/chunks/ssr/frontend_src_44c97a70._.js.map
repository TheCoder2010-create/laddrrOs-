{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/frontend/src/hooks/use-role.ts"],"sourcesContent":["\n\"use client\"\nimport { useState, useEffect, useCallback } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useToast } from './use-toast';\nimport { getLatestActiveSurvey } from '@/services/survey-service';\nimport { type Role, availableRoles, availableRolesForAssignment } from '@common/types/role';\n\nconst ROLE_STORAGE_KEY = 'accountability-os-role';\nconst ACTIVE_SURVEY_KEY = 'active_survey_exists';\n\nexport type { Role };\nexport { availableRoles, availableRolesForAssignment };\n\nexport const useRole = () => {\n    const [role, setRole] = useState<Role | null>(null);\n    const [isLoading, setIsLoading] = useState(true);\n    const [activeSurveyExists, setActiveSurveyExists] = useState(true); // Always show the survey option\n    const router = useRouter();\n    const { toast } = useToast();\n\n    useEffect(() => {\n        const initializeRole = async () => {\n            try {\n                const storedRole = localStorage.getItem(ROLE_STORAGE_KEY) as Role;\n                if (storedRole && [...availableRoles].includes(storedRole)) {\n                    setRole(storedRole);\n                }\n                // The survey button is now always active, so we don't need to check session storage for its visibility.\n            } catch (error) {\n                console.error(\"Could not read from storage\", error);\n            } finally {\n                setIsLoading(false);\n            }\n        };\n        initializeRole();\n    }, []);\n\n    const setCurrentRole = useCallback(async (newRole: Role | null) => {\n        setRole(newRole);\n        \n        try {\n            if (newRole) {\n                localStorage.setItem(ROLE_STORAGE_KEY, newRole);\n            } else {\n                localStorage.removeItem(ROLE_STORAGE_KEY);\n            }\n        } catch (error) {\n            console.error(\"Could not write role to localStorage\", error);\n        }\n    }, []);\n\n    return { role, setRole: setCurrentRole, isLoading, availableRoles, availableRolesForAssignment, activeSurveyExists, toast };\n};\n"],"names":[],"mappings":";;;AAEA;AACA;AACA;AAEA;AALA;;;;;AAOA,MAAM,mBAAmB;AACzB,MAAM,oBAAoB;;AAKnB,MAAM,UAAU;IACnB,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAe;IAC9C,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE,OAAO,gCAAgC;IACpG,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,wIAAA,CAAA,WAAQ,AAAD;IAEzB,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACN,MAAM,iBAAiB;YACnB,IAAI;gBACA,MAAM,aAAa,aAAa,OAAO,CAAC;gBACxC,IAAI,cAAc;uBAAI,uHAAA,CAAA,iBAAc;iBAAC,CAAC,QAAQ,CAAC,aAAa;oBACxD,QAAQ;gBACZ;YACA,wGAAwG;YAC5G,EAAE,OAAO,OAAO;gBACZ,QAAQ,KAAK,CAAC,+BAA+B;YACjD,SAAU;gBACN,aAAa;YACjB;QACJ;QACA;IACJ,GAAG,EAAE;IAEL,MAAM,iBAAiB,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE,OAAO;QACtC,QAAQ;QAER,IAAI;YACA,IAAI,SAAS;gBACT,aAAa,OAAO,CAAC,kBAAkB;YAC3C,OAAO;gBACH,aAAa,UAAU,CAAC;YAC5B;QACJ,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,wCAAwC;QAC1D;IACJ,GAAG,EAAE;IAEL,OAAO;QAAE;QAAM,SAAS;QAAgB;QAAW,gBAAA,uHAAA,CAAA,iBAAc;QAAE,6BAAA,uHAAA,CAAA,8BAA2B;QAAE;QAAoB;IAAM;AAC9H","debugId":null}},
    {"offset": {"line": 86, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/frontend/src/hooks/use-mobile.tsx"],"sourcesContent":["import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n"],"names":[],"mappings":";;;AAAA;;AAEA,MAAM,oBAAoB;AAEnB,SAAS;IACd,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAc,AAAD,EAAuB;IAEpE,CAAA,GAAA,qMAAA,CAAA,YAAe,AAAD,EAAE;QACd,MAAM,MAAM,OAAO,UAAU,CAAC,CAAC,YAAY,EAAE,oBAAoB,EAAE,GAAG,CAAC;QACvE,MAAM,WAAW;YACf,YAAY,OAAO,UAAU,GAAG;QAClC;QACA,IAAI,gBAAgB,CAAC,UAAU;QAC/B,YAAY,OAAO,UAAU,GAAG;QAChC,OAAO,IAAM,IAAI,mBAAmB,CAAC,UAAU;IACjD,GAAG,EAAE;IAEL,OAAO,CAAC,CAAC;AACX","debugId":null}},
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/frontend/src/lib/role-mapping.ts"],"sourcesContent":["\nimport type { Role } from '@common/types/role';\n\nexport const roleUserMapping: Record<Role, { name: string; fallback: string; imageHint: string, role: Role }> = {\n  'Manager': { name: 'Alex Smith', fallback: 'AS', imageHint: 'manager', role: 'Manager' },\n  'Team Lead': { name: 'Ben Carter', fallback: 'BC', imageHint: 'leader', role: 'Team Lead' },\n  'AM': { name: 'Ashley Miles', fallback: 'AM', imageHint: 'assistant manager', role: 'AM' },\n  'Employee': { name: 'Casey Day', fallback: 'CD', imageHint: 'employee', role: 'Employee' },\n  'HR Head': { name: 'Dana Evans', fallback: 'DE', imageHint: 'hr head', role: 'HR Head' },\n  'Anonymous': { name: 'Anonymous', fallback: '??', imageHint: 'anonymous person', role: 'Anonymous' }\n};\n\nexport const getRoleByName = (name: string): Role | undefined => {\n    for (const key in roleUserMapping) {\n        if (roleUserMapping[key as Role].name === name) {\n            return key as Role;\n        }\n    }\n    return undefined;\n}\n\nexport const formatActorName = (actor: Role | 'System' | string | undefined): string => {\n    if (!actor) return 'System';\n    if (actor === 'System') return 'System';\n    if (actor === 'Anonymous') return 'Anonymous';\n    \n    // Check if actor is a valid role first\n    if (Object.keys(roleUserMapping).includes(actor as string)) {\n        const user = roleUserMapping[actor as Role];\n        if (user.role === 'Anonymous') return 'Anonymous';\n        return `${user.name} - ${user.role}`;\n    }\n\n    // Check if actor is a name\n    const role = getRoleByName(actor as string);\n    if (role) {\n        return `${actor} - ${role}`;\n    }\n\n    // Fallback for simple strings\n    return actor as string;\n};\n"],"names":[],"mappings":";;;;;AAGO,MAAM,kBAAmG;IAC9G,WAAW;QAAE,MAAM;QAAc,UAAU;QAAM,WAAW;QAAW,MAAM;IAAU;IACvF,aAAa;QAAE,MAAM;QAAc,UAAU;QAAM,WAAW;QAAU,MAAM;IAAY;IAC1F,MAAM;QAAE,MAAM;QAAgB,UAAU;QAAM,WAAW;QAAqB,MAAM;IAAK;IACzF,YAAY;QAAE,MAAM;QAAa,UAAU;QAAM,WAAW;QAAY,MAAM;IAAW;IACzF,WAAW;QAAE,MAAM;QAAc,UAAU;QAAM,WAAW;QAAW,MAAM;IAAU;IACvF,aAAa;QAAE,MAAM;QAAa,UAAU;QAAM,WAAW;QAAoB,MAAM;IAAY;AACrG;AAEO,MAAM,gBAAgB,CAAC;IAC1B,IAAK,MAAM,OAAO,gBAAiB;QAC/B,IAAI,eAAe,CAAC,IAAY,CAAC,IAAI,KAAK,MAAM;YAC5C,OAAO;QACX;IACJ;IACA,OAAO;AACX;AAEO,MAAM,kBAAkB,CAAC;IAC5B,IAAI,CAAC,OAAO,OAAO;IACnB,IAAI,UAAU,UAAU,OAAO;IAC/B,IAAI,UAAU,aAAa,OAAO;IAElC,uCAAuC;IACvC,IAAI,OAAO,IAAI,CAAC,iBAAiB,QAAQ,CAAC,QAAkB;QACxD,MAAM,OAAO,eAAe,CAAC,MAAc;QAC3C,IAAI,KAAK,IAAI,KAAK,aAAa,OAAO;QACtC,OAAO,GAAG,KAAK,IAAI,CAAC,GAAG,EAAE,KAAK,IAAI,EAAE;IACxC;IAEA,2BAA2B;IAC3B,MAAM,OAAO,cAAc;IAC3B,IAAI,MAAM;QACN,OAAO,GAAG,MAAM,GAAG,EAAE,MAAM;IAC/B;IAEA,8BAA8B;IAC9B,OAAO;AACX","debugId":null}}]
}