{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/frontend/src/services/admin-service.ts"],"sourcesContent":["\n\n'use client';\n\nimport { v4 as uuidv4 } from 'uuid';\nimport { type Role } from '@/hooks/use-role';\nimport { roleUserMapping } from '../../../backend/src/lib/role-mapping';\nimport { OrgCoachingItem } from './org-coaching-service';\n\nexport interface AdminLogEntry {\n    id: string;\n    timestamp: string;\n    actor: string;\n    action: string;\n    caseId?: string;\n}\n\nconst ADMIN_LOG_KEY = 'admin_audit_log';\n\nconst getAdminLogFromStorage = (): AdminLogEntry[] => {\n    if (typeof window === 'undefined') return [];\n    const json = sessionStorage.getItem(ADMIN_LOG_KEY);\n    return json ? JSON.parse(json) : [];\n};\n\nconst saveAdminLogToStorage = (log: AdminLogEntry[]): void => {\n    if (typeof window === 'undefined') return;\n    sessionStorage.setItem(ADMIN_LOG_KEY, JSON.stringify(log));\n};\n\n\nexport const addAdminLogEntry = (actor: string, action: string, caseId?: string) => {\n    const log = getAdminLogFromStorage();\n    const newEntry: AdminLogEntry = {\n        id: uuidv4(),\n        timestamp: new Date().toISOString(),\n        actor,\n        action,\n        caseId,\n    };\n    log.unshift(newEntry);\n    saveAdminLogToStorage(log);\n};\n\nexport async function getAdminAuditLog(): Promise<AdminLogEntry[]> {\n    return getAdminLogFromStorage().sort((a,b) => new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime());\n}\n\nexport async function getAllUsers(): Promise<{ all: Role[] }> {\n    const allUserRoles = Object.keys(roleUserMapping).filter(r => r !== 'Anonymous') as Role[];\n    return { all: allUserRoles };\n}\n"],"names":[],"mappings":";;;;;AAIA;AAEA;AAJA;;;AAeA,MAAM,gBAAgB;AAEtB,MAAM,yBAAyB;IAC3B,uCAAmC;;IAAS;IAC5C,MAAM,OAAO,eAAe,OAAO,CAAC;IACpC,OAAO,OAAO,KAAK,KAAK,CAAC,QAAQ,EAAE;AACvC;AAEA,MAAM,wBAAwB,CAAC;IAC3B,uCAAmC;;IAAM;IACzC,eAAe,OAAO,CAAC,eAAe,KAAK,SAAS,CAAC;AACzD;AAGO,MAAM,mBAAmB,CAAC,OAAe,QAAgB;IAC5D,MAAM,MAAM;IACZ,MAAM,WAA0B;QAC5B,IAAI,CAAA,GAAA,wLAAA,CAAA,KAAM,AAAD;QACT,WAAW,IAAI,OAAO,WAAW;QACjC;QACA;QACA;IACJ;IACA,IAAI,OAAO,CAAC;IACZ,sBAAsB;AAC1B;AAEO,eAAe;IAClB,OAAO,yBAAyB,IAAI,CAAC,CAAC,GAAE,IAAM,IAAI,KAAK,EAAE,SAAS,EAAE,OAAO,KAAK,IAAI,KAAK,EAAE,SAAS,EAAE,OAAO;AACjH;AAEO,eAAe;IAClB,MAAM,eAAe,OAAO,IAAI,CAAC,2IAAA,CAAA,kBAAe,EAAE,MAAM,CAAC,CAAA,IAAK,MAAM;IACpE,OAAO;QAAE,KAAK;IAAa;AAC/B","debugId":null}},
    {"offset": {"line": 61, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/frontend/src/services/org-coaching-service.ts"],"sourcesContent":["\n'use client';\n\nimport { v4 as uuidv4 } from 'uuid';\nimport type { Role } from '@/hooks/use-role';\nimport { addAdminLogEntry } from './admin-service';\n\nexport interface OrgCoachingItem {\n    id: string;\n    theme: string;\n    recommendation: string;\n    targetAudience: string;\n    status: 'Pending' | 'Assigned' | 'In Progress' | 'Completed';\n    assignedAt: string;\n    assignedBy: Role;\n}\n\nexport const ORG_COACHING_KEY = 'org_coaching_items_v1';\n\nconst getFromStorage = <T>(key: string): T[] => {\n    if (typeof window === 'undefined') return [];\n    const json = sessionStorage.getItem(key);\n    return json ? JSON.parse(json) : [];\n};\n\nconst saveToStorage = (key: string, data: any[]): void => {\n    if (typeof window === 'undefined') return;\n    sessionStorage.setItem(key, JSON.stringify(data));\n    window.dispatchEvent(new CustomEvent('feedbackUpdated'));\n    window.dispatchEvent(new Event('storage'));\n};\n\n/**\n * Creates and assigns coaching tasks from the Org Health analysis.\n */\nexport async function assignCoachingFromOrgHealth(\n    recommendations: { theme: string; recommendation: string; targetAudience: string }[],\n    assignerRole: Role\n): Promise<void> {\n    const allItems = getFromStorage<OrgCoachingItem>(ORG_COACHING_KEY);\n    const now = new Date().toISOString();\n\n    const newItems: OrgCoachingItem[] = recommendations.map(rec => ({\n        id: uuidv4(),\n        theme: rec.theme,\n        recommendation: rec.recommendation,\n        targetAudience: rec.targetAudience,\n        status: 'Assigned',\n        assignedAt: now,\n        assignedBy: assignerRole,\n    }));\n\n    // Add new items to the beginning of the list\n    const updatedItems = [...newItems, ...allItems];\n    saveToStorage(ORG_COACHING_KEY, updatedItems);\n\n    // Log this action in the admin log\n    addAdminLogEntry(assignerRole, `Assigned ${newItems.length} new coaching tasks from Org Health analysis.`);\n}\n\n/**\n * Retrieves all coaching items created from Org Health.\n */\nexport async function getOrgCoachingItems(): Promise<OrgCoachingItem[]> {\n    return getFromStorage<OrgCoachingItem>(ORG_COACHING_KEY).sort((a, b) => new Date(b.assignedAt).getTime() - new Date(a.assignedAt).getTime());\n}\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AAJA;;;AAgBO,MAAM,mBAAmB;AAEhC,MAAM,iBAAiB,CAAI;IACvB,uCAAmC;;IAAS;IAC5C,MAAM,OAAO,eAAe,OAAO,CAAC;IACpC,OAAO,OAAO,KAAK,KAAK,CAAC,QAAQ,EAAE;AACvC;AAEA,MAAM,gBAAgB,CAAC,KAAa;IAChC,uCAAmC;;IAAM;IACzC,eAAe,OAAO,CAAC,KAAK,KAAK,SAAS,CAAC;IAC3C,OAAO,aAAa,CAAC,IAAI,YAAY;IACrC,OAAO,aAAa,CAAC,IAAI,MAAM;AACnC;AAKO,eAAe,4BAClB,eAAoF,EACpF,YAAkB;IAElB,MAAM,WAAW,eAAgC;IACjD,MAAM,MAAM,IAAI,OAAO,WAAW;IAElC,MAAM,WAA8B,gBAAgB,GAAG,CAAC,CAAA,MAAO,CAAC;YAC5D,IAAI,CAAA,GAAA,wLAAA,CAAA,KAAM,AAAD;YACT,OAAO,IAAI,KAAK;YAChB,gBAAgB,IAAI,cAAc;YAClC,gBAAgB,IAAI,cAAc;YAClC,QAAQ;YACR,YAAY;YACZ,YAAY;QAChB,CAAC;IAED,6CAA6C;IAC7C,MAAM,eAAe;WAAI;WAAa;KAAS;IAC/C,cAAc,kBAAkB;IAEhC,mCAAmC;IACnC,CAAA,GAAA,kJAAA,CAAA,mBAAgB,AAAD,EAAE,cAAc,CAAC,SAAS,EAAE,SAAS,MAAM,CAAC,6CAA6C,CAAC;AAC7G;AAKO,eAAe;IAClB,OAAO,eAAgC,kBAAkB,IAAI,CAAC,CAAC,GAAG,IAAM,IAAI,KAAK,EAAE,UAAU,EAAE,OAAO,KAAK,IAAI,KAAK,EAAE,UAAU,EAAE,OAAO;AAC7I","debugId":null}},
    {"offset": {"line": 120, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/frontend/src/services/feedback-service.ts"],"sourcesContent":["\n/**\n * @fileOverview A service for managing feedback submissions using sessionStorage.\n *\n * This service provides a simple, client-side persistent storage mechanism for feedback,\n * suitable for a prototype. It now includes custom event dispatching for same-tab updates.\n */\nimport { v4 as uuidv4 } from 'uuid';\nimport type { Role } from '@common/types/role';\nimport { roleUserMapping, getRoleByName } from '@/lib/role-mapping';\nimport type { AnalyzeOneOnOneOutput, CriticalCoachingInsight, CoachingRecommendation, CheckIn, ActionItem, NetsConversationInput, NetsAnalysisOutput } from '@common/types/ai';\nimport type {\n  AuditEvent,\n  FeedbackStatus,\n  Attachment,\n  Feedback,\n  OneOnOneHistoryItem,\n  AssignedPracticeScenario,\n  ActionItemWithSource,\n} from '@common/types/feedback';\nimport { getOrgCoachingItems, type OrgCoachingItem } from './org-coaching-service';\n\nconst FEEDBACK_KEY = 'accountability_feedback_v3';\nconst ONE_ON_ONE_HISTORY_KEY = 'one_on_one_history_v3';\nconst CUSTOM_COACHING_PLANS_KEY = 'custom_coaching_plans_v1';\nconst PRACTICE_SCENARIOS_KEY = 'practice_scenarios_v1';\n\n\n// ==========================================\n// Mock Data Generation\n// ==========================================\nconst getMockOneOnOneHistory = (): OneOnOneHistoryItem[] => {\n    const now = new Date();\n    const leadName = roleUserMapping['Team Lead'].name;\n    const employeeName = roleUserMapping['Employee'].name;\n\n    return [\n        {\n            id: 'mock-1on1-1',\n            supervisorName: leadName,\n            employeeName: employeeName,\n            date: new Date(now.setDate(now.getDate() - 14)).toISOString(),\n            analysis: {\n                supervisorSummary: 'Good session focusing on project blockers. Casey seems motivated but a bit overwhelmed.',\n                employeeSummary: 'We discussed the current project challenges and set some clear priorities for the next two weeks.',\n                employeeInsights: [\"You did a great job articulating the technical challenges you're facing.\"],\n                employeeSwotAnalysis: { strengths: ['Technical Skill'], weaknesses: ['Time Management'], opportunities: ['Lead a sub-feature'], threats: ['Potential burnout'] },\n                leadershipScore: 7,\n                effectivenessScore: 6,\n                strengthsObserved: [{ action: 'Active Listening', example: \"When Casey spoke, you summarized their points accurately.\" }],\n                coachingRecommendations: [{ id: 'rec-1', area: 'Setting Clear Expectations', recommendation: 'Try to define \"done\" more clearly for tasks.', type: 'Article', resource: 'How to Set Clear Expectations', justification: 'Helps with alignment.', status: 'pending', auditTrail: [], checkIns: [], progress: 0 }],\n                actionItems: [{ id: 'ai-1', owner: 'Employee', task: 'Draft the API spec for the new feature', status: 'completed', completedAt: new Date(now.getDate() - 10).toISOString() }],\n                missedSignals: [\"Casey mentioned working late twice, which could be a sign of workload issues you didn't explore.\"],\n                criticalCoachingInsight: {\n                    summary: \"Employee mentioned 'feeling pretty burned out' and supervisor did not explore this critical signal.\",\n                    reason: \"Signs of burnout, if left unaddressed, can lead to decreased productivity, low morale, and attrition. It's critical to address these signals proactively.\",\n                    severity: 'high',\n                    status: 'open',\n                },\n                biasFairnessCheck: { flag: false },\n                localizationCompliance: { applied: false },\n                legalDataCompliance: { piiOmitted: false, privacyRequest: false },\n            }\n        },\n        {\n            id: 'mock-1on1-2',\n            supervisorName: leadName,\n            employeeName: employeeName,\n            date: new Date(now.setDate(now.getDate() - 7)).toISOString(),\n            analysis: {\n                supervisorSummary: 'Follow-up session. Casey has made progress on the API spec. We talked about career growth.',\n                employeeSummary: 'We reviewed your progress and discussed your interest in taking on more leadership responsibilities.',\n                employeeInsights: [\"It's great that you're thinking about your long-term career goals.\"],\n                employeeSwotAnalysis: { strengths: ['Proactive'], weaknesses: ['Public Speaking'], opportunities: ['Mentor a new hire'], threats: ['Impatience with process'] },\n                leadershipScore: 8,\n                effectivenessScore: 8,\n                strengthsObserved: [{ action: 'Coaching', example: \"You asked good, open-ended questions about Casey's career goals.\" }],\n                coachingRecommendations: [{ id: 'rec-2', area: 'Delegation', recommendation: 'Consider delegating the next non-critical bug fix to a junior dev.', type: 'Book', resource: 'The One Minute Manager', justification: 'Frees you up for high-level tasks.', status: 'pending', auditTrail: [], checkIns: [], progress: 0 }],\n                actionItems: [{ id: 'ai-2', owner: 'Supervisor', task: 'Identify a low-risk task for Casey to lead.', status: 'pending' }],\n                missedSignals: [],\n                biasFairnessCheck: { flag: false },\n                localizationCompliance: { applied: false },\n                legalDataCompliance: { piiOmitted: false, privacyRequest: false },\n            }\n        },\n    ];\n};\n\nconst getMockPracticeScenarios = (): AssignedPracticeScenario[] => {\n    const now = new Date();\n    const leadName = roleUserMapping['Team Lead'].name;\n    const employeeName = roleUserMapping['Employee'].name;\n\n    return [\n        {\n            id: 'mock-score-1',\n            assignedBy: 'System',\n            assignedTo: 'Team Lead',\n            scenario: 'Practice starting a conversation with a report who you suspect is feeling burned out.',\n            persona: 'Employee',\n            status: 'completed',\n            assignedAt: new Date(new Date().setDate(now.getDate() - 10)).toISOString(),\n            dueDate: new Date(new Date().setDate(now.getDate() - 5)).toISOString(),\n            completedAt: new Date(new Date().setDate(now.getDate() - 4)).toISOString(),\n            analysis: {\n                scores: { clarity: 8.5, empathy: 7.0, assertiveness: 9.0, overall: 8.2 },\n                strengths: [\"You started the conversation clearly and directly.\", \"Good use of 'I' statements to own your perspective.\"],\n                gaps: [\"Could have acknowledged their point of view before restating the goal.\", \"The closing felt a bit abrupt.\"],\n                annotatedConversation: [\n                    { role: 'model', content: \"Hey, you wanted to chat?\" },\n                    { role: 'user', content: \"Yes, I wanted to discuss some feedback regarding your communication in team meetings.\", annotation: \"Great start. This is clear and sets the stage without being alarming.\", type: 'positive' },\n                    { role: 'model', content: \"Oh? I thought I was being clear. What's the issue?\" },\n                    { role: 'user', content: \"You need to be less dismissive of others' ideas.\", annotation: \"This could be perceived as an attack. Try framing it from your perspective, e.g., 'I\\'ve noticed that when others share ideas, the conversation sometimes moves on before we can fully explore them.'\", type: 'negative' }\n                ]\n            }\n        },\n        {\n            id: 'mock-score-2',\n            assignedBy: 'AM',\n            assignedTo: 'Team Lead',\n            scenario: 'Negotiating a deadline extension for the Q3 project with a senior manager.',\n            persona: 'Manager',\n            status: 'completed',\n            assignedAt: new Date(new Date().setDate(now.getDate() - 7)).toISOString(),\n            dueDate: new Date(new Date().setDate(now.getDate() - 2)).toISOString(),\n            completedAt: new Date(new Date().setDate(now.getDate() - 1)).toISOString(),\n            analysis: {\n                scores: { clarity: 7.0, empathy: 8.0, assertiveness: 6.5, overall: 7.2 },\n                strengths: [\"Excellent job explaining the 'why' behind the delay.\", \"You remained calm and professional throughout.\"],\n                gaps: [\"A specific proposed new deadline would have been more assertive.\", \"You agreed to the first counter-offer without exploring other options.\"],\n                annotatedConversation: [\n                    { role: 'model', content: \"We really can't move that deadline, it will impact the whole roadmap.\" },\n                    { role: 'user', content: \"I understand it's difficult, and I appreciate the pressure we're under.\", annotation: \"Good empathy. This validates their concern before you present your own.\", type: 'positive' }\n                ]\n            }\n        }\n    ];\n};\n\n\n// ==========================================\n// Generic Storage Helpers\n// ==========================================\n\nconst getFromStorage = <T>(key: string): T[] => {\n    if (typeof window === 'undefined') return [];\n    let json = sessionStorage.getItem(key);\n    \n    if (!json) {\n        // If storage is empty, inject mock data.\n        if (key === PRACTICE_SCENARIOS_KEY) {\n            const mockData = getMockPracticeScenarios() as T[];\n            saveToStorage(key, mockData);\n            return mockData;\n        }\n        if (key === ONE_ON_ONE_HISTORY_KEY) {\n            const mockData = getMockOneOnOneHistory() as T[];\n            saveToStorage(key, mockData);\n            return mockData;\n        }\n        return [];\n    }\n\n    try {\n        const data = JSON.parse(json) as any[];\n        // Basic data migration/validation\n        if (key === FEEDBACK_KEY && data.length > 0 && !data[0].status) {\n             console.log(\"Old feedback data detected, clearing for new structure.\");\n             sessionStorage.removeItem(key);\n             return [];\n        }\n        return data as T[];\n    } catch (e) {\n        console.error(`Error parsing ${key} from sessionStorage`, e);\n        return [];\n    }\n}\n\nconst saveToStorage = (key: string, data: any[]): void => {\n    if (typeof window === 'undefined') return;\n    sessionStorage.setItem(key, JSON.stringify(data));\n    window.dispatchEvent(new CustomEvent('feedbackUpdated'));\n    window.dispatchEvent(new Event('storage')); // for wider compatibility\n}\n\n// ==========================================\n// Practice Scenario Service\n// ==========================================\n\nexport async function assignPracticeScenario(assignedBy: Role | 'System', assignedTo: Role, scenario: string, persona: Role, dueDate: Date): Promise<void> {\n    const allScenarios = getFromStorage<AssignedPracticeScenario>(PRACTICE_SCENARIOS_KEY);\n    const newScenario: AssignedPracticeScenario = {\n        id: uuidv4(),\n        assignedBy,\n        assignedTo,\n        scenario,\n        persona,\n        status: 'pending',\n        assignedAt: new Date().toISOString(),\n        dueDate: dueDate.toISOString(),\n    };\n    allScenarios.unshift(newScenario);\n    saveToStorage(PRACTICE_SCENARIOS_KEY, allScenarios);\n\n    if (assignedBy !== 'System') {\n        const allFeedback = getFeedbackFromStorage();\n        const assignerName = roleUserMapping[assignedBy]?.name || assignedBy;\n        \n        const notification: Feedback = {\n            trackingId: `NETS-${newScenario.id}`,\n            subject: `New Practice Scenario Assigned`,\n            message: `${assignerName} has assigned you a new practice scenario in the Nets arena: \"${scenario}\"`,\n            submittedAt: new Date(),\n            criticality: 'Low',\n            status: 'Pending Acknowledgement',\n            assignedTo: [assignedTo],\n            viewed: false,\n            auditTrail: [{\n                event: 'Notification Created',\n                timestamp: new Date(),\n                actor: 'System',\n                details: `Automated notification for Nets practice scenario assignment.`\n            }]\n        };\n        allFeedback.unshift(notification);\n        saveFeedbackToStorage(allFeedback);\n    }\n}\n\nexport async function getPracticeScenariosForUser(userRole: Role): Promise<AssignedPracticeScenario[]> {\n    const allScenarios = getFromStorage<AssignedPracticeScenario>(PRACTICE_SCENARIOS_KEY);\n    return allScenarios.filter(s => s.assignedTo === userRole && s.status === 'pending');\n}\n\nexport function getCompletedPracticeScenariosForUser(userRole: Role): AssignedPracticeScenario[] {\n    const allScenarios = getFromStorage<AssignedPracticeScenario>(PRACTICE_SCENARIOS_KEY);\n    return allScenarios.filter(s => s.assignedTo === userRole && s.status === 'completed');\n}\n\nexport async function getPracticeScenariosAssignedByMe(assignerRole: Role): Promise<AssignedPracticeScenario[]> {\n    const allScenarios = getFromStorage<AssignedPracticeScenario>(PRACTICE_SCENARIOS_KEY);\n    return allScenarios.filter(s => s.assignedBy === assignerRole);\n}\n\n\nexport async function completePracticeScenario(input: NetsConversationInput, assignedScenarioId?: string): Promise<NetsAnalysisOutput> {\n    const response = await fetch('/api/ai/analyze-nets-conversation', {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(input),\n    });\n\n    if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error || 'Failed to analyze Nets conversation.');\n    }\n\n    const analysis: NetsAnalysisOutput = await response.json();\n    \n    const allScenarios = getFromStorage<AssignedPracticeScenario>(PRACTICE_SCENARIOS_KEY);\n    \n    if (assignedScenarioId) {\n        const scenarioIndex = allScenarios.findIndex(s => s.id === assignedScenarioId);\n        \n        if (scenarioIndex !== -1) {\n            allScenarios[scenarioIndex].status = 'completed';\n            allScenarios[scenarioIndex].completedAt = new Date().toISOString();\n            allScenarios[scenarioIndex].analysis = analysis;\n        }\n    } else {\n        const userRole = Object.values(roleUserMapping).find(u => u.name === 'Casey Day')?.role || 'Employee';\n        const newCompletedScenario: AssignedPracticeScenario = {\n            id: uuidv4(),\n            assignedBy: 'System', \n            assignedTo: userRole,\n            scenario: input.scenario,\n            persona: input.persona as Role,\n            status: 'completed',\n            assignedAt: new Date().toISOString(),\n            dueDate: new Date().toISOString(),\n            completedAt: new Date().toISOString(),\n            analysis: analysis,\n        };\n        allScenarios.unshift(newCompletedScenario);\n    }\n    \n    saveToStorage(PRACTICE_SCENARIOS_KEY, allScenarios);\n    return analysis;\n}\n\n\n// ==========================================\n// 1-on-1 History Service\n// ==========================================\n\nexport async function getOneOnOneHistory(): Promise<OneOnOneHistoryItem[]> {\n    const history = getFromStorage<OneOnOneHistoryItem>(ONE_ON_ONE_HISTORY_KEY);\n    return history.sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());\n}\n\nexport async function getDeclinedCoachingAreasForSupervisor(supervisorName: string): Promise<string[]> {\n    const history = await getOneOnOneHistory();\n    const declinedAreas = new Set<string>();\n\n    history.forEach(item => {\n        if (item.supervisorName === supervisorName) {\n            item.analysis.coachingRecommendations.forEach(rec => {\n                // A recommendation is officially declined only after the manager acknowledges it,\n                // or if the AM approved the decline and it's pending manager acknowledgement.\n                if (rec.status === 'declined' || rec.status === 'pending_manager_acknowledgement') {\n                    declinedAreas.add(rec.area);\n                }\n            });\n        }\n    });\n\n    return Array.from(declinedAreas);\n}\n\nexport async function getActiveCoachingPlansForUser(userNameOrRole: string | Role): Promise<{ historyId: string | null, rec: CoachingRecommendation }[]> {\n    const userName = roleUserMapping[userNameOrRole as Role]?.name || userNameOrRole;\n    const userRole = (Object.keys(roleUserMapping) as Role[]).find(r => roleUserMapping[r].name === userName) || userNameOrRole;\n    \n    const history = await getOneOnOneHistory();\n    const customPlans = getFromStorage<CoachingRecommendation>(CUSTOM_COACHING_PLANS_KEY);\n    const orgPlans = await getOrgCoachingItems();\n    const activePlans: { historyId: string | null, rec: CoachingRecommendation }[] = [];\n    \n    // Add plans from 1-on-1 history\n    history.forEach(item => {\n        const isUserInvolved = item.supervisorName === userName || item.employeeName === userName;\n        if (isUserInvolved) {\n            item.analysis.coachingRecommendations.forEach(rec => {\n                if (rec.status === 'accepted') {\n                     // The person who owns the plan is the supervisor from that 1-on-1\n                    if (item.supervisorName === userName) {\n                        activePlans.push({ historyId: item.id, rec });\n                    }\n                }\n            });\n        }\n    });\n\n    // Add custom self-directed plans\n    customPlans.forEach(rec => {\n        const planOwnerName = rec.auditTrail?.[0]?.actor;\n        if (planOwnerName === userName && rec.status === 'accepted') {\n             activePlans.push({ historyId: null, rec });\n        }\n    });\n\n    // Add plans from Org Health coaching\n    orgPlans.forEach(item => {\n        if (item.status === 'Assigned' || item.status === 'In Progress') {\n            const audience = item.targetAudience;\n            const isForAll = audience.startsWith('All ');\n            const targetRole = isForAll ? audience.replace('All ', '') : audience;\n            \n            if (audience === userName || (isForAll && userRole === targetRole)) {\n                // Transform OrgCoachingItem to CoachingRecommendation format\n                const transformedRec: CoachingRecommendation = {\n                    id: item.id,\n                    area: item.theme,\n                    recommendation: item.recommendation,\n                    type: 'Other',\n                    resource: 'Organizational Initiative',\n                    justification: 'This goal was assigned based on a recent org-wide health analysis.',\n                    status: 'accepted',\n                    progress: 0, // Assuming new items have 0 progress\n                    startDate: item.assignedAt,\n                    endDate: new Date(new Date(item.assignedAt).getTime() + 30 * 24 * 60 * 60 * 1000).toISOString(), // Default 30-day timeline\n                    auditTrail: [{\n                        event: \"Goal Assigned from Org Health\",\n                        actor: item.assignedBy,\n                        timestamp: item.assignedAt,\n                        details: `Theme: ${item.theme}`\n                    }]\n                };\n                activePlans.push({ historyId: null, rec: transformedRec });\n            }\n        }\n    });\n\n\n    return activePlans;\n}\n\n\nexport async function saveOneOnOneHistory(item: Omit<OneOnOneHistoryItem, 'id' | 'assignedTo'>): Promise<OneOnOneHistoryItem> {\n    const history = await getOneOnOneHistory();\n    const newHistoryItem: OneOnOneHistoryItem = { ...item, id: generateTrackingId(), assignedTo: [] };\n    history.unshift(newHistoryItem);\n    saveToStorage(ONE_ON_ONE_HISTORY_KEY, history);\n    return newHistoryItem;\n}\n\nexport async function updateOneOnOneHistoryItem(updatedItem: OneOnOneHistoryItem): Promise<void> {\n    let allHistory = await getOneOnOneHistory();\n    const index = allHistory.findIndex(h => h.id === updatedItem.id);\n    if (index !== -1) {\n        allHistory[index] = updatedItem;\n        saveToStorage(ONE_ON_ONE_HISTORY_KEY, allHistory);\n    }\n}\n\nexport async function toggleActionItemStatus(historyId: string, actionItemId: string): Promise<void> {\n    const allHistory = await getOneOnOneHistory();\n    const historyIndex = allHistory.findIndex(h => h.id === historyId);\n    if (historyIndex === -1) return;\n\n    const item = allHistory[historyIndex];\n    if (!item.analysis.actionItems) return;\n\n    const actionItemIndex = item.analysis.actionItems.findIndex(a => a.id === actionItemId);\n    if (actionItemIndex === -1) return;\n\n    const actionItem = item.analysis.actionItems[actionItemIndex];\n    if (actionItem.status === 'pending') {\n        actionItem.status = 'completed';\n        actionItem.completedAt = new Date().toISOString();\n    } else {\n        actionItem.status = 'pending';\n        actionItem.completedAt = undefined;\n    }\n\n    saveToStorage(ONE_ON_ONE_HISTORY_KEY, allHistory);\n}\n\nexport async function submitSupervisorInsightResponse(historyId: string, response: string): Promise<void> {\n    let allHistory = await getOneOnOneHistory();\n    const index = allHistory.findIndex(h => h.id === historyId);\n    if (index !== -1 && allHistory[index].analysis.criticalCoachingInsight) {\n        const item = allHistory[index];\n        item.analysis.criticalCoachingInsight!.supervisorResponse = response;\n        item.analysis.criticalCoachingInsight!.status = 'pending_employee_acknowledgement';\n\n        if (!item.analysis.criticalCoachingInsight!.auditTrail) {\n            item.analysis.criticalCoachingInsight!.auditTrail = [];\n        }\n        item.analysis.criticalCoachingInsight!.auditTrail.push({\n            event: 'Responded',\n            timestamp: new Date(),\n            actor: item.supervisorName,\n            details: response,\n        });\n        \n        saveToStorage(ONE_ON_ONE_HISTORY_KEY, allHistory);\n    } else {\n        throw new Error(\"Could not find history item or critical insight to update.\");\n    }\n}\n\nexport async function submitEmployeeAcknowledgement(historyId: string, acknowledgement: string, comments: string, previousStatus?: CriticalCoachingInsight['status']): Promise<void> {\n    let allHistory = await getOneOnOneHistory();\n    const index = allHistory.findIndex(h => h.id === historyId);\n    if (index === -1 || !allHistory[index].analysis.criticalCoachingInsight) {\n         throw new Error(\"Could not find history item or critical insight to update.\");\n    }\n    \n    const item = allHistory[index];\n    const insight = item.analysis.criticalCoachingInsight as CriticalCoachingInsight;\n\n    const fullAcknowledgement = `${acknowledgement}${comments ? ` \"${comments}\"` : ''}`;\n    insight.employeeAcknowledgement = fullAcknowledgement;\n    \n    if (!insight.auditTrail) {\n        insight.auditTrail = [];\n    }\n    insight.auditTrail.push({\n        event: 'Acknowledged',\n        timestamp: new Date(),\n        actor: item.employeeName as Role,\n        details: fullAcknowledgement,\n    });\n    \n    const wasAmResponse = insight.auditTrail?.some(e => e.event === 'AM Responded to Employee');\n    const wasRetry = insight.auditTrail?.some(e => e.event === 'Supervisor Retry Action');\n    const wasManagerAction = insight.auditTrail?.some(e => e.event === 'Manager Resolution');\n    const wasHrAction = insight.auditTrail?.some(e => e.event === 'HR Resolution');\n\n    const currentAssignees = new Set(item.assignedTo || []);\n\n    if (acknowledgement === \"The concern was fully addressed to my satisfaction.\") {\n        insight.status = 'resolved';\n        item.assignedTo = Array.from(currentAssignees); // Keep current assignees for history\n    } else if (wasHrAction) {\n        insight.status = 'pending_final_hr_action';\n        currentAssignees.add('HR Head');\n        item.assignedTo = Array.from(currentAssignees);\n    } else if (wasManagerAction) {\n        insight.status = 'pending_hr_review';\n        currentAssignees.add('HR Head');\n        item.assignedTo = Array.from(currentAssignees);\n    } else if (wasRetry || wasAmResponse) {\n        insight.status = 'pending_manager_review';\n        currentAssignees.add('Manager');\n        item.assignedTo = Array.from(currentAssignees);\n    } else {\n        insight.status = 'pending_am_review';\n        currentAssignees.add('AM');\n        item.assignedTo = Array.from(currentAssignees);\n    }\n\n    saveToStorage(ONE_ON_ONE_HISTORY_KEY, allHistory);\n}\n\nexport async function submitAmCoachingNotes(historyId: string, actor: Role, notes: string): Promise<void> {\n    let allHistory = await getOneOnOneHistory();\n    const index = allHistory.findIndex(h => h.id === historyId);\n    if (index === -1 || !allHistory[index].analysis.criticalCoachingInsight) {\n         throw new Error(\"Could not find history item or critical insight to update.\");\n    }\n    \n    const item = allHistory[index];\n    const insight = item.analysis.criticalCoachingInsight as CriticalCoachingInsight;\n\n    insight.status = 'pending_supervisor_retry';\n    \n    if (!insight.auditTrail) {\n        insight.auditTrail = [];\n    }\n    insight.auditTrail.push({\n        event: 'AM Coaching Notes',\n        timestamp: new Date(),\n        actor: actor,\n        details: notes,\n    });\n\n    saveToStorage(ONE_ON_ONE_HISTORY_KEY, allHistory);\n}\n\nexport async function submitAmDirectResponse(historyId: string, actor: Role, notes: string): Promise<void> {\n    let allHistory = await getOneOnOneHistory();\n    const index = allHistory.findIndex(h => h.id === historyId);\n    if (index === -1 || !allHistory[index].analysis.criticalCoachingInsight) {\n         throw new Error(\"Could not find history item or critical insight to update.\");\n    }\n\n    const item = allHistory[index];\n    const insight = item.analysis.criticalCoachingInsight as CriticalCoachingInsight;\n    \n    // Send back to employee for acknowledgement\n    insight.status = 'pending_employee_acknowledgement';\n\n    if (!insight.auditTrail) {\n        insight.auditTrail = [];\n    }\n    insight.auditTrail.push({\n        event: 'AM Responded to Employee',\n        timestamp: new Date(),\n        actor: actor,\n        details: notes,\n    });\n\n    saveToStorage(ONE_ON_ONE_HISTORY_KEY, allHistory);\n}\n\n\nexport async function escalateToManager(historyId: string, actor: Role, notes: string): Promise<void> {\n    let allHistory = await getOneOnOneHistory();\n    const index = allHistory.findIndex(h => h.id === historyId);\n    if (index === -1 || !allHistory[index].analysis.criticalCoachingInsight) {\n         throw new Error(\"Could not find history item or critical insight to update.\");\n    }\n    \n    const item = allHistory[index];\n    const insight = item.analysis.criticalCoachingInsight as CriticalCoachingInsight;\n\n    insight.status = 'pending_manager_review';\n    \n    const currentAssignees = new Set(item.assignedTo || []);\n    currentAssignees.add('Manager');\n    item.assignedTo = Array.from(currentAssignees);\n\n    if (!insight.auditTrail) {\n        insight.auditTrail = [];\n    }\n    insight.auditTrail.push({\n        event: 'Escalated by AM',\n        timestamp: new Date(),\n        actor: actor,\n        details: `Case escalated to Manager for direct intervention. Notes: ${notes}`,\n    });\n\n    saveToStorage(ONE_ON_ONE_HISTORY_KEY, allHistory);\n}\n\nexport async function submitSupervisorRetry(historyId: string, retryNotes: string): Promise<void> {\n    let allHistory = await getOneOnOneHistory();\n    const index = allHistory.findIndex(h => h.id === historyId);\n    if (index === -1 || !allHistory[index].analysis.criticalCoachingInsight) {\n         throw new Error(\"Could not find history item or critical insight to update.\");\n    }\n    \n    const item = allHistory[index];\n    const insight = item.analysis.criticalCoachingInsight as CriticalCoachingInsight;\n\n    // Reset for the next acknowledgement round\n    insight.status = 'pending_employee_acknowledgement';\n    \n    if (!insight.auditTrail) {\n        insight.auditTrail = [];\n    }\n    insight.auditTrail.push({\n        event: 'Supervisor Retry Action',\n        timestamp: new Date(),\n        actor: item.supervisorName as Role, // Assuming supervisorName is a valid Role\n        details: retryNotes,\n    });\n\n    saveToStorage(ONE_ON_ONE_HISTORY_KEY, allHistory);\n}\n\nexport async function submitManagerResolution(historyId: string, actor: Role, notes: string): Promise<void> {\n    let allHistory = await getOneOnOneHistory();\n    const index = allHistory.findIndex(h => h.id === historyId);\n    if (index === -1 || !allHistory[index].analysis.criticalCoachingInsight) {\n         throw new Error(\"Could not find history item or critical insight to update.\");\n    }\n    \n    const item = allHistory[index];\n    const insight = item.analysis.criticalCoachingInsight as CriticalCoachingInsight;\n\n    // Send back to employee for acknowledgement\n    insight.status = 'pending_employee_acknowledgement';\n    // Don't unassign, keep in manager's view\n    \n    if (!insight.auditTrail) {\n        insight.auditTrail = [];\n    }\n    insight.auditTrail.push({\n        event: 'Manager Resolution',\n        timestamp: new Date(),\n        actor: actor,\n        details: notes,\n    });\n\n    saveToStorage(ONE_ON_ONE_HISTORY_KEY, allHistory);\n}\n\nexport async function submitHrResolution(historyId: string, actor: Role, notes: string): Promise<void> {\n    let allHistory = await getOneOnOneHistory();\n    const index = allHistory.findIndex(h => h.id === historyId);\n    if (index === -1 || !allHistory[index].analysis.criticalCoachingInsight) {\n         throw new Error(\"Could not find history item or critical insight to update.\");\n    }\n    \n    const item = allHistory[index];\n    const insight = item.analysis.criticalCoachingInsight as CriticalCoachingInsight;\n\n    // Send back to employee for one last acknowledgement\n    insight.status = 'pending_employee_acknowledgement';\n    \n    if (!insight.auditTrail) {\n        insight.auditTrail = [];\n    }\n    insight.auditTrail.push({\n        event: 'HR Resolution',\n        timestamp: new Date(),\n        actor: actor,\n        details: notes,\n    });\n\n    saveToStorage(ONE_ON_ONE_HISTORY_KEY, allHistory);\n}\n\n\nexport async function submitFinalHrDecision(historyId: string, actor: Role, decision: string, notes: string): Promise<void> {\n    let allHistory = await getOneOnOneHistory();\n    const index = allHistory.findIndex(h => h.id === historyId);\n    if (index === -1 || !allHistory[index].analysis.criticalCoachingInsight) {\n        throw new Error(\"Could not find history item or critical insight to update.\");\n    }\n\n    const item = allHistory[index];\n    const insight = item.analysis.criticalCoachingInsight as CriticalCoachingInsight;\n    \n    // This is the end of the line. Mark as resolved.\n    insight.status = 'resolved';\n    \n    if (!insight.auditTrail) {\n        insight.auditTrail = [];\n    }\n    insight.auditTrail.push({\n        event: decision, // e.g., 'Assigned to Ombudsman'\n        timestamp: new Date(),\n        actor: actor,\n        details: notes,\n    });\n\n    saveToStorage(ONE_ON_ONE_HISTORY_KEY, allHistory);\n}\n\nexport async function updateCoachingRecommendationStatus(\n    recommendationId: string, \n    status: 'accepted' | 'declined', \n    data?: { historyId?: string; reason?: string; startDate?: string; endDate?: string; }\n): Promise<void> {\n    let allHistory = await getOneOnOneHistory();\n    const historyIndex = allHistory.findIndex(h => h.id === data?.historyId);\n    if (historyIndex === -1) throw new Error(\"History item not found.\");\n    \n    const item = allHistory[historyIndex];\n    const recIndex = item.analysis.coachingRecommendations.findIndex(rec => rec.id === recommendationId);\n    if (recIndex === -1) throw new Error(\"Coaching recommendation not found.\");\n    \n    const recommendation = item.analysis.coachingRecommendations[recIndex];\n    const supervisorName = item.supervisorName;\n\n    // Initialize audit trail if it doesn't exist\n    if (!recommendation.auditTrail) {\n        recommendation.auditTrail = [];\n    }\n\n    if (status === 'accepted') {\n        recommendation.status = 'accepted';\n        recommendation.startDate = data?.startDate;\n        recommendation.endDate = data?.endDate;\n        recommendation.progress = 0; // Initialize progress\n        recommendation.auditTrail.push({\n            event: 'Recommendation Accepted',\n            actor: supervisorName,\n            timestamp: new Date().toISOString(),\n            details: `Plan set from ${data?.startDate ? new Date(data.startDate).toLocaleDateString() : 'N/A'} to ${data?.endDate ? new Date(data.endDate).toLocaleDateString() : 'N/A'}.`\n        });\n\n        // Create notification for AM and Manager\n        const allFeedback = getFeedbackFromStorage();\n        const notification: Feedback = {\n            trackingId: generateTrackingId(),\n            subject: `Development Plan Started by ${supervisorName}`,\n            message: `${supervisorName} has accepted a coaching recommendation and started a new development plan for the area: \"${recommendation.area}\".\\n\\n**Recommendation:** ${recommendation.recommendation}\\n**Resource:** ${recommendation.type} - \"${recommendation.resource}\"\\n**Timeline:** ${data?.startDate ? new Date(data.startDate).toLocaleDateString() : 'N/A'} to ${data?.endDate ? new Date(data.endDate).toLocaleDateString() : 'NA'}.`,\n            submittedAt: new Date(),\n            criticality: 'Low',\n            status: 'Pending Acknowledgement',\n            assignedTo: ['AM', 'Manager'],\n            viewed: false,\n            auditTrail: [{\n                event: 'Notification Created',\n                timestamp: new Date(),\n                actor: 'System',\n                details: `Automated notification for accepted coaching plan by ${supervisorName}.`\n            }]\n        };\n        allFeedback.unshift(notification);\n        saveFeedbackToStorage(allFeedback);\n\n    } else if (status === 'declined') {\n        recommendation.status = 'pending_am_review';\n        recommendation.rejectionReason = data?.reason;\n        recommendation.auditTrail.push({\n            event: 'Recommendation Declined by Supervisor',\n            actor: supervisorName,\n            timestamp: new Date().toISOString(),\n            details: `Reason: ${data?.reason}`,\n        });\n    }\n    \n    saveToStorage(ONE_ON_ONE_HISTORY_KEY, allHistory);\n}\n\nexport async function addCustomCoachingPlan(actor: Role, data: { area: string; resource: string; startDate: Date; endDate: Date }): Promise<void> {\n    const supervisorName = roleUserMapping[actor]?.name;\n    if (!supervisorName) throw new Error(\"Invalid actor role provided.\");\n\n    const allCustomPlans = getFromStorage<CoachingRecommendation>(CUSTOM_COACHING_PLANS_KEY);\n\n    const newCustomRecommendation: CoachingRecommendation = {\n        id: uuidv4(),\n        area: data.area,\n        recommendation: `Custom goal added by user: ${data.resource}`,\n        example: \"N/A (user-added goal)\",\n        type: \"Other\", // Default type for custom plans\n        resource: data.resource,\n        justification: \"This is a self-directed development goal.\",\n        status: \"accepted\",\n        rejectionReason: undefined,\n        auditTrail: [{\n            event: \"Custom Goal Created\",\n            actor: supervisorName,\n            timestamp: new Date().toISOString(),\n            details: \"User added a new self-directed development goal.\"\n        }],\n        startDate: data.startDate.toISOString(),\n        endDate: data.endDate.toISOString(),\n        progress: 0,\n        checkIns: [],\n    };\n    \n    allCustomPlans.unshift(newCustomRecommendation);\n    saveToStorage(CUSTOM_COACHING_PLANS_KEY, allCustomPlans);\n}\n\n\nexport async function updateCoachingProgress(historyId: string | null, recommendationId: string, progress: number): Promise<void> {\n    if (historyId) {\n        // It's a recommendation from a 1-on-1\n        let allHistory = await getOneOnOneHistory();\n        const historyIndex = allHistory.findIndex(h => h.id === historyId);\n        if (historyIndex === -1) throw new Error(\"History item not found.\");\n        \n        const item = allHistory[historyIndex];\n        const recIndex = item.analysis.coachingRecommendations.findIndex(rec => rec.id === recommendationId);\n        if (recIndex === -1) throw new Error(\"Coaching recommendation not found.\");\n        \n        const recommendation = item.analysis.coachingRecommendations[recIndex];\n        recommendation.progress = progress;\n        \n        saveToStorage(ONE_ON_ONE_HISTORY_KEY, allHistory);\n    } else {\n        // It's a custom plan\n        let allCustomPlans = getFromStorage<CoachingRecommendation>(CUSTOM_COACHING_PLANS_KEY);\n        const recIndex = allCustomPlans.findIndex(rec => rec.id === recommendationId);\n        if (recIndex !== -1) {\n            allCustomPlans[recIndex].progress = progress;\n            saveToStorage(CUSTOM_COACHING_PLANS_KEY, allCustomPlans);\n        } else {\n            // It might be an org coaching plan\n            let orgPlans = getFromStorage<OrgCoachingItem>('org_coaching_items_v1'); // Use literal key\n            const orgPlanIndex = orgPlans.findIndex(p => p.id === recommendationId);\n            if (orgPlanIndex !== -1) {\n                // There's no progress field on OrgCoachingItem, so this is a conceptual no-op for now\n                // In a real app, you'd update its status.\n                console.log(`Updating progress for org plan ${recommendationId} - currently a no-op.`);\n            } else {\n                 throw new Error(\"Custom or Org coaching plan not found.\");\n            }\n        }\n    }\n}\n\nexport async function addCoachingCheckIn(historyId: string | null, recommendationId: string, notes: string): Promise<void> {\n     const newCheckIn: CheckIn = {\n        id: uuidv4(),\n        date: new Date().toISOString(),\n        notes: notes,\n    };\n\n    if (historyId) {\n        let allHistory = await getOneOnOneHistory();\n        const historyIndex = allHistory.findIndex(h => h.id === historyId);\n        if (historyIndex === -1) throw new Error(\"History item not found.\");\n\n        const item = allHistory[historyIndex];\n        const recIndex = item.analysis.coachingRecommendations.findIndex(rec => rec.id === recommendationId);\n        if (recIndex === -1) throw new Error(\"Coaching recommendation not found.\");\n\n        const recommendation = item.analysis.coachingRecommendations[recIndex];\n        if (!recommendation.checkIns) recommendation.checkIns = [];\n        recommendation.checkIns.push(newCheckIn);\n        saveToStorage(ONE_ON_ONE_HISTORY_KEY, allHistory);\n    } else {\n        let allCustomPlans = getFromStorage<CoachingRecommendation>(CUSTOM_COACHING_PLANS_KEY);\n        const recIndex = allCustomPlans.findIndex(rec => rec.id === recommendationId);\n        if (recIndex !== -1) {\n            const recommendation = allCustomPlans[recIndex];\n            if (!recommendation.checkIns) recommendation.checkIns = [];\n            recommendation.checkIns.push(newCheckIn);\n            saveToStorage(CUSTOM_COACHING_PLANS_KEY, allCustomPlans);\n        } else {\n            let orgPlans = getFromStorage<OrgCoachingItem>('org_coaching_items_v1');\n            const orgPlanIndex = orgPlans.findIndex(p => p.id === recommendationId);\n            if (orgPlanIndex !== -1) {\n                // Org plans don't have check-ins in this model, so this is a conceptual no-op.\n                // In a real app, we might log this differently.\n                 console.log(`Adding check-in for org plan ${recommendationId} - currently a no-op.`);\n            } else {\n                throw new Error(\"Custom or Org coaching plan not found.\");\n            }\n        }\n    }\n}\n\n\nexport async function reviewCoachingRecommendationDecline(\n    historyId: string,\n    recommendationId: string,\n    amActor: Role,\n    approved: boolean,\n    amNotes: string\n): Promise<void> {\n    let allHistory = await getOneOnOneHistory();\n    const historyIndex = allHistory.findIndex(h => h.id === historyId);\n    if (historyIndex === -1) throw new Error(\"History item not found.\");\n\n    const item = allHistory[historyIndex];\n    const recIndex = item.analysis.coachingRecommendations.findIndex(rec => rec.id === recommendationId);\n    if (recIndex === -1) throw new Error(\"Coaching recommendation not found.\");\n\n    const recommendation = item.analysis.coachingRecommendations[recIndex];\n    \n    if (!recommendation.auditTrail) {\n        recommendation.auditTrail = [];\n    }\n\n    if (approved) {\n        recommendation.status = 'pending_manager_acknowledgement'; // Escalate to manager for FYI\n        recommendation.auditTrail.push({\n            event: \"Decline Approved by AM\",\n            actor: amActor,\n            timestamp: new Date().toISOString(),\n            details: `AM approved decline. Notes: ${amNotes}`\n        });\n    } else {\n        recommendation.status = 'accepted';\n        recommendation.progress = 0;\n        const now = new Date();\n        const endDate = new Date(new Date().setDate(now.getDate() + 30)); // Default 30 day timeline\n        recommendation.startDate = now.toISOString();\n        recommendation.endDate = endDate.toISOString();\n\n        recommendation.auditTrail.push({\n            event: \"Decline Denied by AM\",\n            actor: amActor,\n            timestamp: new Date().toISOString(),\n            details: `AM upheld AI recommendation and created a mandatory development plan. Notes: ${amNotes}`\n        });\n    }\n\n    saveToStorage(ONE_ON_ONE_HISTORY_KEY, allHistory);\n}\n\nexport async function acknowledgeDeclinedRecommendation(\n    historyId: string,\n    recommendationId: string,\n    managerActor: Role\n): Promise<void> {\n    let allHistory = await getOneOnOneHistory();\n    const historyIndex = allHistory.findIndex(h => h.id === historyId);\n    if (historyIndex === -1) throw new Error(\"History item not found.\");\n\n    const item = allHistory[historyIndex];\n    const recIndex = item.analysis.coachingRecommendations.findIndex(rec => rec.id === recommendationId);\n    if (recIndex === -1) throw new Error(\"Coaching recommendation not found.\");\n\n    const recommendation = item.analysis.coachingRecommendations[recIndex];\n\n    recommendation.status = 'declined'; // Final status\n    if (!recommendation.auditTrail) {\n        recommendation.auditTrail = [];\n    }\n    recommendation.auditTrail.push({\n        event: \"Manager Acknowledged Declined Recommendation\",\n        actor: managerActor,\n        timestamp: new Date().toISOString(),\n        details: \"Manager acknowledged the AM's approval of the decline. This recommendation is now closed.\"\n    });\n\n    saveToStorage(ONE_ON_ONE_HISTORY_KEY, allHistory);\n}\n\n\n// ==========================================\n// Feedback Service\n// ==========================================\n\nexport const getFeedbackFromStorage = (): Feedback[] => {\n  const feedback = getFromStorage<Feedback>(FEEDBACK_KEY);\n  return feedback.map(c => ({\n    ...c,\n    submittedAt: new Date(c.submittedAt),\n    auditTrail: c.auditTrail?.map(a => ({...a, timestamp: new Date(a.timestamp)}))\n  }));\n};\n\nexport const saveFeedbackToStorage = (feedback: Feedback[]): void => {\n   saveToStorage(FEEDBACK_KEY, feedback);\n};\n\nexport async function getAllFeedback(): Promise<Feedback[]> {\n  return getFeedbackFromStorage();\n}\n\nexport async function getFeedbackById(trackingId: string): Promise<Feedback | null> {\n    const allFeedback = await getAllFeedback();\n    return allFeedback.find(f => f.trackingId === trackingId) || null;\n}\n\n\nexport async function saveFeedback(feedback: Feedback[], append = false): Promise<void> {\n    if (append) {\n        const existingFeedback = getFeedbackFromStorage();\n        saveFeedbackToStorage([...feedback, ...existingFeedback]);\n    } else {\n        saveFeedbackToStorage(feedback);\n    }\n}\n\n/**\n * Resolves a feedback item.\n */\nexport async function resolveFeedback(trackingId: string, actor: Role, resolution: string): Promise<void> {\n    const allFeedback = getFeedbackFromStorage();\n    const feedbackIndex = allFeedback.findIndex(f => f.trackingId === trackingId);\n\n    if (feedbackIndex === -1) return;\n\n    const feedback = allFeedback[feedbackIndex];\n\n    // For general notifications and leadership pulses, we'll mark them as 'Closed' to keep them in history.\n    if (feedback.status === 'Pending Acknowledgement' || feedback.status === 'Pending Manager Action') {\n        feedback.status = 'Closed';\n    } else {\n        feedback.status = 'Resolved';\n    }\n    \n    feedback.resolution = resolution;\n    // We keep assignedTo so we can filter by who acknowledged it in history views.\n    // feedback.assignedTo = []; \n    feedback.auditTrail?.push({\n        event: 'Acknowledged',\n        timestamp: new Date(),\n        actor,\n        details: resolution,\n        isPublic: true,\n    });\n\n    saveFeedbackToStorage(allFeedback);\n}\n\nexport async function submitEmployeeFeedbackAcknowledgement(trackingId: string, accepted: boolean, comments: string): Promise<void> {\n    const allFeedback = getFeedbackFromStorage();\n    const feedbackIndex = allFeedback.findIndex(f => f.trackingId === trackingId);\n    if (feedbackIndex === -1) return;\n\n    const item = allFeedback[feedbackIndex];\n    const actor = item.submittedBy || 'Anonymous';\n    \n    const relevantEvents = ['Resolution Submitted', 'HR Resolution Submitted', 'HR Responded to Retaliation Claim', 'Manager Resolution'];\n    const lastResponderEvent = item.auditTrail?.slice().reverse().find(e => relevantEvents.includes(e.event));\n    const lastResponder = lastResponderEvent?.actor as Role | undefined;\n\n    const currentAssignees = new Set(item.assignedTo || []);\n\n    if (accepted) {\n        item.status = 'Resolved';\n        item.resolution = item.supervisorUpdate;\n        item.auditTrail?.push({\n            event: 'Employee Accepted Resolution',\n            timestamp: new Date(),\n            actor: actor,\n            details: `Resolution accepted.${comments ? ` \"${comments}\"` : ''}`\n        });\n        item.auditTrail?.push({\n            event: 'Resolved',\n            timestamp: new Date(),\n            actor: actor,\n            details: 'Case resolved after employee acknowledgment.',\n        });\n    } else {\n        const escalationDetails = `Resolution not accepted.${comments ? ` \"${comments}\"` : ''}`;\n        \n        let nextAssignee: Role | undefined = undefined;\n        let nextStatus: FeedbackStatus = 'Pending Manager Action';\n        \n        const lastResponderRole = Object.values(roleUserMapping).find(u => u.name === lastResponder)?.role || lastResponder;\n        \n        if (item.criticality === 'Retaliation Claim' || lastResponderEvent?.event === 'HR Resolution Submitted' || lastResponderRole === 'HR Head') {\n             item.status = 'Final Disposition Required';\n             currentAssignees.add('HR Head');\n             item.auditTrail?.push({\n                event: 'Final Disposition Required',\n                timestamp: new Date(),\n                actor: 'System',\n                details: 'Employee rejected HR resolution. Final disposition is required from HR Head.'\n            });\n        } else if (lastResponderRole === 'Team Lead') {\n            nextAssignee = 'AM';\n            nextStatus = 'Pending Manager Action';\n        } else if (lastResponderRole === 'AM') {\n            nextAssignee = 'Manager';\n            nextStatus = 'Pending Manager Action';\n        } else if (lastResponderRole === 'Manager') {\n            nextAssignee = 'HR Head';\n            nextStatus = 'Pending HR Action';\n        }\n\n\n        if (nextAssignee) {\n             item.status = nextStatus;\n             currentAssignees.add(nextAssignee);\n             item.auditTrail?.push({\n                event: 'Employee Escalated Concern',\n                timestamp: new Date(),\n                actor: actor,\n                details: `Concern escalated to ${nextAssignee}. ${escalationDetails}`\n            });\n        }\n    }\n    \n    item.assignedTo = Array.from(currentAssignees);\n    saveFeedbackToStorage(allFeedback);\n}\n\n// ==========================================\n// Dashboard Widget Services\n// ==========================================\n\nexport async function getAggregatedActionItems(role: Role): Promise<ActionItemWithSource[]> {\n    const allItems: ActionItemWithSource[] = [];\n    const currentUserName = roleUserMapping[role]?.name;\n    if (!currentUserName) return [];\n\n    // 1. From 1-on-1s\n    const history = await getOneOnOneHistory();\n    history.forEach(h => {\n        if (h.analysis.actionItems) {\n            h.analysis.actionItems.forEach(ai => {\n                const ownerRole = getRoleByName(ai.owner);\n                if (ownerRole === role && ai.status === 'pending') {\n                    allItems.push({\n                        ...ai,\n                        sourceType: '1-on-1',\n                        source: `1-on-1 with ${h.supervisorName === currentUserName ? h.employeeName : h.supervisorName}`,\n                        dueDate: new Date(new Date(h.date).getTime() + 7 * 24 * 60 * 60 * 1000).toISOString(), // Mock due date: 1 week after 1-on-1\n                    });\n                }\n            });\n        }\n    });\n\n    // 2. From Coaching Plans\n    const coachingPlans = await getActiveCoachingPlansForUser(role);\n    coachingPlans.forEach(plan => {\n        allItems.push({\n            id: `coach-${plan.rec.id}`,\n            owner: role,\n            task: `Continue working on coaching goal: ${plan.rec.area}`,\n            status: 'pending',\n            sourceType: 'Coaching',\n            source: `Plan: ${plan.rec.resource}`,\n            dueDate: plan.rec.endDate,\n        });\n    });\n\n    // In a real app, you would also fetch from training programs etc.\n    // For now, this is a good start.\n\n    return allItems.sort((a,b) => new Date(a.dueDate || 0).getTime() - new Date(b.dueDate || 0).getTime());\n}\n\nexport async function getActionItemsForEmployee(employeeName: string): Promise<ActionItemWithSource[]> {\n    const allItems: ActionItemWithSource[] = [];\n    const employeeRole = getRoleByName(employeeName);\n\n    // From 1-on-1s\n    const history = await getOneOnOneHistory();\n    history.forEach(h => {\n        if (h.employeeName === employeeName && h.analysis.actionItems) {\n            h.analysis.actionItems.forEach(ai => {\n                // Show all items, not just pending\n                allItems.push({\n                    ...ai,\n                    sourceType: '1-on-1',\n                    source: `1-on-1 with ${h.supervisorName}`,\n                    dueDate: new Date(new Date(h.date).getTime() + 7 * 24 * 60 * 60 * 1000).toISOString(),\n                });\n            });\n        }\n    });\n\n    // From Coaching Plans (if the employee can have them)\n    if (employeeRole) {\n        const coachingPlans = await getActiveCoachingPlansForUser(employeeRole);\n        coachingPlans.forEach(plan => {\n            allItems.push({\n                id: `coach-${plan.rec.id}`,\n                owner: employeeRole,\n                task: `Work on coaching goal: ${plan.rec.area}`,\n                status: 'pending',\n                sourceType: 'Coaching',\n                source: `Plan: ${plan.rec.resource}`,\n                dueDate: plan.rec.endDate,\n            });\n        });\n    }\n    \n    return allItems.sort((a,b) => {\n        if (a.status === 'pending' && b.status !== 'pending') return -1;\n        if (a.status !== 'pending' && b.status === 'pending') return 1;\n        return new Date(b.dueDate || 0).getTime() - new Date(a.dueDate || 0).getTime()\n    });\n}\n\nexport async function getTeamPulse(): Promise<number> {\n    const history = await getOneOnOneHistory();\n    const recentRatings = history\n        .slice(0, 20) // Look at the last 20 1-on-1s for the pulse\n        .map(h => parseInt(h.analysis.employeeSwotAnalysis?.opportunities[0] || h.analysis.leadershipScore.toString(), 10)) // Using SWOT as a proxy for growthRating\n        .filter(r => !isNaN(r));\n\n    if (recentRatings.length === 0) return 3.5; // Default pulse if no data\n\n    const average = recentRatings.reduce((sum, current) => sum + current, 0) / recentRatings.length;\n    return average;\n}\n\nexport async function getTeamActionItemStatus(supervisorRole: Role): Promise<Record<string, { open: number, overdue: number }>> {\n    const history = await getOneOnOneHistory();\n    const supervisorName = roleUserMapping[supervisorRole]?.name;\n    const teamMembers: Record<string, { open: number, overdue: number }> = {};\n    const now = new Date();\n\n    history.forEach(item => {\n        // Find sessions where the current user was the supervisor\n        if (item.supervisorName === supervisorName) {\n            const employeeName = item.employeeName;\n            if (!teamMembers[employeeName]) {\n                teamMembers[employeeName] = { open: 0, overdue: 0 };\n            }\n\n            item.analysis.actionItems?.forEach(action => {\n                if (action.status === 'pending') {\n                    teamMembers[employeeName].open++;\n                    // Mock due date is 1 week after the 1-on-1\n                    const dueDate = new Date(new Date(item.date).getTime() + 7 * 24 * 60 * 60 * 1000);\n                    if (now > dueDate) {\n                        teamMembers[employeeName].overdue++;\n                    }\n                }\n            });\n        }\n    });\n\n    return teamMembers;\n}\n\nexport async function getTeamGrowthHighlights(supervisorRole: Role): Promise<{ employeeName: string, growth: number }[]> {\n    const history = await getOneOnOneHistory();\n    const supervisorName = roleUserMapping[supervisorRole]?.name;\n    const growthMap: Record<string, number[]> = {};\n\n    history\n        .filter(item => item.supervisorName === supervisorName)\n        .sort((a, b) => new Date(a.date).getTime() - new Date(b.date).getTime()) // Sort oldest to newest\n        .forEach(item => {\n            const employeeName = item.employeeName;\n            if (!growthMap[employeeName]) {\n                growthMap[employeeName] = [];\n            }\n            growthMap[employeeName].push(item.analysis.effectivenessScore);\n        });\n\n    const highlights = Object.entries(growthMap)\n        .map(([employeeName, scores]) => {\n            if (scores.length < 2) return { employeeName, growth: 0 };\n            const latestScore = scores[scores.length - 1];\n            const previousScore = scores[scores.length - 2];\n            return { employeeName, growth: latestScore - previousScore };\n        })\n        .filter(item => item.growth > 0)\n        .sort((a, b) => b.growth - a.growth)\n        .slice(0, 3); // Get top 3 growers\n\n    return highlights;\n}\n\nexport async function getTeamNetsScores(supervisorRole: Role): Promise<Record<string, { average: number, sessions: number }>> {\n    const allPractice = getFromStorage<AssignedPracticeScenario>(PRACTICE_SCENARIOS_KEY);\n    const supervisorName = roleUserMapping[supervisorRole]?.name;\n    const allHistory = await getOneOnOneHistory();\n    \n    // Simple hierarchy: Team Lead manages Employee\n    const teamMemberRoles: Role[] = [];\n    if (supervisorRole === 'Team Lead') {\n        teamMemberRoles.push('Employee');\n    }\n\n    const teamScores: Record<string, { totalScore: number, count: number }> = {};\n\n    allPractice.forEach(practice => {\n        if (teamMemberRoles.includes(practice.assignedTo) && practice.status === 'completed' && practice.analysis) {\n            const memberName = roleUserMapping[practice.assignedTo]?.name;\n            if (!teamScores[memberName]) {\n                teamScores[memberName] = { totalScore: 0, count: 0 };\n            }\n            teamScores[memberName].totalScore += practice.analysis.scores.overall;\n            teamScores[memberName].count++;\n        }\n    });\n\n    const result: Record<string, { average: number, sessions: number }> = {};\n    for (const memberName in teamScores) {\n        result[memberName] = {\n            average: teamScores[memberName].totalScore / teamScores[memberName].count,\n            sessions: teamScores[memberName].count,\n        };\n    }\n    return result;\n}\n\n// AM Dashboard Services\nexport interface InterventionLogEntry {\n    id: string;\n    date: string;\n    summary: string;\n    employeeName: string;\n    responseStatus: 'Timely' | 'Delayed' | 'Unresolved';\n}\n\nexport async function getAiInterventionLog(role: Role): Promise<InterventionLogEntry[]> {\n    const history = await getOneOnOneHistory();\n    const log: InterventionLogEntry[] = [];\n    const SLA_HOURS = 48;\n\n    history.forEach(item => {\n        if (item.analysis.criticalCoachingInsight) {\n            const insight = item.analysis.criticalCoachingInsight;\n            const creationEvent = insight.auditTrail?.find(e => e.event === 'Critical Insight Identified');\n            const responseEvent = insight.auditTrail?.find(e => e.event === 'Responded');\n\n            if (creationEvent) {\n                let responseStatus: InterventionLogEntry['responseStatus'] = 'Unresolved';\n                if (responseEvent) {\n                    const creationTime = new Date(creationEvent.timestamp).getTime();\n                    const responseTime = new Date(responseEvent.timestamp).getTime();\n                    const diffHours = (responseTime - creationTime) / (1000 * 60 * 60);\n                    responseStatus = diffHours <= SLA_HOURS ? 'Timely' : 'Delayed';\n                }\n\n                log.push({\n                    id: item.id,\n                    date: item.date,\n                    summary: insight.summary,\n                    employeeName: item.employeeName,\n                    responseStatus: responseStatus,\n                });\n            }\n        }\n    });\n    return log.slice(0, 5); // Return latest 5\n}\n\nexport interface DevelopmentMapNode {\n    name: string;\n    role: Role;\n    leadershipScore: number;\n    trajectory: 'positive' | 'negative' | 'stable';\n}\n\nexport async function getManagerDevelopmentMapData(amRole: Role): Promise<DevelopmentMapNode[]> {\n    const history = await getOneOnOneHistory();\n    const teamLeadRole: Role = 'Team Lead'; // AM manages Team Leads\n    const teamLeadName = roleUserMapping[teamLeadRole].name;\n\n    const leadScores = history\n        .filter(item => item.supervisorName === teamLeadName)\n        .map(item => ({ date: new Date(item.date), score: item.analysis.leadershipScore }))\n        .sort((a, b) => a.date.getTime() - b.date.getTime());\n\n    if (leadScores.length < 2) {\n        return [{\n            name: teamLeadName,\n            role: teamLeadRole,\n            leadershipScore: leadScores[0]?.score || 5,\n            trajectory: 'stable'\n        }];\n    }\n\n    const latestScore = leadScores[leadScores.length - 1].score;\n    const previousScore = leadScores[leadScores.length - 2].score;\n    let trajectory: DevelopmentMapNode['trajectory'] = 'stable';\n    if (latestScore > previousScore) trajectory = 'positive';\n    if (latestScore < previousScore) trajectory = 'negative';\n\n    return [{\n        name: teamLeadName,\n        role: teamLeadRole,\n        leadershipScore: latestScore,\n        trajectory: trajectory\n    }];\n}\n\nexport interface TeamCoachingQuality {\n    teamLeadName: string;\n    qualityScore: number;\n    totalSessions: number;\n}\n\nexport async function getTeamCoachingQualityIndex(amRole: Role): Promise<TeamCoachingQuality[]> {\n    const history = await getOneOnOneHistory();\n    const qualityMap: Record<string, { totalScore: number, count: number }> = {};\n\n    history.forEach(item => {\n        // For AM, we're looking at their direct reports, the Team Leads\n        const supervisorName = item.supervisorName;\n        if (!qualityMap[supervisorName]) {\n            qualityMap[supervisorName] = { totalScore: 0, count: 0 };\n        }\n        qualityMap[supervisorName].totalScore += item.analysis.effectivenessScore;\n        qualityMap[supervisorName].count++;\n    });\n\n    return Object.entries(qualityMap).map(([teamLeadName, data]) => ({\n        teamLeadName,\n        qualityScore: (data.totalScore / data.count) * 10, // Scale to 100\n        totalSessions: data.count,\n    })).filter(item => item.teamLeadName === roleUserMapping['Team Lead'].name); // Only show Team Lead for this demo\n}\n\nexport interface ReadinessPipelineData {\n    employeeToLead: number;\n    leadToAm: number;\n}\n\nexport async function getReadinessPipelineData(amRole: Role): Promise<ReadinessPipelineData> {\n    // This is heavily mocked as it requires complex logic\n    return {\n        employeeToLead: 65, // % of employees showing potential for TL role\n        leadToAm: 40,       // % of TLs showing potential for AM role\n    };\n}\n\nexport interface EscalationInsight {\n    theme: string;\n    recommendation: string;\n    count: number;\n}\n\nexport async function getEscalationInsights(amRole: Role): Promise<EscalationInsight[]> {\n    // This is mocked based on common HR themes\n    return [\n        {\n            theme: 'Lack of Clarity in Feedback',\n            recommendation: 'Reinforce STAR method training for giving specific, behavioral feedback.',\n            count: 3\n        },\n        {\n            theme: 'Unaddressed Career Growth Signals',\n            recommendation: 'Coach leads to proactively ask about career aspirations in every 1-on-1.',\n            count: 2\n        }\n    ];\n}\n\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1538, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/frontend/src/services/interviewer-lab-service.ts"],"sourcesContent":["\n/**\n * @fileOverview A service for managing Interviewer Lab nominations and progress.\n */\n'use client';\n\nimport { v4 as uuidv4 } from 'uuid';\nimport type { Role } from '@common/types/role';\nimport { roleUserMapping } from '@/lib/role-mapping';\nimport type { InterviewerAnalysisOutput, NetsInitialInput } from '@/types/ai';\nimport { getFeedbackFromStorage, saveFeedbackToStorage, type Feedback } from './feedback-service';\n\n// ==========================================\n// NEW: Multi-step Lesson Structure\n// ==========================================\n\nexport interface ScriptStep {\n    type: 'script';\n    title?: string;\n    content: string;\n}\n\nexport interface QuizStep {\n    type: 'quiz_mcq';\n    question: string;\n    options: string[];\n    correctAnswer: string;\n    feedback: {\n        correct: string;\n        incorrect: string;\n    };\n}\n\nexport interface JournalStep {\n    type: 'journal';\n    prompt: string;\n}\n\nexport type LessonStep = ScriptStep | QuizStep | JournalStep;\n\nexport interface TrainingLesson {\n    id: string;\n    title: string;\n    type: 'standard' | 'practice'; // Simplified type\n    isCompleted: boolean;\n    steps?: LessonStep[]; // A lesson can have multiple steps\n    practiceScenario?: NetsInitialInput; // For practice-type lessons\n    result?: any;\n}\n\n\n// --- Old activity types, kept for compatibility if needed, but new lessons use steps ---\nexport interface QuizActivity {\n    type: 'quiz_mcq';\n    question: string;\n    options: string[];\n    correctAnswer: string;\n}\nexport interface MatchActivity { type: 'match_game'; prompt: string; items: { text: string, category: string }[]; categories: string[]; }\nexport interface FillBlankActivity { type: 'fill_blank'; prompt: string; }\nexport interface ChecklistActivity { type: 'checklist'; prompt: string; options: string[]; }\nexport interface BranchingActivity { type: 'branching_scenario'; prompt: string; options: { text: string, isCorrect: boolean }[]; }\nexport interface JournalActivity { type: 'journal'; prompt: string; }\nexport interface SwipeActivity { type: 'swipe_quiz'; prompt: string; cards: { text: string, correctAnswer: 'Legal' | 'Illegal' }[]; }\nexport type LessonActivity = QuizActivity | MatchActivity | FillBlankActivity | ChecklistActivity | BranchingActivity | JournalActivity | SwipeActivity;\n\n\nexport interface TrainingModule {\n    id:string;\n    title: string;\n    description: string;\n    duration: number; // in minutes\n    isCompleted: boolean;\n    lessons: TrainingLesson[];\n}\n\n// Mirroring the planned Firebase structure\nexport interface Nomination {\n    id: string;\n    nominatedBy: Role;\n    nominee: Role;\n    targetInterviewRole: string;\n    status: 'Pre-assessment pending' | 'In Progress' | 'Post-assessment pending' | 'Retry Needed' | 'Certified';\n    scorePre?: number;\n    scorePost?: number;\n    analysisPre?: InterviewerAnalysisOutput;\n    analysisPost?: InterviewerAnalysisOutput;\n    modules: TrainingModule[];\n    modulesTotal: number;\n    modulesCompleted: number;\n    certified: boolean;\n    lastUpdated: string;\n    nominatedAt: string;\n}\n\nconst INTERVIEWER_LAB_KEY = 'interviewer_lab_nominations_v4'; // Incremented version\n\n// ==========================================\n// Generic Storage Helpers\n// ==========================================\n\nconst getFromStorage = <T>(key: string): T[] => {\n    if (typeof window === 'undefined') return [];\n    const json = sessionStorage.getItem(key);\n    return json ? JSON.parse(json) : [];\n};\n\nconst saveToStorage = (key: string, data: any[]): void => {\n    if (typeof window === 'undefined') return;\n    sessionStorage.setItem(key, JSON.stringify(data));\n    window.dispatchEvent(new CustomEvent('feedbackUpdated')); // Use existing event for simplicity\n    window.dispatchEvent(new Event('storage'));\n};\n\n\nconst getInitialModules = (): TrainingModule[] => [\n    {\n        id: 'm1',\n        title: \"Interview Foundations\",\n        description: \"Learn the fundamentals of conducting a structured and professional interview.\",\n        duration: 30,\n        isCompleted: false,\n        lessons: [\n            {\n                id: 'l1-1', title: 'Why Structured Interviews Matter', type: 'standard', isCompleted: false,\n                steps: [\n                    { type: 'script', title: ' Coach Intro', content: \"Most managers think theyre great at interviewing.\\n\\nBut research says otherwise: unstructured interviews are only about 20% predictive of job success. Thats barely better than flipping a coin.\\n\\nThe problem? Unstructured interviews:\\n- Drift into small talk and gut feelings.\\n- Let unconscious bias creep in.\\n- Miss important, consistent evaluation points.\\n\\nSo how do world-class companies solve this? With structured interviews. Think of them as your playbook for fair, consistent, high-quality hiring.\" },\n                    { type: 'script', title: ' Teaching Moment', content: \"Structured interviews double predictive accuracy  about 40% predictive. That might not sound like much, but in hiring, its massive.\\n\\nHeres an analogy:\\n\\nImagine youre scouting athletes. If you let each coach ask random questions, one might ask about diet, another about favorite music. Results are all over the place.\\n\\nBut if everyone runs the same timed sprint test, you can compare apples to apples.\\n\\nThats the essence of structure: same test, fairer results, better hires.\" },\n                    { type: 'script', title: ' Mini-Case', content: \"Let me share a quick story.\\n\\nA retail company once let managers run their own unstructured interviews. The result? High turnover, inconsistent hiring, and even a lawsuit around discriminatory questioning.\\n\\nWhen they switched to structured interviews  same questions, standardized scoring  turnover dropped by 25% and legal risk disappeared.\\n\\nLesson: Structure isnt bureaucracy. Its protection + performance.\" },\n                    { type: 'quiz_mcq', question: \"Which of these is a proven benefit of structured interviews?\", options: [\"They allow managers to improvise fully.\", \"They ensure fairness and reduce legal risk.\", \"They focus on casual conversation.\", \"They guarantee every candidate accepts an offer.\"], correctAnswer: \"They ensure fairness and reduce legal risk.\", feedback: { correct: \"Exactly! Fairness and compliance are the backbone of structured interviews.\", incorrect: \"Not quite. Improvisation and small talk can feel nice, but they dont predict performance or protect you legally. The right answer is B.\" } },\n                    { type: 'journal', prompt: \"Now, lets apply this.\\n\\nThink of a time you were in an interview  either giving it or sitting as a candidate.\\n\\nWas it structured or unstructured?\\n\\nHow did it feel  fair, consistent, or random?\\n\\nWhat did you learn about the effectiveness of that style?\\n\\nWrite 23 sentences in your notes. This reflection primes your brain to connect the concept to real experience.\" },\n                    { type: 'script', title: ' Coach Wrap-Up', content: \"Heres what I want you to remember:\\n\\nUnstructured = random, risky, biased.\\n\\nStructured = fair, consistent, predictive.\\n\\nCompanies that use structured interviews not only hire better, they protect themselves legally and build trust with candidates.\\n\\nYour role as an interviewer is not just to chat. Its to create a reliable system that helps your team win. Structure is that system.\" },\n                    { type: 'journal', prompt: \"Want to go deeper? Try this optional stretch activity:\\n\\nWrite down 3 interview questions youve asked (or been asked).\\n\\nAsk yourself: Could these be standardized and asked to every candidate?\\n\\nHow would that change fairness and consistency?\\n\\nBring these to our next lesson  well build on them.\" }\n                ]\n            },\n            {\n                id: 'l1-2', title: 'Core Principles of Structured Interviewing', type: 'standard', isCompleted: false,\n                steps: [\n                    { type: 'script', title: ' Coach Intro', content: \"Structured interviews arent just about asking the same questions. Theyre built on 3 principles:\\n\\nConsistency  ask the same core questions.\\n\\nRelevance  questions tied to the job role.\\n\\nScoring  rate answers against clear criteria.\" },\n                    { type: 'script', title: ' Teaching Moment / Analogy', content: \"Think of it like refereeing a game.\\n\\nEvery player follows the same rules.\\nScores are based on agreed standards.\\n\\nThats how you keep the game  and the hiring process  fair.\" },\n                    { type: 'script', title: ' Mini-Case', content: \"A financial services firm introduced structured scoring rubrics. Managers reported more confidence in hiring decisions because they had objective data to back them up.\" },\n                    { type: 'quiz_mcq', question: \"Which principle ensures fairness across candidates?\", options: [\"Consistency\", \"Small talk\", \"Improvisation\", \"Intuition\"], correctAnswer: \"Consistency\", feedback: { correct: \"Yes! Consistency = fairness.\", incorrect: \"The answer is A. Consistency is the foundation of fairness.\" } },\n                    { type: 'journal', prompt: \"Which of these principles do you personally find hardest: consistency, relevance, or scoring? Why?\" },\n                    { type: 'script', title: ' Coach Wrap-Up', content: \"Consistency makes it fair. Relevance makes it useful. Scoring makes it actionable.\" },\n                    { type: 'journal', prompt: \" Stretch Activity\\n\\nPick one job in your team. Write 2 consistent, relevant questions you could ask every candidate for that role.\" }\n                ]\n            },\n            {\n                id: 'l1-3', title: 'Designing Structured Interview Questions', type: 'standard', isCompleted: false,\n                steps: [\n                    { type: 'script', title: ' Coach Intro', content: \"Not all questions are created equal. Structured interviews rely on behavioral (Tell me about a time) and situational (What would you do if) questions. These dig into real skills, not just surface-level talk.\" },\n                    { type: 'script', title: ' Teaching Moment / Analogy', content: \"Think of it like testing a driver. Asking Are you good at driving? is useless. Making them take a road test shows you the truth.\\n\\nGood questions = road test for skills.\" },\n                    { type: 'script', title: ' Mini-Case', content: \"A tech company replaced vague questions (Whats your greatest strength?) with behavioral ones (Tell me about a time you solved a tough bug). Result: much stronger signal about candidate skills.\" },\n                    { type: 'quiz_mcq', question: \"Which of these is a behavioral interview question?\", options: [\"Whats your favorite movie?\", \"Tell me about a time you led a difficult project.\", \"Do you consider yourself detail-oriented?\", \"How would you feel about working weekends?\"], correctAnswer: \"Tell me about a time you led a difficult project.\", feedback: { correct: \"Correct  behavioral questions use past experiences as evidence.\", incorrect: \"The answer is B. Behavioral questions start with Tell me about a time\" } },\n                    { type: 'journal', prompt: \"Think of a role you hire for. Whats one strong behavioral question you could use?\" },\n                    { type: 'script', title: ' Coach Wrap-Up', content: \"Structured interviews use job-relevant, evidence-based questions. Behavior predicts future behavior.\" },\n                    { type: 'journal', prompt: \" Stretch Activity\\n\\nWrite one behavioral and one situational question for your next role. Save them for your question bank.\" }\n                ]\n            },\n            {\n                id: 'l1-4', title: 'Scoring and Evaluation Rubrics', type: 'standard', isCompleted: false,\n                steps: [\n                    { type: 'script', title: ' Coach Intro', content: \"Even the best questions fail without clear scoring. Structured interviews use rubrics: 15 scales with defined behaviors at each level.\" },\n                    { type: 'script', title: ' Teaching Moment / Analogy', content: \"Imagine grading an essay without a rubric. One teacher gives it an A, another a C. Thats chaos. A rubric makes evaluation fair and repeatable.\" },\n                    { type: 'script', title: ' Mini-Case', content: \"A healthcare company trained managers to use 15 rubrics. Result: interviewer agreement went up 40%. That means less debate, faster decisions.\" },\n                    { type: 'quiz_mcq', question: \"Why are rubrics important?\", options: [\"They allow gut-based scoring\", \"They reduce subjectivity\", \"They replace job descriptions\", \"They guarantee a perfect hire\"], correctAnswer: \"They reduce subjectivity\", feedback: { correct: \"Exactly  rubrics reduce subjectivity.\", incorrect: \"The answer is B. Rubrics keep scoring consistent and fair.\" } },\n                    { type: 'journal', prompt: \"Think about the last time you scored a candidate. Did you have a clear rubric, or did you rely on gut feel?\" },\n                    { type: 'script', title: ' Coach Wrap-Up', content: \"Rubrics = fairness + reliability. They turn vague answers into measurable data.\" },\n                    { type: 'journal', prompt: \" Stretch Activity\\n\\nDesign a 15 scoring rubric for one interview question. Write what 1 looks like, what 5 looks like, and fill in the middle.\" }\n                ]\n            },\n            {\n                id: 'l1-5', title: 'Reducing Bias in Hiring', type: 'standard', isCompleted: false,\n                steps: [\n                    { type: 'script', title: ' Coach Intro', content: \"Bias creeps in when interviews are unstructured. Structured interviews help  but only if you stay disciplined. Bias isnt always obvious; its often unconscious.\" },\n                    { type: 'script', title: ' Teaching Moment / Analogy', content: \"Think of it like a GPS. Without structure, you drift off course without noticing. Structure = a route that keeps you honest.\" },\n                    { type: 'script', title: ' Mini-Case', content: \"A consulting firm trained managers to stick to structured questions and scoring. Over 18 months, their gender balance in new hires improved by 20%  not by lowering the bar, but by reducing bias.\" },\n                    { type: 'quiz_mcq', question: \"Which practice reduces bias in interviews?\", options: [\"Asking every candidate different questions\", \"Sticking to structured questions and rubrics\", \"Relying on first impressions\", \"Letting gut feel decide\"], correctAnswer: \"Sticking to structured questions and rubrics\", feedback: { correct: \"Yes  consistency and rubrics reduce bias.\", incorrect: \"The correct answer is B. Structure keeps bias out.\" } },\n                    { type: 'journal', prompt: \"Think of a time when bias  yours or someone elses  may have influenced a hiring decision. How could structure have reduced it?\" },\n                    { type: 'script', title: ' Coach Wrap-Up', content: \"Bias is sneaky. Structure protects against it by forcing consistency and fairness. Thats how you build diverse, high-performing teams.\" },\n                    { type: 'journal', prompt: \" Stretch Activity\\n\\nReview your last interview notes. Did you evaluate everyone against the same criteria, or were impressions creeping in? Rewrite your notes with a structured rubric lens.\" }\n                ]\n            }\n        ]\n    },\n    {\n        id: 'm2',\n        title: \"Behavioral Interviewing Mastery\",\n        description: \"Master the STAR method to effectively probe for behavioral examples.\",\n        duration: 40,\n        isCompleted: false,\n        lessons: [\n            {\n                id: 'l2-1', title: 'Introduction to Behavioral Interviewing', type: 'standard', isCompleted: false,\n                steps: [\n                    { type: 'script', title: ' Coach Intro', content: 'Behavioral interviews are built on one principle: Past behavior predicts future performance. Asking candidates how they handled situations in the past is far more reliable than asking what they might do.\\n\\nIn this module, well learn to ask, evaluate, and score behavioral questions consistently.' },\n                    { type: 'script', title: ' Teaching Moment / Analogy', content: 'Think of it like a flight simulator. You want to see how someone actually responds in realistic scenarios  not just what they say they would do.' },\n                    { type: 'script', title: ' Mini-Case', content: 'A software firm switched from hypotheticals (What would you do?) to behavioral questions (Tell me about a time you resolved a customer complaint). They found predictive validity improved  employees who performed well in the interview excelled on the job.' },\n                    { type: 'quiz_mcq', question: 'Why are behavioral interviews effective?', options: ['They are more fun than structured interviews', 'Past behavior predicts future performance', 'They allow improvisation', 'They focus mainly on small talk'], correctAnswer: 'Past behavior predicts future performance', feedback: { correct: 'Correct! Evidence-based questions = better prediction.', incorrect: 'The answer is B. Behavioral questions are based on real past behavior.' } },\n                    { type: 'journal', prompt: 'Think of a recent interview you conducted. Did you ask any behavioral questions? What was the outcome?' },\n                    { type: 'script', title: ' Coach Wrap-Up', content: 'Behavioral interviewing isnt optional. Its the backbone of predicting on-the-job success.' },\n                    { type: 'journal', prompt: ' Stretch Activity\\n\\nList 2 behavioral questions for a role you hire often. Keep them job-relevant and open-ended.' }\n                ]\n            },\n            {\n                id: 'l2-2', title: 'STAR Method for Structured Answers', type: 'standard', isCompleted: false,\n                steps: [\n                    { type: 'script', title: ' Coach Intro', content: 'The STAR method breaks down answers into:\\n\\nSituation  context\\nTask  responsibilities or challenge\\nAction  what they did\\nResult  the outcome\\n\\nUsing STAR ensures candidates give complete, measurable answers.' },\n                    { type: 'script', title: ' Teaching Moment / Analogy', content: 'Think of STAR like a recipe: you need all four ingredients to bake the perfect cake. Missing one? You wont get a full picture.' },\n                    { type: 'script', title: ' Mini-Case', content: 'A retail manager used STAR to evaluate candidates. Before STAR, answers were vague and hard to compare. After STAR, evaluation became consistent, and candidate comparisons were objective.' },\n                    { type: 'quiz_mcq', question: 'Which part of STAR explains what the candidate did?', options: ['Situation', 'Task', 'Action', 'Result'], correctAnswer: 'Action', feedback: { correct: 'Yes! Action = what the candidate actually did.', incorrect: 'The correct answer is C. Action is the steps they took to address the task.' } },\n                    { type: 'journal', prompt: 'Pick one past candidates answer. Could it be rewritten in STAR format? Try rewriting it briefly.' },\n                    { type: 'script', title: ' Coach Wrap-Up', content: 'STAR = structured, complete, and comparable answers. Always look for all four parts.' },\n                    { type: 'journal', prompt: ' Stretch Activity\\n\\nWrite one behavioral question. Create a sample STAR answer for scoring practice.' }\n                ]\n            },\n            {\n                id: 'l2-3', title: 'Probing Techniques', type: 'standard', isCompleted: false,\n                steps: [\n                    { type: 'script', title: ' Coach Intro', content: 'Candidates often give short or incomplete answers. Thats where probing comes in. Probing ensures you get the full story without leading or biasing them.' },\n                    { type: 'script', title: ' Teaching Moment / Analogy', content: 'Think of probing like peeling an onion. Each layer you uncover reveals deeper insights. But be gentle  you dont want to confuse or pressure the candidate.' },\n                    { type: 'script', title: ' Mini-Case', content: 'A tech interviewer asked: Tell me about a time you led a project. Candidate gave a brief overview. The interviewer probed: What specifically did you do to motivate your team? This revealed leadership behaviors not in the resume.' },\n                    { type: 'quiz_mcq', question: 'Which is an example of an effective probe?', options: ['So you did everything yourself, right?', 'Can you explain exactly what steps you took?', 'Was it hard?', 'Do you think that was good?'], correctAnswer: 'Can you explain exactly what steps you took?', feedback: { correct: 'Correct  probes should uncover specifics without leading.', incorrect: 'The correct answer is B. Ask for concrete details, not yes/no answers.' } },\n                    { type: 'journal', prompt: 'Think of a time you asked a question and got a short answer. How could you have probed to get a full STAR response?' },\n                    { type: 'script', title: ' Coach Wrap-Up', content: 'Probing = complete answers. Practice asking What exactly did you do? or How did you handle that challenge?' },\n                    { type: 'journal', prompt: ' Stretch Activity\\n\\nWrite 2 probing questions for each behavioral question in your candidate bank.' }\n                ]\n            },\n            {\n                id: 'l2-4', title: 'Evaluating STAR Responses', type: 'standard', isCompleted: false,\n                steps: [\n                    { type: 'script', title: ' Coach Intro', content: 'Once you have a STAR answer, you need to score it objectively. Focus on:\\n\\nRelevance: Does it match the job requirements?\\nDepth: Does it show real skill and ownership?\\nOutcome: Did it produce measurable results?' },\n                    { type: 'script', title: ' Teaching Moment / Analogy', content: 'Think of scoring like judging a competition. Judges follow clear criteria to make fair, comparable evaluations.' },\n                    { type: 'script', title: ' Mini-Case', content: 'A finance firm created a rubric for STAR responses. Each answer was rated 15 for relevance, action, and result. Consistency improved and managers trusted the data.' },\n                    { type: 'quiz_mcq', question: 'Which element is not a scoring criterion for STAR answers?', options: ['Relevance', 'Depth', 'Outcome', 'Candidates personality color preference'], correctAnswer: 'Candidates personality color preference', feedback: { correct: 'Correct! Personal traits unrelated to job performance should not affect scoring.', incorrect: 'The answer is D. Focus on relevant skills, actions, and results.' } },\n                    { type: 'journal', prompt: 'Review your last STAR evaluation. Did you use all three scoring dimensions? Note one way to improve your scoring next time.' },\n                    { type: 'script', title: ' Coach Wrap-Up', content: 'Scoring STAR responses objectively ensures fair, data-driven decisions.' },\n                    { type: 'journal', prompt: ' Stretch Activity\\n\\nTake a sample STAR answer. Score it 15 for relevance, depth, and outcome. Compare your scores with a peer or team rubric.' }\n                ]\n            },\n            {\n                id: 'l2-5', title: 'Practice, Feedback, and Continuous Improvement', type: 'practice', isCompleted: false,\n                steps: [],\n                practiceScenario: { persona: 'Candidate', scenario: \"This is a practice session for behavioral interviewing. Ask the AI candidate, 'Tell me about a time you had to handle a difficult stakeholder.' Your goal is to get a complete STAR answer, probing effectively for details.\", difficulty: 'neutral' }\n            }\n        ]\n    },\n    {\n        id: 'm3',\n        title: \"Bias Awareness & Mitigation\",\n        description: \"Learn to identify and reduce unconscious bias in the hiring process.\",\n        duration: 30,\n        isCompleted: false,\n        lessons: [\n            {\n                id: 'l3-1', title: 'Introduction to Behavioral Interviewing', type: 'standard', isCompleted: false,\n                steps: [\n                    { type: 'script', title: ' Coach Intro', content: 'Bias is a natural human tendency. In interviews, unconscious bias can distort your judgment, favor some candidates, or disadvantage others. Recognizing bias is the first step to reducing it.' },\n                    { type: 'script', title: ' Teaching Moment / Analogy', content: 'Think of bias like colored glasses. If you dont notice the tint, everything you see is slightly skewed. Removing or adjusting those glasses gives a clearer, fairer view.' },\n                    { type: 'script', title: ' Mini-Case', content: 'A tech company found interviewers favored candidates from their own alma mater. After bias awareness training, interviewers consciously evaluated candidates based on competencies, not backgrounds.' },\n                    { type: 'quiz_mcq', question: 'What is unconscious bias?', options: ['Intentional discrimination', 'Automatic, unintentional mental shortcuts', 'Strict adherence to rules', 'Following the STAR method'], correctAnswer: 'Automatic, unintentional mental shortcuts', feedback: { correct: 'Correct! Unconscious biases happen without awareness but still influence decisions.', incorrect: 'The answer is B. Bias is often invisible and automatic, not intentional.' } },\n                    { type: 'journal', prompt: 'Recall your last interview. Can you identify any moments where bias may have influenced your judgment?' },\n                    { type: 'script', title: ' Coach Wrap-Up', content: 'Bias is inevitable, but awareness and structured methods help reduce its impact.' },\n                    { type: 'journal', prompt: ' Stretch Activity\\n\\nWrite down 2 biases you think might affect your interviews and 1 strategy to mitigate each.' }\n                ]\n            },\n            {\n                id: 'l3-2', title: 'Common Interview Biases', type: 'standard', isCompleted: false,\n                steps: [\n                    { type: 'script', title: ' Coach Intro', content: 'Lets explore the biases most likely to appear in interviews and how to counter them.' },\n                    { type: 'script', title: ' Bias Breakdown', content: \"Confirmation Bias\\n\\nDefinition: Seeking info that confirms your first impression.\\nMitigation: Follow a structured question set and score each answer objectively.\\n\\nHalo/Horn Effect\\n\\nDefinition: One positive/negative trait dominates your judgment.\\nMitigation: Evaluate competencies individually.\\n\\nSimilarity Bias\\n\\nDefinition: Favoring candidates with similar backgrounds or interests.\\nMitigation: Focus on job-relevant criteria, not personal similarities.\\n\\nRecency Bias\\n\\nDefinition: Giving disproportionate weight to the last candidate.\\nMitigation: Take notes and review previous candidates before scoring.\\n\\nAffinity Bias\\n\\nDefinition: Favoring those who share your opinions or personality.\\nMitigation: Use objective metrics and a scoring rubric.\" },\n                    { type: 'quiz_mcq', question: 'Which bias occurs when one strong trait influences all judgments?', options: ['Confirmation', 'Halo/Horn', 'Recency', 'Similarity'], correctAnswer: 'Halo/Horn', feedback: { correct: 'Correct! The halo/horn effect makes one trait dominate perception.', incorrect: 'The answer is B. Evaluate each competency independently.' } },\n                    { type: 'journal', prompt: 'Identify a bias you think is most common in your interviews. How have you unintentionally allowed it to affect your judgment?' },\n                    { type: 'script', title: ' Coach Wrap-Up', content: 'Recognizing common biases is the first step; applying structured mitigation strategies ensures fairness.' },\n                    { type: 'journal', prompt: ' Stretch Activity\\n\\nPick one bias. Write a short strategy for counteracting it in every interview you conduct this week.' }\n                ]\n            },\n            {\n                id: 'l3-3', title: 'Structural Bias Mitigation Techniques', type: 'standard', isCompleted: false,\n                steps: [\n                    { type: 'script', title: ' Coach Intro', content: 'Structure is your best defense against bias. The more consistent and objective your process, the less influence bias has.' },\n                    { type: 'script', title: ' Teaching Moment / Analogy', content: 'Imagine a scale. Bias is like uneven weights. Structured interviews balance the scale.' },\n                    { type: 'script', title: ' Mini-Case', content: 'A sales organization implemented standard scoring rubrics and identical question sets. After six months, employee diversity and performance metrics improved significantly.' },\n                    { type: 'quiz_mcq', question: 'Which is a structural bias mitigation technique?', options: ['Using different questions for each candidate', 'Blind resume reviews', 'Relying on gut feeling', 'Asking personal questions'], correctAnswer: 'Blind resume reviews', feedback: { correct: 'Correct! Blind reviews and structured rubrics reduce bias.', incorrect: 'The answer is B. Objective, standardized methods counter bias effectively.' } },\n                    { type: 'journal', prompt: 'Which structural change can you implement immediately to reduce bias in your interviews?' },\n                    { type: 'script', title: ' Coach Wrap-Up', content: 'Structure = fairness. Standardized questions and scoring rubrics reduce unconscious bias influence.' },\n                    { type: 'journal', prompt: ' Stretch Activity\\n\\nCreate a simple scoring rubric for one of your commonly asked behavioral questions.' }\n                ]\n            },\n            {\n                id: 'l3-4', title: 'Real-Time Bias Interruption Techniques', type: 'standard', isCompleted: false,\n                steps: [\n                    { type: 'script', title: ' Coach Intro', content: 'Even with structure, bias can creep in. Real-time techniques help you pause and reset during interviews.' },\n                    { type: 'script', title: ' Techniques', content: \"Self-Check: Ask, Am I favoring this candidate based on irrelevant factors?\\n\\nPause & Reflect: Take a 5-second mental pause before scoring.\\n\\nObjective Notes: Record quotes or behaviors before giving a rating.\\n\\nUse Comparisons: Evaluate candidates against competency benchmarks, not each other.\" },\n                    { type: 'script', title: ' Mini-Case', content: 'During a panel interview, one interviewer realized they were favoring a candidate with similar hobbies. They paused, reviewed the scoring rubric, and corrected their evaluation.' },\n                    { type: 'quiz_mcq', question: 'What is the best immediate action if you notice bias creeping in?', options: ['Ignore it', 'Pause and check the rubric', 'Ask the candidate personal questions', 'Score based on gut feeling'], correctAnswer: 'Pause and check the rubric', feedback: { correct: 'Correct! Pause and review your rubric or notes to counter bias immediately.', incorrect: 'The answer is B. Conscious reflection mitigates bias impact.' } },\n                    { type: 'journal', prompt: 'Think of a bias you notice in yourself. How will you pause and interrupt it in future interviews?' },\n                    { type: 'script', title: ' Coach Wrap-Up', content: 'Bias interruption is about awareness and action  a conscious habit.' },\n                    { type: 'journal', prompt: ' Stretch Activity\\n\\nDuring your next interview, note any moments you consciously applied a bias interruption technique.' }\n                ]\n            },\n            {\n                id: 'l3-5', title: 'Continuous Improvement and Accountability', type: 'practice', isCompleted: false,\n                steps: [\n                    { type: 'script', title: ' Coach Intro', content: 'Bias awareness isnt one-off. Continuous improvement and accountability help maintain fair interviewing practices.' },\n                    { type: 'script', title: ' Strategies', content: 'Peer Review: Regularly review each others interview notes.\\n\\nCalibration Meetings: Compare scores across interviewers and align standards.\\n\\nFeedback Loops: Incorporate feedback from candidates and hiring teams.\\n\\nSelf-Reflection Journals: Record and review your interviews to spot patterns.' },\n                    { type: 'script', title: ' Mini-Case', content: 'A consulting firm implemented quarterly calibration sessions. Interviewers became more aligned, consistent scoring increased, and hiring outcomes improved.' },\n                    { type: 'quiz_mcq', question: 'Which action supports continuous bias mitigation?', options: ['Occasional reminders only', 'Peer review and calibration', 'Relying on memory', 'Ignoring feedback'], correctAnswer: 'Peer review and calibration', feedback: { correct: 'Correct! Continuous checks and accountability prevent bias drift.', incorrect: 'The answer is B. Regular calibration and feedback are essential.' } },\n                    { type: 'journal', prompt: 'What one accountability mechanism will you implement immediately to track your own bias reduction?' },\n                    { type: 'script', title: ' Coach Wrap-Up', content: 'Bias mitigation is a journey. Structure, reflection, and peer accountability create lasting fairness.' },\n                    { type: 'journal', prompt: ' Stretch Activity\\n\\nSet up a bi-weekly review with a peer to discuss scoring alignment and bias reflections.' }\n                ]\n            }\n        ]\n    },\n    {\n        id: 'm4',\n        title: \"Legal Compliance Essentials\",\n        description: \"Understand the legal boundaries of interviewing.\",\n        duration: 35,\n        isCompleted: false,\n        lessons: [\n            {\n                id: 'l4-1', title: 'Introduction to Legal Compliance', type: 'standard', isCompleted: false,\n                steps: [\n                    { type: 'script', title: ' Coach Intro', content: 'Legal compliance in interviews isnt just about avoiding lawsuits  it ensures fairness, protects candidates, and upholds your organizations reputation. Understanding the law helps you focus on evaluating talent objectively.' },\n                    { type: 'script', title: ' Teaching Moment / Analogy', content: 'Think of legal compliance as the boundaries on a sports field. The rules dont stop the game; they make it fair and structured.' },\n                    { type: 'script', title: ' Mini-Case', content: 'An organization faced legal scrutiny when an interviewer asked candidates about marital status. After training, all interviewers followed structured questions and compliance checklists, reducing risk and increasing fairness.' },\n                    { type: 'quiz_mcq', question: 'Why is legal compliance critical in interviews?', options: ['To avoid fines and lawsuits', 'To ensure fair evaluation and protect candidates', 'To limit hiring flexibility', 'Both A & B'], correctAnswer: 'Both A & B', feedback: { correct: 'Correct! Legal compliance protects both the organization and the candidates, while promoting fairness.', incorrect: 'The answer is D. Compliance ensures fairness and reduces legal risk.' } },\n                    { type: 'journal', prompt: 'Think about any interview you conducted or participated in. Were all questions compliant with legal standards?' },\n                    { type: 'script', title: ' Coach Wrap-Up', content: 'Understanding compliance is the foundation. Every question you ask must focus on job-relevant criteria.' },\n                    { type: 'journal', prompt: ' Stretch Activity\\n\\nList 3 topics you should never ask a candidate about during an interview. Think about alternatives you could use instead.' }\n                ]\n            },\n            {\n                id: 'l4-2', title: 'Protected Characteristics', type: 'standard', isCompleted: false,\n                steps: [\n                    { type: 'script', title: ' Coach Intro', content: 'Federal and local laws protect candidates from discrimination based on certain characteristics. Awareness is the first step to ensuring compliance.' },\n                    { type: 'script', title: ' Protected Characteristics', content: 'Race / Color\\n\\nReligion\\n\\nSex / Gender / Pregnancy / Sexual Orientation\\n\\nNational Origin\\n\\nAge (40+)\\n\\nDisability\\n\\nGenetic Information' },\n                    { type: 'script', title: ' Mini-Case', content: 'A manager asked a candidate about their childcare arrangements. This violated federal guidance. After training, managers learned to focus only on availability and job requirements.' },\n                    { type: 'quiz_mcq', question: 'Which question is legally compliant?', options: ['Are you planning to have children soon?', 'Are you authorized to work in the country?', 'What is your spouses job?', 'How old are you?'], correctAnswer: 'Are you authorized to work in the country?', feedback: { correct: 'Correct! Focus only on job-relevant information.', incorrect: 'The answer is B. Questions about family, age, or spouse are prohibited.' } },\n                    { type: 'journal', prompt: 'Identify 2 questions youve asked in the past that could risk discrimination. How can you reframe them to be compliant?' },\n                    { type: 'script', title: ' Coach Wrap-Up', content: 'Protected characteristics must never influence hiring decisions. Always focus on job-related skills and qualifications.' },\n                    { type: 'journal', prompt: ' Stretch Activity\\n\\nWrite compliant alternatives for 3 common non-compliant questions.' }\n                ]\n            },\n            {\n                id: 'l4-3', title: 'Prohibited Questions & Safe Alternatives', type: 'standard', isCompleted: false,\n                steps: [\n                    { type: 'script', title: ' Coach Intro', content: 'Some questions may seem harmless but are legally risky. Learn safe alternatives to assess the same competencies.' },\n                    { type: 'script', title: ' Categories & Examples', content: \"Personal / Family\\n\\nProhibited: Marital status, childcare plans\\nSafe Alternative: Are you available to work the required schedule?\\n\\nAge / Physical Characteristics\\n\\nProhibited: Age, height, weight\\nSafe Alternative: Can you perform the essential functions of this role with or without reasonable accommodation?\\n\\nBackground / Origin\\n\\nProhibited: Nationality, accent, religion\\nSafe Alternative: Are you legally authorized to work in this country?\\n\\nHealth / Disability\\n\\nProhibited: Questions about disabilities or health history\\nSafe Alternative: Focus on ability to perform job functions, e.g., This role requires lifting 20 lbs. Can you perform this task with or without reasonable accommodation?\" },\n                    { type: 'quiz_mcq', question: 'Which is a safe interview question?', options: ['What religion do you practice?', 'Are you legally allowed to work here?', 'How tall are you?', 'Are you married?'], correctAnswer: 'Are you legally allowed to work here?', feedback: { correct: 'Correct! Always ask about legal work eligibility or job-related abilities.', incorrect: 'The answer is B. Avoid any questions about personal characteristics.' } },\n                    { type: 'journal', prompt: 'Review your current interview guide. Are there any prohibited questions? Replace them with job-relevant alternatives.' },\n                    { type: 'script', title: ' Coach Wrap-Up', content: 'Always ask questions that measure ability and qualifications  not personal attributes.' },\n                    { type: 'journal', prompt: ' Stretch Activity\\n\\nCreate a mini cheat sheet of 5 prohibited questions and their compliant alternatives.' }\n                ]\n            },\n            {\n                id: 'l4-4', title: 'Documentation and Record-Keeping', type: 'standard', isCompleted: false,\n                steps: [\n                    { type: 'script', title: ' Coach Intro', content: 'Documentation is your safeguard. Objective, consistent records protect the organization and provide defensible hiring decisions.' },\n                    { type: 'script', title: ' Best Practices', content: 'Record every question asked\\n\\nTake detailed, job-relevant notes on candidate responses\\n\\nUse consistent scoring rubrics\\n\\nDocument final hiring decisions and rationale\\n\\nRetain records as required by law' },\n                    { type: 'script', title: ' Mini-Case', content: 'After an audit, an organizations well-documented interviews protected them from an EEOC complaint. Notes included structured question responses and objective scoring.' },\n                    { type: 'quiz_mcq', question: 'What should interview notes focus on?', options: ['Candidates personal background', 'Job-relevant skills and behaviors', 'Gut feeling impressions', 'Off-topic comments'], correctAnswer: 'Job-relevant skills and behaviors', feedback: { correct: 'Correct! Notes must be objective and job-focused.', incorrect: 'The answer is B. Avoid documenting personal characteristics or opinions.' } },\n                    { type: 'journal', prompt: 'Examine your note-taking habits. Are you consistently recording objective, job-relevant information?' },\n                    { type: 'script', title: ' Coach Wrap-Up', content: 'Good documentation ensures fairness, legal compliance, and audit readiness.' },\n                    { type: 'journal', prompt: ' Stretch Activity\\n\\nRevise your current interview template to include structured sections for questions, candidate responses, and scoring.' }\n                ]\n            },\n            {\n                id: 'l4-5', title: 'Practical Application and Scenarios', type: 'standard', isCompleted: false,\n                steps: [\n                    { type: 'script', title: ' Coach Intro', content: 'Lets apply compliance knowledge in real-world interview scenarios.' },\n                    { type: 'script', title: ' Scenario 1', content: \"Situation: A candidate mentions they are pregnant.\\nQuestion: How should you respond?\\n\\n Focus on role requirements, not personal circumstances.\\n\\nCompliant Response: Can you perform the essential functions of this role?\" },\n                    { type: 'script', title: ' Scenario 2', content: \"Situation: A candidate has a foreign accent.\\nQuestion: How should you assess them?\\n\\n Focus on communication ability as required by the role.\\n\\nCompliant Response: Please provide an example of a complex task you explained to a team member.\" },\n                    { type: 'script', title: ' Scenario 3', content: \"Situation: You notice a candidate went to the same school as you.\\nQuestion: Should this affect scoring?\\n\\n No. Focus only on skills and competencies, not shared background.\" },\n                    { type: 'quiz_mcq', question: 'If a candidate shares personal information, whats the best approach?', options: ['Ask follow-up personal questions', 'Focus on job-relevant abilities', 'Let it influence scoring', 'Ignore all responses'], correctAnswer: 'Focus on job-relevant abilities', feedback: { correct: 'Correct! Personal information should not affect your evaluation.', incorrect: 'The answer is B. Keep assessment objective and compliant.' } },\n                    { type: 'journal', prompt: 'Write down 1 challenging scenario youve faced or could face. How will you ensure your response is compliant?' },\n                    { type: 'script', title: ' Coach Wrap-Up', content: 'Practice makes compliance automatic. Use structured questions, focus on role requirements, and document consistently.' },\n                    { type: 'journal', prompt: ' Stretch Activity\\n\\nCreate 3 mock interview questions that are fully legally compliant and evaluate the same competencies as your previous non-compliant questions.' }\n                ]\n            }\n        ]\n    },\n    {\n        id: 'm5',\n        title: \"Mock Interviewing and Feedback Systems\",\n        description: \"Practice conducting interviews and providing structured feedback.\",\n        duration: 30,\n        isCompleted: false,\n        lessons: [\n            {\n                id: 'l5-1', title: 'Introduction to Mock Interviews', type: 'standard', isCompleted: false,\n                steps: [\n                    { type: 'script', title: ' Coach Intro', content: 'Mock interviews are practice opportunities where you can refine your skills, receive feedback, and simulate real interview conditions without risk. Theyre the fastest way to learn structured interviewing and avoid common mistakes.' },\n                    { type: 'script', title: ' Teaching Moment', content: 'Think of a mock interview as a rehearsal before the performance  like athletes running drills before the big game. Mistakes here become learning opportunities, not consequences.' },\n                    { type: 'script', title: ' Mini-Case', content: 'An organization implemented regular mock interviews for new interviewers. Within a month, they noticed a 30% improvement in structured questioning and evaluation consistency.' },\n                    { type: 'quiz_mcq', question: 'What is the main purpose of a mock interview?', options: ['To make candidates nervous', 'To practice and improve interviewing skills', 'To replace real interviews', 'To test candidate knowledge'], correctAnswer: 'To practice and improve interviewing skills', feedback: { correct: 'Correct! Mock interviews are for skill development and feedback.', incorrect: 'The answer is B. They simulate real interviews for learning, not evaluation.' } },\n                    { type: 'journal', prompt: 'Have you ever practiced interviewing before a real session? What was challenging?' },\n                    { type: 'script', title: ' Coach Wrap-Up', content: 'Mock interviews allow mistakes in a safe environment. Use them to develop consistency, clarity, and confidence.' },\n                    { type: 'journal', prompt: ' Stretch Activity\\n\\nIdentify 3 aspects of your interview style you want to improve during mock sessions.' }\n                ]\n            },\n            {\n                id: 'l5-2', title: 'Preparing a Mock Interview', type: 'standard', isCompleted: false,\n                steps: [\n                    { type: 'script', title: ' Coach Intro', content: 'Preparation is key to a productive mock interview. Define roles, select scenarios, and set evaluation criteria before starting.' },\n                    { type: 'script', title: ' Steps to Prepare', content: 'Assign Roles: Interviewer, candidate, observer(s)\\n\\nSelect Scenario: Choose realistic job scenarios relevant to the role\\n\\nDevelop Questions: Include both behavioral and technical questions\\n\\nSet Evaluation Criteria: Use structured rubrics aligned with STAR method and legal compliance' },\n                    { type: 'script', title: ' Mini-Case', content: 'Before mock interviews, an interviewer prepared a role-specific scenario and scoring sheet. Feedback afterward was specific, actionable, and helped the interviewer correct mistakes immediately.' },\n                    { type: 'quiz_mcq', question: 'What is the first step in preparing a mock interview?', options: ['Conduct the interview', 'Assign roles and select scenarios', 'Give feedback', 'Review candidate resumes'], correctAnswer: 'Assign roles and select scenarios', feedback: { correct: 'Correct! Role assignment and scenario selection set the stage for effective practice.', incorrect: 'The answer is B. Preparation ensures the session is focused and productive.' } },\n                    { type: 'journal', prompt: 'Think about the last mock interview you conducted. Did you follow a structured preparation process?' },\n                    { type: 'script', title: ' Coach Wrap-Up', content: 'Always invest time in preparation. A well-structured session ensures actionable feedback and learning.' },\n                    { type: 'journal', prompt: ' Stretch Activity\\n\\nCreate a short scenario and set of questions for your next mock interview.' }\n                ]\n            },\n            {\n                id: 'l5-3', title: 'Conducting the Mock Interview', type: 'standard', isCompleted: false,\n                steps: [\n                    { type: 'script', title: ' Coach Intro', content: 'During the session, follow structured guidelines and maintain a realistic interview environment. Focus on asking, listening, and documenting.' },\n                    { type: 'script', title: ' Key Guidelines', content: 'Follow Structure: Opening, middle, closing phases\\n\\nBehavioral Focus: Ask STAR-based questions\\n\\nActive Listening: Paraphrase, probe, take notes\\n\\nTime Management: Keep interview within planned duration\\n\\nProfessionalism: Treat candidate as in real interview' },\n                    { type: 'script', title: ' Mini-Case', content: 'During a mock session, an interviewer asked consistent questions and documented responses. Observers noted improvement in follow-up questioning and feedback clarity.' },\n                    { type: 'quiz_mcq', question: 'Which practice is essential during a mock interview?', options: ['Skip preparation', 'Focus on personal opinions about candidate', 'Follow structured questions and evaluate objectively', 'Rush through questions'], correctAnswer: 'Follow structured questions and evaluate objectively', feedback: { correct: 'Correct! Stick to structured questioning and objective evaluation.', incorrect: 'The answer is C. Personal opinions or shortcuts reduce learning effectiveness.' } },\n                    { type: 'journal', prompt: 'During mock interviews, do you find it easier to stick to structured questions or improvise? How does this impact feedback?' },\n                    { type: 'script', title: ' Coach Wrap-Up', content: 'Treat mock interviews as real sessions to practice rigor, clarity, and objective evaluation.' },\n                    { type: 'journal', prompt: ' Stretch Activity\\n\\nRun a 10-minute mock interview with a colleague using a prepared scenario. Focus on following the STAR method.' }\n                ]\n            },\n            {\n                id: 'l5-4', title: 'Providing Feedback', type: 'standard', isCompleted: false,\n                steps: [\n                    { type: 'script', title: ' Coach Intro', content: 'Feedback is the learning engine of mock interviews. It must be specific, balanced, actionable, and timely.' },\n                    { type: 'script', title: ' Feedback Characteristics', content: 'Specific: Focus on concrete behaviors\\n\\nActionable: Give clear guidance for improvement\\n\\nBalanced: Highlight strengths and areas for growth\\n\\nTimely: Deliver immediately after the session' },\n                    { type: 'script', title: ' Mini-Case', content: 'After a mock interview, peer feedback highlighted excellent questioning but weak probing. The interviewer improved significantly in the next session.' },\n                    { type: 'quiz_mcq', question: 'Which feedback is effective?', options: ['You were fine.', 'Your questions were clear, but you need to probe deeper for details.', 'You could do better.', 'Dont be nervous next time.'], correctAnswer: 'Your questions were clear, but you need to probe deeper for details.', feedback: { correct: 'Correct! Feedback should be specific and actionable.', incorrect: 'The answer is B. General comments arent helpful for learning.' } },\n                    { type: 'journal', prompt: 'Think about feedback youve received in the past. Was it actionable or vague? How could it have been improved?' },\n                    { type: 'script', title: ' Coach Wrap-Up', content: 'Feedback transforms practice into real skill development. Always be specific, actionable, and constructive.' },\n                    { type: 'journal', prompt: ' Stretch Activity\\n\\nObserve a peer mock interview and write 3 actionable feedback points.' }\n                ]\n            },\n            {\n                id: 'l5-5', title: 'Self-Assessment and Reflection', type: 'practice', isCompleted: false,\n                steps: [\n                    { type: 'script', title: ' Coach Intro', content: 'Reflection solidifies learning. After each mock interview, assess yourself, identify gaps, and plan next steps.' },\n                    { type: 'script', title: ' Self-Assessment Steps', content: 'Review Notes: Compare your questions and evaluation to the rubric\\n\\nIdentify Strengths: Note what went well\\n\\nSpot Gaps: Identify missed opportunities or mistakes\\n\\nPlan Improvement: Set actionable goals for next session' },\n                    { type: 'script', title: ' Mini-Case', content: 'An interviewer used a self-assessment checklist after every mock session. Over 4 weeks, their structured questioning improved and feedback became more precise.' },\n                    { type: 'quiz_mcq', question: 'What is the main purpose of self-assessment after a mock interview?', options: ['To criticize yourself harshly', 'To reflect, learn, and plan improvement', 'To record candidate details', 'To reduce interview time'], correctAnswer: 'To reflect, learn, and plan improvement', feedback: { correct: 'Correct! Reflection and planning enhance skill development.', incorrect: 'The answer is B. Self-assessment is about improving performance, not blaming.' } },\n                    { type: 'journal', prompt: 'After your next mock interview, write down 2 things you did well and 2 things to improve.' },\n                    { type: 'script', title: ' Coach Wrap-Up', content: 'Self-assessment turns each practice into measurable growth. Combine this with peer feedback for maximum impact.' },\n                    { type: 'journal', prompt: ' Stretch Activity\\n\\nCreate a personal improvement plan with 3 goals for your next 3 mock interviews.' }\n                ]\n            }\n        ]\n    },\n    {\n        id: 'm6',\n        title: \"Leadership Through Interviewing\",\n        description: \"Frame interviewing as a core leadership competency.\",\n        duration: 30,\n        isCompleted: false,\n        lessons: [\n            {\n                id: 'l6-1', title: 'Interviewing as a Leadership Skill', type: 'standard', isCompleted: false,\n                steps: [\n                    { type: 'script', title: ' Coach Intro', content: 'Effective interviewing is a critical leadership competency. The way you conduct interviews reflects your ability to evaluate talent, make decisions, and influence organizational outcomes.' },\n                    { type: 'script', title: ' Teaching Moment', content: 'Leaders who master interviewing consistently select high-performing teams, identify gaps early, and model organizational values through behavior.' },\n                    { type: 'script', title: ' Mini-Case', content: 'A TL who mastered structured interviewing noticed her teams hiring quality improved. She was able to make better decisions, mentor others, and reduce turnover by 15%.' },\n                    { type: 'quiz_mcq', question: 'Why is interviewing considered a leadership skill?', options: ['It lets you ask tough questions', 'It reflects your ability to assess talent, make decisions, and influence outcomes', 'It is only about hiring', 'It allows you to test candidates knowledge'], correctAnswer: 'It reflects your ability to assess talent, make decisions, and influence outcomes', feedback: { correct: 'Correct! Interviewing is a reflection of leadership and decision-making capabilities.', incorrect: 'The answer is B. Leadership includes guiding hiring and team development through interviews.' } },\n                    { type: 'journal', prompt: 'Think about a leader you admire. How do they approach hiring and interviews? What leadership qualities do they demonstrate?' },\n                    { type: 'script', title: ' Coach Wrap-Up', content: 'Interviewing hones your communication skills, which are essential for leadership. Clear, concise, and inclusive communication creates trust and ensures accurate evaluation.' },\n                    { type: 'journal', prompt: ' Stretch Activity\\n\\nWrite down 2 ways you can demonstrate leadership during interviews beyond asking questions.' }\n                ]\n            },\n            {\n                id: 'l6-2', title: 'Strategic Thinking in Interviewing', type: 'standard', isCompleted: false,\n                steps: [\n                    { type: 'script', title: ' Coach Intro', content: 'Interviews are not isolated eventsthey are part of broader organizational strategy. Leaders align hiring decisions with long-term business goals.' },\n                    { type: 'script', title: ' Key Points', content: 'Understand Organizational Needs: Know the skills, culture, and gaps\\n\\nAlign Candidate Capabilities: Hire talent that supports strategic objectives\\n\\nPlan for Growth: Consider how candidates can evolve into future roles\\n\\nIntegrate Feedback Loops: Use interview data to refine hiring strategies' },\n                    { type: 'script', title: ' Mini-Case', content: 'A hiring manager analyzed past interviews and realized candidates with certain competencies consistently excelled. By integrating this insight, the team improved project delivery speed.' },\n                    { type: 'quiz_mcq', question: 'What is a strategic approach to interviewing?', options: ['Asking random questions', 'Aligning candidate capabilities with organizational objectives', 'Only focusing on cultural fit', 'Speeding up the hiring process'], correctAnswer: 'Aligning candidate capabilities with organizational objectives', feedback: { correct: 'Correct! Strategic interviewing ensures hires support organizational goals.', incorrect: 'The answer is B. Leadership requires connecting hiring to broader strategy.' } },\n                    { type: 'journal', prompt: 'Reflect on your current team: Are you hiring for immediate needs only, or long-term growth?' },\n                    { type: 'script', title: ' Coach Wrap-Up', content: 'Self-reflection solidifies learning. After each mock interview, assess yourself, identify gaps, and plan next steps.' },\n                    { type: 'journal', prompt: ' Stretch Activity\\n\\nCreate a simple mapping of a candidates skills to potential organizational goals for practice.' }\n                ]\n            },\n            {\n                id: 'l6-3', title: 'Emotional Intelligence in Interviewing', type: 'standard', isCompleted: false,\n                steps: [\n                    { type: 'script', title: ' Coach Intro', content: 'Emotional intelligence (EQ) is crucial during interviews. Leaders with high EQ read candidates, manage dynamics, and create inclusive environments.' },\n                    { type: 'script', title: ' Key Points', content: 'Self-Awareness: Monitor your own biases and emotions\\n\\nEmpathy: Understand candidates perspectives\\n\\nSocial Skills: Facilitate smooth interactions\\n\\nConflict Management: Navigate challenging candidate scenarios' },\n                    { type: 'script', title: ' Mini-Case', content: 'During a tough interview, a TL noticed a candidate was nervous. By acknowledging it and adjusting their tone, the candidate performed better, giving more accurate insights.' },\n                    { type: 'quiz_mcq', question: 'How does emotional intelligence enhance interviewing?', options: ['Helps you intimidate candidates', 'Supports understanding, empathy, and smooth interactions', 'Makes interviews faster', 'Allows you to skip structured questions'], correctAnswer: 'Supports understanding, empathy, and smooth interactions', feedback: { correct: 'Correct! EQ helps leaders interpret candidate responses and maintain professionalism.', incorrect: 'The answer is B. Emotional intelligence is about understanding, not control.' } },\n                    { type: 'journal', prompt: 'Think about a time when you or someone else demonstrated empathy in a professional conversation. How did it affect the outcome?' },\n                    { type: 'script', title: ' Coach Wrap-Up', content: 'Leadership is a journey. Interviews are both an assessment of others and a mirror for your own development. Reflection turns each session into growth.' },\n                    { type: 'journal', prompt: ' Stretch Activity\\n\\nDuring your next interview, practice one EQ skill (e.g., active listening or empathy) and note its impact.' }\n                ]\n            },\n            {\n                id: 'l6-4', title: 'Communication Excellence', type: 'standard', isCompleted: false,\n                steps: [\n                    { type: 'script', title: ' Coach Intro', content: 'Interviewing hones your communication skills, which are essential for leadership. Clear, concise, and inclusive communication creates trust and ensures accurate evaluation.' },\n                    { type: 'script', title: ' Key Guidelines', content: 'Active Listening: Pay full attention and paraphrase responses\\n\\nClear Questioning: Avoid ambiguity; use role-relevant examples\\n\\nInclusive Language: Ensure candidates feel valued\\n\\nProfessional Representation: Model organizations values through tone and behavior' },\n                    { type: 'script', title: ' Mini-Case', content: 'A TL noticed candidates misunderstood a question. By rephrasing clearly and inclusively, candidate responses became more informative, improving decision-making.' },\n                    { type: 'quiz_mcq', question: 'Effective communication in interviewing includes:', options: ['Speaking as much as possible', 'Active listening, clear questions, and inclusive language', 'Using technical jargon', 'Rapid-fire questioning'], correctAnswer: 'Active listening, clear questions, and inclusive language', feedback: { correct: 'Correct! Communication is key to understanding candidates accurately.', incorrect: 'The answer is B. Leadership communication fosters clarity and fairness.' } },\n                    { type: 'journal', prompt: 'During your last interview, how well did you listen and communicate? Where could you improve?' },\n                    { type: 'script', title: ' Coach Wrap-Up', content: 'Leadership is a journey. Interviews are both an assessment of others and a mirror for your own development. Reflection turns each session into growth.' },\n                    { type: 'journal', prompt: ' Stretch Activity\\n\\nPractice rephrasing a technical question into simple, inclusive language for clarity.' }\n                ]\n            },\n            {\n                id: 'l6-5', title: 'Self-Reflection and Continuous Improvement', type: 'standard', isCompleted: false,\n                steps: [\n                    { type: 'script', title: ' Coach Intro', content: 'Leadership is a journey. Interviews are both an assessment of others and a mirror for your own development. Reflection turns each session into growth.' },\n                    { type: 'script', title: ' Self-Reflection Steps', content: 'Assess Decisions: Were your judgments fair, consistent, and aligned with strategy?\\n\\nIdentify Strengths: Where did you communicate or lead effectively?\\n\\nSpot Improvement Areas: What skills need more practice (e.g., EQ, STAR questioning)?\\n\\nSet Goals: Create a plan to enhance leadership through interviewing' },\n                    { type: 'script', title: ' Mini-Case', content: 'A TL reviewed notes after each interview and tracked recurring patterns in decision-making. Over time, their judgment improved, and they became a mentor for peers.' },\n                    { type: 'quiz_mcq', question: 'Why is self-reflection critical for leadership in interviewing?', options: ['To feel guilty about mistakes', 'To learn, improve, and model leadership behavior', 'To skip feedback sessions', 'To evaluate candidates faster'], correctAnswer: 'To learn, improve, and model leadership behavior', feedback: { correct: 'Correct! Reflection transforms practice into growth.', incorrect: 'The answer is B. Its about improving your leadership and interviewing skills.' } },\n                    { type: 'journal', prompt: 'Write down 2 behaviors from todays interview practice that reflect leadership, and 2 you want to improve.' },\n                    { type: 'script', title: ' Coach Wrap-Up', content: 'Leadership is a journey. Interviews are both an assessment of others and a mirror for your own development. Reflection turns each session into growth.' },\n                    { type: 'journal', prompt: ' Stretch Activity\\n\\nCreate a personal development plan for interviewing skills to enhance leadership over the next month.' }\n                ]\n            }\n        ]\n    }\n];\n\n\n\n// ==========================================\n// Service Functions\n// ==========================================\n\n/**\n * Nominates a user for the Interviewer Coaching program.\n */\nexport async function nominateUser(managerRole: Role, nomineeRole: Role, targetRole: string): Promise<Nomination> {\n    const allNominations = getFromStorage<Nomination>(INTERVIEWER_LAB_KEY);\n    const now = new Date().toISOString();\n    const initialModules = getInitialModules();\n\n    const newNomination: Nomination = {\n        id: uuidv4(),\n        nominatedBy: managerRole,\n        nominee: nomineeRole,\n        targetInterviewRole: targetRole,\n        status: 'Pre-assessment pending',\n        modules: initialModules,\n        modulesTotal: initialModules.length,\n        modulesCompleted: 0,\n        certified: false,\n        lastUpdated: now,\n        nominatedAt: now,\n    };\n\n    allNominations.unshift(newNomination);\n    saveToStorage(INTERVIEWER_LAB_KEY, allNominations);\n    \n    // Create a notification for the nominated user\n    const managerName = roleUserMapping[managerRole]?.name || managerRole;\n    const notification: Feedback = {\n        trackingId: `IL-NOM-${newNomination.id}`,\n        subject: `You've been nominated for Interviewer Training!`,\n        message: `Congratulations! ${managerName} has nominated you for the Laddrr Interviewer Lab, a program designed to help you become a more effective and confident interviewer.\\n\\nThis training will help you:\\n- Conduct structured, fair, and legally compliant interviews.\\n- Master behavioral interviewing techniques like the STAR method.\\n- Identify and mitigate unconscious bias.\\n\\nTo get started, please navigate to the \"Interviewer Lab\" section from the main sidebar and complete your pre-assessment.`,\n        submittedAt: new Date(now),\n        criticality: 'Low',\n        status: 'Pending Acknowledgement',\n        assignedTo: [nomineeRole],\n        viewed: false,\n        auditTrail: [{\n            event: 'Notification Created',\n            timestamp: new Date(now),\n            actor: 'System',\n            details: `Automated notification for Interviewer Lab nomination.`\n        }]\n    };\n    \n    const allFeedback = getFeedbackFromStorage();\n    allFeedback.unshift(notification);\n    saveFeedbackToStorage(allFeedback);\n\n    return newNomination;\n}\n\n/**\n * Gets all nominations initiated by a specific manager.\n */\nexport async function getNominationsForManager(managerRole: Role): Promise<Nomination[]> {\n    const allNominations = getFromStorage<Nomination>(INTERVIEWER_LAB_KEY);\n    return allNominations\n        .filter(n => n.nominatedBy === managerRole)\n        .sort((a, b) => new Date(b.nominatedAt).getTime() - new Date(a.nominatedAt).getTime());\n}\n\n/**\n * Gets the nomination for the currently logged-in user, if one exists.\n */\nexport async function getNominationForUser(userRole: Role): Promise<Nomination | null> {\n    const allNominations = getFromStorage<Nomination>(INTERVIEWER_LAB_KEY);\n    return allNominations.find(n => n.nominee === userRole) || null;\n}\n\n/**\n * Saves the result of a pre-assessment mock interview.\n */\nexport async function savePreAssessment(nominationId: string, analysis: InterviewerAnalysisOutput): Promise<void> {\n    const allNominations = getFromStorage<Nomination>(INTERVIEWER_LAB_KEY);\n    const index = allNominations.findIndex(n => n.id === nominationId);\n\n    if (index !== -1) {\n        allNominations[index].scorePre = analysis.scores.overall;\n        allNominations[index].analysisPre = analysis;\n        allNominations[index].status = 'In Progress';\n        allNominations[index].lastUpdated = new Date().toISOString();\n        saveToStorage(INTERVIEWER_LAB_KEY, allNominations);\n    }\n}\n\n/**\n * Saves the result of a post-assessment and determines certification.\n */\nexport async function savePostAssessment(nominationId: string, analysis: InterviewerAnalysisOutput): Promise<void> {\n    const allNominations = getFromStorage<Nomination>(INTERVIEWER_LAB_KEY);\n    const index = allNominations.findIndex(n => n.id === nominationId);\n\n    if (index !== -1) {\n        const nomination = allNominations[index];\n        nomination.scorePost = analysis.scores.overall;\n        nomination.analysisPost = analysis;\n        nomination.lastUpdated = new Date().toISOString();\n\n        // Certification Logic: Must show at least 15% improvement\n        const preScore = nomination.scorePre || 0;\n        const postScore = nomination.scorePost;\n        const improvement = preScore > 0 ? ((postScore - preScore) / preScore) * 100 : 100;\n\n        if (postScore >= 75 && improvement >= 15) {\n            nomination.status = 'Certified';\n            nomination.certified = true;\n        } else {\n            nomination.status = 'Retry Needed';\n        }\n\n        saveToStorage(INTERVIEWER_LAB_KEY, allNominations);\n    }\n}\n\n\n/**\n * Marks a training module as complete for a given nomination.\n */\nexport async function completeModule(nominationId: string, moduleId: string): Promise<Nomination> {\n    const allNominations = getFromStorage<Nomination>(INTERVIEWER_LAB_KEY);\n    const index = allNominations.findIndex(n => n.id === nominationId);\n\n    if (index === -1) {\n        throw new Error(\"Nomination not found.\");\n    }\n\n    const nomination = allNominations[index];\n    const moduleIndex = nomination.modules.findIndex(m => m.id === moduleId);\n\n    if (moduleIndex !== -1 && !nomination.modules[moduleIndex].isCompleted) {\n        nomination.modules[moduleIndex].isCompleted = true;\n        nomination.modulesCompleted = nomination.modules.filter(m => m.isCompleted).length;\n        nomination.lastUpdated = new Date().toISOString();\n\n        if (nomination.modulesCompleted === nomination.modulesTotal) {\n            nomination.status = 'Post-assessment pending';\n        }\n        \n        saveToStorage(INTERVIEWER_LAB_KEY, allNominations);\n    }\n\n    return nomination;\n}\n\n/**\n * Saves the result of a single lesson.\n */\nexport async function saveLessonResult(nominationId: string, moduleId: string, lessonId: string, result: any): Promise<void> {\n    const allNominations = getFromStorage<Nomination>(INTERVIEWER_LAB_KEY);\n    const nominationIndex = allNominations.findIndex(n => n.id === nominationId);\n    if (nominationIndex === -1) return;\n\n    const moduleIndex = allNominations[nominationIndex].modules.findIndex(m => m.id === moduleId);\n    if (moduleIndex === -1) return;\n\n    const lessonIndex = allNominations[nominationIndex].modules[moduleIndex].lessons.findIndex(l => l.id === lessonId);\n    if (lessonIndex === -1) return;\n\n    allNominations[nominationIndex].modules[moduleIndex].lessons[lessonIndex].isCompleted = true;\n    allNominations[nominationIndex].modules[moduleIndex].lessons[lessonIndex].result = result;\n    \n    saveToStorage(INTERVIEWER_LAB_KEY, allNominations);\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3243, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/frontend/src/services/leadership-service.ts"],"sourcesContent":["\n\n'use client';\n\nimport { v4 as uuidv4 } from 'uuid';\nimport type { Role } from '@common/types/role';\nimport { roleUserMapping } from '@/lib/role-mapping';\nimport { getFeedbackFromStorage, saveFeedbackToStorage, type Feedback } from './feedback-service';\nimport type { NetsInitialInput } from '../types/ai';\n\nexport interface ScriptStep {\n    type: 'script';\n    id: string;\n    content: string;\n}\n\nexport interface QuizStep {\n    type: 'quiz_mcq';\n    id: string;\n    question: string;\n    options: string[];\n    correctAnswer: string;\n    feedback?: {\n        correct: string;\n        incorrect: string;\n    };\n}\n\nexport interface ActivityStep {\n    type: 'activity';\n    id: string;\n    content: string;\n}\n\nexport interface SynthesisStep {\n    type: 'synthesis';\n    id: string;\n    title: string;\n    intro: string;\n    weeklyPractices: {\n        id: string;\n        startWeek: number;\n        endWeek: number;\n        focus: string;\n        tasks: string[];\n    }[];\n    outro: string;\n}\n\nexport interface PracticeStep {\n    type: 'practice';\n    id: string;\n    scenario: NetsInitialInput;\n}\n\n\nexport type LessonStep = ScriptStep | QuizStep | ActivityStep | SynthesisStep | PracticeStep;\n\nexport interface LeadershipLesson {\n    id: string;\n    title: string;\n    isCompleted: boolean;\n    steps: LessonStep[];\n    userInputs?: Record<string, any>; // To store answers and reflections\n    startDate?: string;\n    type?: 'standard' | 'practice';\n}\n\nexport interface LeadershipModule {\n    id: string;\n    title: string;\n    description: string;\n    isCompleted: boolean;\n    lessons: LeadershipLesson[];\n}\n\nexport interface LeadershipNomination {\n    id: string;\n    nominatedBy: Role;\n    nomineeRole: Role;\n    targetRole: Role;\n    mentorRole?: Role;\n    status: 'InProgress' | 'Completed' | 'Certified';\n    startDate: string;\n    modules: LeadershipModule[];\n    modulesCompleted: number;\n    currentModuleId: string;\n    certified: boolean;\n    lastUpdated: string;\n}\n\nexport const LEADERSHIP_COACHING_KEY = 'leadership_coaching_nominations_v5';\n\nconst getModulesForEmployeeToLead = (): LeadershipModule[] => [\n    { \n        id: 'm1', \n        title: 'Building Personal Leadership Presence', \n        description: 'Learn to show up as someone others trust, respect, and want to follow.',\n        isCompleted: false,\n        lessons: [\n            {\n                id: 'l1-0',\n                title: 'What is Leadership Presence?',\n                isCompleted: false,\n                steps: [\n                     {\n                        id: 's1-0-1',\n                        type: 'script',\n                        content: `<h4>What is Leadership Presence and Why Does It Matter?</h4><p>Imagine walking into a meeting where Sarah, a software developer, quietly takes her seat in the back. When the project hits a roadblock, she doesn't speak up even though she knows the solution. Compare this to Marcus, also a developer, who enters the same meeting, makes eye contact with colleagues, and when the roadblock emerges, he leans forward and says, \"I've seen this issue before. Here's what worked for our team last time, and here's what we learned to avoid.\"</p><p class=\"mt-4\">Both Sarah and Marcus have the same technical skills. The difference? Marcus has developed <strong>leadership presence</strong>the ability to show up as someone others trust, respect, and want to follow, even when he has no formal authority.</p><p class=\"mt-4\">Leadership presence isn't about being the loudest person in the room or having a commanding personality. It's about developing four core qualities that make people think, \"I trust this person's judgment\" and \"I want to hear what they have to say.\"</p>`\n                    },\n                    {\n                        id: 's1-0-2',\n                        type: 'quiz_mcq',\n                        question: 'According to the text, what is the best definition of leadership presence?',\n                        options: [\n                            'Having a commanding personality and being the loudest in the room.',\n                            'The ability to show up in a way that inspires trust and respect from others.',\n                            'Having the most technical skill and experience on the team.',\n                            'Always having the correct answer to every problem.'\n                        ],\n                        correctAnswer: 'The ability to show up in a way that inspires trust and respect from others.',\n                        feedback: {\n                            correct: \"Correct! Leadership presence is about how you project credibility and earn trust, regardless of your official title.\",\n                            incorrect: \"Not quite. The key to leadership presence is inspiring trust and respect, which is more than just personality or technical skill.\"\n                        }\n                    }\n                ]\n            },\n            {\n                id: 'l1-1',\n                title: 'Pillar 1: Authenticity',\n                isCompleted: false,\n                steps: [\n                    {\n                        id: 's1-1-1',\n                        type: 'script',\n                        content: `<h4>Pillar 1: Authenticity - Being Real Without Being Raw</h4><p>Authenticity means bringing your genuine self to work while maintaining professionalism. It's not about sharing every personal detail or emotionit's about aligning your values with your actions consistently.</p><p class=\"mt-4 font-semibold\">What authentic leadership looks like:</p><ul class=\"list-disc pl-5 mt-2 space-y-1\"><li>When you make a mistake, you own it immediately: \"I missed that deadline because I underestimated the complexity. Here's my plan to prevent this in the future.\"</li><li>You share credit generously: \"This success happened because Maria caught the critical bug and Tom stayed late to help test the fix.\"</li><li>You admit when you don't know something: \"I'm not familiar with that technology stack. Can you walk me through how it would work?\"</li></ul><p class=\"mt-4 font-semibold\">What authentic leadership does NOT look like:</p><ul class=\"list-disc pl-5 mt-2 space-y-1\"><li>Oversharing personal problems: \"I'm having marriage issues and that's why I've been distracted\"</li><li>Being brutally honest without consideration: \"That idea is terrible and won't work\"</li><li>Using authenticity as an excuse for unprofessional behavior: \"That's just who I am\" when someone gives you feedback</li></ul>`\n                    },\n                    {\n                        id: 's1-1-2',\n                        type: 'quiz_mcq',\n                        question: 'A colleague praises you for a project you completed with a lot of help from a teammate. What is the most authentic response?',\n                        options: [\n                            'Say \"Thanks, I worked really hard on it.\"',\n                            'Say \"Thanks, but it was all [teammate\\'s name].\"',\n                            'Say \"Thanks! [Teammate\\'s name] and I made a great team on this. Their work on the data model was critical.\"',\n                            'Say nothing to avoid making it awkward.'\n                        ],\n                        correctAnswer: 'Say \"Thanks! [Teammate\\'s name] and I made a great team on this. Their work on the data model was critical.\"',\n                        feedback: {\n                            correct: \"Excellent! This response is authentic because it accepts the praise gracefully while generously and specifically sharing credit.\",\n                            incorrect: \"While well-intentioned, the best answer is to share credit specifically. It acknowledges your role while highlighting your teammate's contribution, which is a key leadership behavior.\"\n                        }\n                    }\n                ]\n            },\n            {\n                id: 'l1-2',\n                title: 'Pillar 2: Consistency',\n                isCompleted: false,\n                steps: [\n                    {\n                        id: 's1-2-1',\n                        type: 'script',\n                        content: `<h4>Pillar 2: Consistency - Becoming Predictably Reliable</h4><p>Consistency means people know what to expect from you. They trust that your mood won't dramatically affect your decision-making, that you'll follow through on commitments, and that you'll apply the same standards fairly to everyone.</p><p class=\"mt-4 font-semibold\">Building consistency in daily interactions:</p><ul class=\"list-disc pl-5 mt-2 space-y-1\"><li><strong>Morning routine example:</strong> Instead of rushing into work, take two minutes to check in with your team. \"Good morning, everyone. Any obstacles I can help remove today?\" This signals you care about both people and results.</li><li><strong>Decision-making consistency:</strong> When evaluating ideas, use the same criteria every time. \"Let's check this against our goals: Does it align with the project? Do we have resources? What's the risk?\"</li><li><strong>Follow-through consistency:</strong> If you say \"I'll get back to you by Friday,\" do it. If you can't, communicate that on Thursday.</li></ul><p class=\"mt-4\"><strong>The compound effect of consistency:</strong> People start coming to you for reliable information, then for your opinion, and eventually, they see you as leadership material because they trust your judgment.</p>`\n                    },\n                    {\n                        id: 's1-2-2',\n                        type: 'quiz_mcq',\n                        question: 'You promised a colleague you would review their document by end of day, but an urgent issue came up. What is the best demonstration of consistency?',\n                        options: [\n                            'Ignore the commitment and hope they forget.',\n                            'Send them a message saying \"Sorry, can\\'t do it today.\"',\n                            'Work late to finish the review, even if it means doing a poor job.',\n                            'Proactively message them before the deadline, explain the situation, and propose a new, specific timeline (e.g., \"by 10 AM tomorrow\").'\n                        ],\n                        correctAnswer: 'Proactively message them before the deadline, explain the situation, and propose a new, specific timeline (e.g., \"by 10 AM tomorrow\").',\n                        feedback: {\n                            correct: \"Perfect. Consistency isn't about being perfect; it's about being reliably communicative and managing expectations.\",\n                            incorrect: \"The best choice is proactive communication. Reliability comes from managing commitments, even when you have to adjust them.\"\n                        }\n                    }\n                ]\n            },\n            {\n                id: 'l1-3',\n                title: 'Pillar 3: Composure',\n                isCompleted: false,\n                steps: [\n                    {\n                        id: 's1-3-1',\n                        type: 'script',\n                        content: `<h4>Pillar 3: Composure - Staying Calm When Others Can't</h4><p>Composure isn't about suppressing emotions. It's about managing your emotional responses so you can think clearly during stressful situations.</p><p class=\"mt-4 font-semibold\">Practical composure techniques:</p><ul class=\"list-disc pl-5 mt-2 space-y-1\"><li><strong>The 3-breath technique:</strong> When stress rises, take three slow, deep breaths before responding. This engages your rational brain.</li><li><strong>The clarifying question:</strong> Instead of reacting to bad news, ask a question like, \"Help me understand what you mean by that?\" This buys you thinking time.</li><li><strong>The emotional labeling technique:</strong> Internally acknowledge your emotion without being controlled by it: \"I'm feeling frustrated. Let me focus on what we can control.\"</li></ul><p class=\"mt-4 font-semibold\">Composure in action example:</p><p>The situation: A major bug will delay a launch. The client is furious, and teammates are blaming each other.</p><p><em>Poor response:</em> \"This is a disaster! How did we miss this?\"</p><p><em>Composed response:</em> \"This is a serious issue. Let's focus on three things: First, a plan to fix the bug. Second, how to communicate with the client. Third, what we can learn to prevent this.\"</p>`\n                    },\n                    {\n                        id: 's1-3-2',\n                        type: 'quiz_mcq',\n                        question: 'In a tense meeting, a colleague criticizes your work. What is the best first response to demonstrate composure?',\n                        options: [\n                            'Immediately defend your work and point out their flaws.',\n                            'Take a slow breath and ask, \"Can you help me understand which part is most concerning to you?\"',\n                            'Say nothing and shut down.',\n                            'Tell them they are being unprofessional.'\n                        ],\n                        correctAnswer: 'Take a slow breath and ask, \"Can you help me understand which part is most concerning to you?\"',\n                        feedback: {\n                            correct: \"Exactly. This response combines the pause (breath) with a clarifying question, de-escalating the situation and gathering information.\",\n                            incorrect: \"The most composed response is to pause and ask a clarifying question. This prevents an emotional reaction and shifts the focus to problem-solving.\"\n                        }\n                    }\n                ]\n            },\n            {\n                id: 'l1-4',\n                title: 'Pillar 4: Connection',\n                isCompleted: false,\n                steps: [\n                    {\n                        id: 's1-4-1',\n                        type: 'script',\n                        content: `<h4>Pillar 4: Connection - Building Bridges, Not Walls</h4><p>Connection is about making others feel heard, valued, and understood. It's the skill that transforms individual contributors into leaders that others want to follow.</p><p class=\"mt-4 font-semibold\">Building connection through active listening:</p><ul class=\"list-disc pl-5 mt-2 space-y-1\"><li><strong>Level 1 - Passive listening:</strong> You're quiet, but your mind is preparing your response.</li><li><strong>Level 2 - Active listening:</strong> You're focused on understanding, asking clarifying questions, and reflecting back what you heard.</li><li><strong>Level 3 - Empathetic listening:</strong> You're not just hearing words, but understanding the emotions and motivations behind them.</li></ul><p class=\"mt-4 font-semibold\">Building connection through recognition:</p><p><em>Generic:</em> \"Good job.\"</p><p><em>Specific:</em> \"Your decision to add automated testing caught three bugs. That attention to quality made a real difference.\"</p><p><em>Development-focused:</em> \"The way you explained that complex concept to the sales team showed real leadership. That skill will serve you well.\"</p>`\n                    },\n                    {\n                        id: 's1-4-2',\n                        type: 'quiz_mcq',\n                        question: 'A junior team member successfully completes their first solo project. Which form of recognition best demonstrates the \"Connection\" pillar?',\n                        options: [\n                            'A quick \"good job\" in team chat.',\n                            'Mentioning their success in the weekly team meeting.',\n                            '\"The way you managed the project timeline and communicated risks was exactly what we look for in future leaders on this team. Great work.\"',\n                            'Giving them an even harder project next time.'\n                        ],\n                        correctAnswer: '\"The way you managed the project timeline and communicated risks was exactly what we look for in future leaders on this team. Great work.\"',\n                        feedback: {\n                            correct: \"Yes. This feedback is specific, ties their actions to valued leadership behaviors, and encourages future growth.\",\n                            incorrect: \"Specific, development-focused feedback is the most powerful way to build connection and motivate your colleagues.\"\n                        }\n                    }\n                ]\n            },\n             {\n                id: 'l1-5',\n                title: 'Synthesis: Putting It All Together',\n                isCompleted: false,\n                startDate: undefined,\n                steps: [\n                    {\n                        id: 's1-5-1',\n                        type: 'synthesis',\n                        title: 'Daily Practices to Build Leadership Presence',\n                        intro: \"Leadership presence isn't about perfecting each pillar in isolationit's about integrating them into a consistent way of showing up. The following is a guided 8-week plan to help you build these skills daily. Each week, focus on the assigned tasks.\",\n                        weeklyPractices: [\n                            { id: 'w1-2', startWeek: 1, endWeek: 2, focus: 'Authenticity Focus', tasks: [\"Practice admitting when you don't know something in low-stakes situations.\", \"Give credit to others at least once per day.\", \"When you make a mistake, own it immediately and share what you learned.\"] },\n                            { id: 'w3-4', startWeek: 3, endWeek: 4, focus: 'Consistency Focus', tasks: [\"Track three commitments you make each day and whether you keep them.\", \"Use the same decision-making criteria for similar situations.\", \"Develop a standard way of responding to common requests.\"] },\n                            { id: 'w5-6', startWeek: 5, endWeek: 6, focus: 'Composure Focus', tasks: [\"Practice the 3-breath technique during routine conversations.\", \"When someone shares bad news, pause and ask a clarifying question before reacting.\", \"Start meetings with a brief moment to center yourself.\"] },\n                            { id: 'w7-8', startWeek: 7, endWeek: 8, focus: 'Connection Focus', tasks: [\"Ask one genuine question about each person you work with each day.\", \"Practice level 3 listening in at least one conversation daily.\", \"Give specific, development-focused recognition to colleagues.\"] }\n                        ],\n                        outro: \"Signs of growth include: people seeking your input more often, feeling more confident in meetings, and your influence growing even without a formal title.\"\n                    }\n                ]\n            },\n            {\n                id: 'l1-6',\n                title: 'Activity: Self-Discovery',\n                isCompleted: false,\n                steps: [\n                    {\n                        id: 's1-6-1',\n                        type: 'activity',\n                        content: `<h4>Part A: Authenticity Assessment</h4><p>Think about your last work week. For each situation below, write what you actually did and what a more authentic response might have looked like:</p><ul class=\"list-disc pl-5 mt-2 space-y-1\"><li>Someone praised you for work that involved others.</li><li>You were asked about something you werent sure about.</li><li>You made an error that affected others.</li></ul>`\n                    },\n                    {\n                        id: 's1-6-2',\n                        type: 'activity',\n                        content: `<h4>Part B: Composure Practice</h4><p>List your top 3 work stress triggers, the physical signs you notice, your usual reaction, and a more composed response you could try for each.</p>`\n                    },\n                    {\n                        id: 's1-6-3',\n                        type: 'activity',\n                        content: `<h4>Part C: Connection Experiment</h4><p>Choose three colleagues and practice Level 2 listening (active listening), Level 3 listening (empathetic listening), and specific recognition. Note your observations and their responses for each person.</p>`\n                    }\n                ]\n            },\n            {\n                id: 'l1-7',\n                title: 'Practice Scenario: The Project Conflict',\n                isCompleted: false,\n                type: 'practice',\n                steps: [\n                    {\n                        id: 's1-7-1',\n                        type: 'practice',\n                        scenario: {\n                            persona: 'Team Lead',\n                            difficulty: 'strict',\n                            scenario: `Youre part of a six-person project team. In a meeting, Elena says: \"James, your dashboard design doesnt make sense. Its going to confuse users.\" James fires back: \"Well maybe if the requirements had been clear, I wouldnt have designed it this way!\" The tension is rising. You need to intervene to de-escalate the conflict and refocus the team.`,\n                        }\n                    }\n                ]\n            }\n        ]\n    }\n];\n\n// ==========================================\n// Generic Storage Helpers\n// ==========================================\n\nexport const getFromStorage = <T>(key: string): T[] => {\n    if (typeof window === 'undefined') return [];\n    const json = sessionStorage.getItem(key);\n    \n    if (!json) {\n        if (key === LEADERSHIP_COACHING_KEY) {\n            const mockData = getMockLeadershipData() as T[];\n            saveToStorage(key, mockData);\n            return mockData;\n        }\n        return [];\n    }\n    \n    return JSON.parse(json);\n};\n\nexport const saveToStorage = (key: string, data: any[]): void => {\n    if (typeof window === 'undefined') return;\n    sessionStorage.setItem(key, JSON.stringify(data));\n    window.dispatchEvent(new CustomEvent('feedbackUpdated'));\n    window.dispatchEvent(new Event('storage'));\n};\n\n\nconst getMockLeadershipData = (): LeadershipNomination[] => {\n    const modules = getModulesForEmployeeToLead();\n    const mockNomination: LeadershipNomination = {\n        id: 'mock-lead-1',\n        nominatedBy: 'Manager',\n        nomineeRole: 'Team Lead',\n        targetRole: 'AM',\n        mentorRole: 'Manager',\n        status: 'InProgress',\n        startDate: new Date(new Date().setDate(new Date().getDate() - 30)).toISOString(),\n        modules: modules.map((m, i) => ({ ...m, isCompleted: i < 0 })), // Nothing completed initially\n        modulesCompleted: 0,\n        currentModuleId: 'm1',\n        certified: false,\n        lastUpdated: new Date().toISOString(),\n    };\n    return [mockNomination];\n};\n\n\n// ==========================================\n// Service Functions\n// ==========================================\n\n/**\n * Nominates an employee for the Leadership Coaching program.\n */\nexport async function nominateForLeadership(managerRole: Role, nomineeRole: Role, targetRole: Role, mentorRole: Role): Promise<LeadershipNomination> {\n    const allNominations = getFromStorage<LeadershipNomination>(LEADERSHIP_COACHING_KEY);\n    const now = new Date().toISOString();\n    const initialModules = getModulesForEmployeeToLead();\n\n    const newNomination: LeadershipNomination = {\n        id: uuidv4(),\n        nominatedBy: managerRole,\n        nomineeRole,\n        targetRole: targetRole,\n        mentorRole: mentorRole,\n        status: 'InProgress',\n        startDate: now,\n        modules: initialModules.map(m => ({\n            ...m,\n            lessons: m.lessons.map(l => ({ ...l, userInputs: {} })) // Initialize userInputs\n        })),\n        modulesCompleted: 0,\n        currentModuleId: initialModules[0].id,\n        certified: false,\n        lastUpdated: now,\n    };\n\n    allNominations.unshift(newNomination);\n    saveToStorage(LEADERSHIP_COACHING_KEY, allNominations);\n\n    // Create a notification for the nominated user\n    const managerName = roleUserMapping[managerRole]?.name || managerRole;\n    const notification: Feedback = {\n        trackingId: `LD-NOM-${newNomination.id}`,\n        subject: `You've been enrolled in the Leadership Development Program!`,\n        message: `Congratulations! ${managerName} has enrolled you in the Leadership Development Program.\\n\\nThis program is designed to help you grow from a subject matter expert into an effective leader. You can track your progress and access modules in the \"Leadership\" section.`,\n        submittedAt: new Date(now),\n        criticality: 'Low',\n        status: 'Pending Acknowledgement',\n        assignedTo: [nomineeRole],\n        viewed: false,\n        auditTrail: [{\n            event: 'Notification Created',\n            timestamp: new Date(now),\n            actor: 'System',\n            details: `Automated notification for Leadership Program enrollment.`\n        }]\n    };\n    \n    const allFeedback = getFeedbackFromStorage();\n    allFeedback.unshift(notification);\n    saveFeedbackToStorage(allFeedback);\n\n    return newNomination;\n}\n\n/**\n * Gets all leadership nominations initiated by a specific manager.\n */\nexport async function getLeadershipNominationsForManager(managerRole: Role): Promise<LeadershipNomination[]> {\n    const allNominations = getFromStorage<LeadershipNomination>(LEADERSHIP_COACHING_KEY);\n    return allNominations\n        .filter(n => n.nominatedBy === managerRole)\n        .sort((a, b) => new Date(b.startDate).getTime() - new Date(a.startDate).getTime());\n}\n\n/**\n * Gets the leadership nomination for the currently logged-in user, if one exists.\n */\nexport async function getNominationForUser(userRole: Role): Promise<LeadershipNomination | null> {\n    const allNominations = getFromStorage<LeadershipNomination>(LEADERSHIP_COACHING_KEY);\n    return allNominations.find(n => n.nomineeRole === userRole) || null;\n}\n\nexport async function getNominationsForMentor(mentorRole: Role): Promise<LeadershipNomination[]> {\n    const allNominations = getFromStorage<LeadershipNomination>(LEADERSHIP_COACHING_KEY);\n    return allNominations.filter(n => n.mentorRole === mentorRole);\n}\n\nexport async function completeLeadershipLesson(nominationId: string, moduleId: string, lessonId: string): Promise<void> {\n    const nominations = getFromStorage<LeadershipNomination>(LEADERSHIP_COACHING_KEY);\n    const nomIndex = nominations.findIndex(n => n.id === nominationId);\n    if (nomIndex === -1) return;\n\n    const nomination = nominations[nomIndex];\n    const modIndex = nomination.modules.findIndex(m => m.id === moduleId);\n    if (modIndex === -1) return;\n\n    const lessonIndex = nomination.modules[modIndex].lessons.findIndex(l => l.id === lessonId);\n    if (lessonIndex !== -1) {\n        nomination.modules[modIndex].lessons[lessonIndex].isCompleted = true;\n    }\n\n    // Check if module is complete\n    const module = nomination.modules[modIndex];\n    const allLessonsCompleted = module.lessons.every(l => l.isCompleted);\n    if (allLessonsCompleted && !module.isCompleted) {\n        module.isCompleted = true;\n        nomination.modulesCompleted = nomination.modules.filter(m => m.isCompleted).length;\n        \n        // Unlock next module\n        const nextModule = nomination.modules[modIndex + 1];\n        if (nextModule) {\n            nomination.currentModuleId = nextModule.id;\n        } else {\n            // All modules completed\n            nomination.status = 'Completed';\n        }\n    }\n\n    nomination.lastUpdated = new Date().toISOString();\n    saveToStorage(LEADERSHIP_COACHING_KEY, nominations);\n}\n\nexport async function saveLeadershipLessonAnswer(nominationId: string, lessonId: string, stepId: string, answer: any): Promise<void> {\n    const nominations = getFromStorage<LeadershipNomination>(LEADERSHIP_COACHING_KEY);\n    const nomIndex = nominations.findIndex(n => n.id === nominationId);\n    if (nomIndex === -1) return;\n\n    const nomination = nominations[nomIndex];\n    \n    // Find the correct lesson across all modules\n    let lesson: LeadershipLesson | undefined;\n    for (const module of nomination.modules) {\n        lesson = module.lessons.find(l => l.id === lessonId);\n        if (lesson) break;\n    }\n\n    if (lesson) {\n        if (!lesson.userInputs) {\n            lesson.userInputs = {};\n        }\n        lesson.userInputs[stepId] = answer;\n        nomination.lastUpdated = new Date().toISOString();\n        saveToStorage(LEADERSHIP_COACHING_KEY, nominations);\n    } else {\n        console.error(`Lesson with ID ${lessonId} not found in nomination ${nominationId}`);\n    }\n}\n"],"names":[],"mappings":";;;;;;;;;;;AAIA;AAEA;AACA;AALA;;;;AAyFO,MAAM,0BAA0B;AAEvC,MAAM,8BAA8B,IAA0B;QAC1D;YACI,IAAI;YACJ,OAAO;YACP,aAAa;YACb,aAAa;YACb,SAAS;gBACL;oBACI,IAAI;oBACJ,OAAO;oBACP,aAAa;oBACb,OAAO;wBACF;4BACG,IAAI;4BACJ,MAAM;4BACN,SAAS,CAAC,yiCAAyiC,CAAC;wBACxjC;wBACA;4BACI,IAAI;4BACJ,MAAM;4BACN,UAAU;4BACV,SAAS;gCACL;gCACA;gCACA;gCACA;6BACH;4BACD,eAAe;4BACf,UAAU;gCACN,SAAS;gCACT,WAAW;4BACf;wBACJ;qBACH;gBACL;gBACA;oBACI,IAAI;oBACJ,OAAO;oBACP,aAAa;oBACb,OAAO;wBACH;4BACI,IAAI;4BACJ,MAAM;4BACN,SAAS,CAAC,0wCAA0wC,CAAC;wBACzxC;wBACA;4BACI,IAAI;4BACJ,MAAM;4BACN,UAAU;4BACV,SAAS;gCACL;gCACA;gCACA;gCACA;6BACH;4BACD,eAAe;4BACf,UAAU;gCACN,SAAS;gCACT,WAAW;4BACf;wBACJ;qBACH;gBACL;gBACA;oBACI,IAAI;oBACJ,OAAO;oBACP,aAAa;oBACb,OAAO;wBACH;4BACI,IAAI;4BACJ,MAAM;4BACN,SAAS,CAAC,uvCAAuvC,CAAC;wBACtwC;wBACA;4BACI,IAAI;4BACJ,MAAM;4BACN,UAAU;4BACV,SAAS;gCACL;gCACA;gCACA;gCACA;6BACH;4BACD,eAAe;4BACf,UAAU;gCACN,SAAS;gCACT,WAAW;4BACf;wBACJ;qBACH;gBACL;gBACA;oBACI,IAAI;oBACJ,OAAO;oBACP,aAAa;oBACb,OAAO;wBACH;4BACI,IAAI;4BACJ,MAAM;4BACN,SAAS,CAAC,ixCAAixC,CAAC;wBAChyC;wBACA;4BACI,IAAI;4BACJ,MAAM;4BACN,UAAU;4BACV,SAAS;gCACL;gCACA;gCACA;gCACA;6BACH;4BACD,eAAe;4BACf,UAAU;gCACN,SAAS;gCACT,WAAW;4BACf;wBACJ;qBACH;gBACL;gBACA;oBACI,IAAI;oBACJ,OAAO;oBACP,aAAa;oBACb,OAAO;wBACH;4BACI,IAAI;4BACJ,MAAM;4BACN,SAAS,CAAC,8oCAA8oC,CAAC;wBAC7pC;wBACA;4BACI,IAAI;4BACJ,MAAM;4BACN,UAAU;4BACV,SAAS;gCACL;gCACA;gCACA;gCACA;6BACH;4BACD,eAAe;4BACf,UAAU;gCACN,SAAS;gCACT,WAAW;4BACf;wBACJ;qBACH;gBACL;gBACC;oBACG,IAAI;oBACJ,OAAO;oBACP,aAAa;oBACb,WAAW;oBACX,OAAO;wBACH;4BACI,IAAI;4BACJ,MAAM;4BACN,OAAO;4BACP,OAAO;4BACP,iBAAiB;gCACb;oCAAE,IAAI;oCAAQ,WAAW;oCAAG,SAAS;oCAAG,OAAO;oCAAsB,OAAO;wCAAC;wCAA8E;wCAAgD;qCAA0E;gCAAC;gCACtR;oCAAE,IAAI;oCAAQ,WAAW;oCAAG,SAAS;oCAAG,OAAO;oCAAqB,OAAO;wCAAC;wCAAwE;wCAAiE;qCAA2D;gCAAC;gCACjR;oCAAE,IAAI;oCAAQ,WAAW;oCAAG,SAAS;oCAAG,OAAO;oCAAmB,OAAO;wCAAC;wCAAiE;wCAAsF;qCAAyD;gCAAC;gCAC3R;oCAAE,IAAI;oCAAQ,WAAW;oCAAG,SAAS;oCAAG,OAAO;oCAAoB,OAAO;wCAAC;wCAAsE;wCAAkE;qCAAgE;gCAAC;6BACvR;4BACD,OAAO;wBACX;qBACH;gBACL;gBACA;oBACI,IAAI;oBACJ,OAAO;oBACP,aAAa;oBACb,OAAO;wBACH;4BACI,IAAI;4BACJ,MAAM;4BACN,SAAS,CAAC,yZAAyZ,CAAC;wBACxa;wBACA;4BACI,IAAI;4BACJ,MAAM;4BACN,SAAS,CAAC,wLAAwL,CAAC;wBACvM;wBACA;4BACI,IAAI;4BACJ,MAAM;4BACN,SAAS,CAAC,uPAAuP,CAAC;wBACtQ;qBACH;gBACL;gBACA;oBACI,IAAI;oBACJ,OAAO;oBACP,aAAa;oBACb,MAAM;oBACN,OAAO;wBACH;4BACI,IAAI;4BACJ,MAAM;4BACN,UAAU;gCACN,SAAS;gCACT,YAAY;gCACZ,UAAU,CAAC,2VAA2V,CAAC;4BAC3W;wBACJ;qBACH;gBACL;aACH;QACL;KACH;AAMM,MAAM,iBAAiB,CAAI;IAC9B,uCAAmC;;IAAS;IAC5C,MAAM,OAAO,eAAe,OAAO,CAAC;IAEpC,IAAI,CAAC,MAAM;QACP,IAAI,QAAQ,yBAAyB;YACjC,MAAM,WAAW;YACjB,cAAc,KAAK;YACnB,OAAO;QACX;QACA,OAAO,EAAE;IACb;IAEA,OAAO,KAAK,KAAK,CAAC;AACtB;AAEO,MAAM,gBAAgB,CAAC,KAAa;IACvC,uCAAmC;;IAAM;IACzC,eAAe,OAAO,CAAC,KAAK,KAAK,SAAS,CAAC;IAC3C,OAAO,aAAa,CAAC,IAAI,YAAY;IACrC,OAAO,aAAa,CAAC,IAAI,MAAM;AACnC;AAGA,MAAM,wBAAwB;IAC1B,MAAM,UAAU;IAChB,MAAM,iBAAuC;QACzC,IAAI;QACJ,aAAa;QACb,aAAa;QACb,YAAY;QACZ,YAAY;QACZ,QAAQ;QACR,WAAW,IAAI,KAAK,IAAI,OAAO,OAAO,CAAC,IAAI,OAAO,OAAO,KAAK,KAAK,WAAW;QAC9E,SAAS,QAAQ,GAAG,CAAC,CAAC,GAAG,IAAM,CAAC;gBAAE,GAAG,CAAC;gBAAE,aAAa,IAAI;YAAE,CAAC;QAC5D,kBAAkB;QAClB,iBAAiB;QACjB,WAAW;QACX,aAAa,IAAI,OAAO,WAAW;IACvC;IACA,OAAO;QAAC;KAAe;AAC3B;AAUO,eAAe,sBAAsB,WAAiB,EAAE,WAAiB,EAAE,UAAgB,EAAE,UAAgB;IAChH,MAAM,iBAAiB,eAAqC;IAC5D,MAAM,MAAM,IAAI,OAAO,WAAW;IAClC,MAAM,iBAAiB;IAEvB,MAAM,gBAAsC;QACxC,IAAI,CAAA,GAAA,wLAAA,CAAA,KAAM,AAAD;QACT,aAAa;QACb;QACA,YAAY;QACZ,YAAY;QACZ,QAAQ;QACR,WAAW;QACX,SAAS,eAAe,GAAG,CAAC,CAAA,IAAK,CAAC;gBAC9B,GAAG,CAAC;gBACJ,SAAS,EAAE,OAAO,CAAC,GAAG,CAAC,CAAA,IAAK,CAAC;wBAAE,GAAG,CAAC;wBAAE,YAAY,CAAC;oBAAE,CAAC,GAAG,wBAAwB;YACpF,CAAC;QACD,kBAAkB;QAClB,iBAAiB,cAAc,CAAC,EAAE,CAAC,EAAE;QACrC,WAAW;QACX,aAAa;IACjB;IAEA,eAAe,OAAO,CAAC;IACvB,cAAc,yBAAyB;IAEvC,+CAA+C;IAC/C,MAAM,cAAc,4IAAA,CAAA,kBAAe,CAAC,YAAY,EAAE,QAAQ;IAC1D,MAAM,eAAyB;QAC3B,YAAY,CAAC,OAAO,EAAE,cAAc,EAAE,EAAE;QACxC,SAAS,CAAC,2DAA2D,CAAC;QACtE,SAAS,CAAC,iBAAiB,EAAE,YAAY,wOAAwO,CAAC;QAClR,aAAa,IAAI,KAAK;QACtB,aAAa;QACb,QAAQ;QACR,YAAY;YAAC;SAAY;QACzB,QAAQ;QACR,YAAY;YAAC;gBACT,OAAO;gBACP,WAAW,IAAI,KAAK;gBACpB,OAAO;gBACP,SAAS,CAAC,yDAAyD,CAAC;YACxE;SAAE;IACN;IAEA,MAAM,cAAc,CAAA,GAAA,qJAAA,CAAA,yBAAsB,AAAD;IACzC,YAAY,OAAO,CAAC;IACpB,CAAA,GAAA,qJAAA,CAAA,wBAAqB,AAAD,EAAE;IAEtB,OAAO;AACX;AAKO,eAAe,mCAAmC,WAAiB;IACtE,MAAM,iBAAiB,eAAqC;IAC5D,OAAO,eACF,MAAM,CAAC,CAAA,IAAK,EAAE,WAAW,KAAK,aAC9B,IAAI,CAAC,CAAC,GAAG,IAAM,IAAI,KAAK,EAAE,SAAS,EAAE,OAAO,KAAK,IAAI,KAAK,EAAE,SAAS,EAAE,OAAO;AACvF;AAKO,eAAe,qBAAqB,QAAc;IACrD,MAAM,iBAAiB,eAAqC;IAC5D,OAAO,eAAe,IAAI,CAAC,CAAA,IAAK,EAAE,WAAW,KAAK,aAAa;AACnE;AAEO,eAAe,wBAAwB,UAAgB;IAC1D,MAAM,iBAAiB,eAAqC;IAC5D,OAAO,eAAe,MAAM,CAAC,CAAA,IAAK,EAAE,UAAU,KAAK;AACvD;AAEO,eAAe,yBAAyB,YAAoB,EAAE,QAAgB,EAAE,QAAgB;IACnG,MAAM,cAAc,eAAqC;IACzD,MAAM,WAAW,YAAY,SAAS,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;IACrD,IAAI,aAAa,CAAC,GAAG;IAErB,MAAM,aAAa,WAAW,CAAC,SAAS;IACxC,MAAM,WAAW,WAAW,OAAO,CAAC,SAAS,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;IAC5D,IAAI,aAAa,CAAC,GAAG;IAErB,MAAM,cAAc,WAAW,OAAO,CAAC,SAAS,CAAC,OAAO,CAAC,SAAS,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;IACjF,IAAI,gBAAgB,CAAC,GAAG;QACpB,WAAW,OAAO,CAAC,SAAS,CAAC,OAAO,CAAC,YAAY,CAAC,WAAW,GAAG;IACpE;IAEA,8BAA8B;IAC9B,MAAM,SAAS,WAAW,OAAO,CAAC,SAAS;IAC3C,MAAM,sBAAsB,OAAO,OAAO,CAAC,KAAK,CAAC,CAAA,IAAK,EAAE,WAAW;IACnE,IAAI,uBAAuB,CAAC,OAAO,WAAW,EAAE;QAC5C,OAAO,WAAW,GAAG;QACrB,WAAW,gBAAgB,GAAG,WAAW,OAAO,CAAC,MAAM,CAAC,CAAA,IAAK,EAAE,WAAW,EAAE,MAAM;QAElF,qBAAqB;QACrB,MAAM,aAAa,WAAW,OAAO,CAAC,WAAW,EAAE;QACnD,IAAI,YAAY;YACZ,WAAW,eAAe,GAAG,WAAW,EAAE;QAC9C,OAAO;YACH,wBAAwB;YACxB,WAAW,MAAM,GAAG;QACxB;IACJ;IAEA,WAAW,WAAW,GAAG,IAAI,OAAO,WAAW;IAC/C,cAAc,yBAAyB;AAC3C;AAEO,eAAe,2BAA2B,YAAoB,EAAE,QAAgB,EAAE,MAAc,EAAE,MAAW;IAChH,MAAM,cAAc,eAAqC;IACzD,MAAM,WAAW,YAAY,SAAS,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;IACrD,IAAI,aAAa,CAAC,GAAG;IAErB,MAAM,aAAa,WAAW,CAAC,SAAS;IAExC,6CAA6C;IAC7C,IAAI;IACJ,KAAK,MAAM,UAAU,WAAW,OAAO,CAAE;QACrC,SAAS,OAAO,OAAO,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;QAC3C,IAAI,QAAQ;IAChB;IAEA,IAAI,QAAQ;QACR,IAAI,CAAC,OAAO,UAAU,EAAE;YACpB,OAAO,UAAU,GAAG,CAAC;QACzB;QACA,OAAO,UAAU,CAAC,OAAO,GAAG;QAC5B,WAAW,WAAW,GAAG,IAAI,OAAO,WAAW;QAC/C,cAAc,yBAAyB;IAC3C,OAAO;QACH,QAAQ,KAAK,CAAC,CAAC,eAAe,EAAE,SAAS,yBAAyB,EAAE,cAAc;IACtF;AACJ","debugId":null}}]
}